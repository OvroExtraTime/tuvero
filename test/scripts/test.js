require.config({shim:{"lib/modernizr":{deps:["lib/Blob"],exports:"Modernizr"},"lib/typeahead":{deps:["jquery"]},"lib/Blob":{exports:"Blob"},"lib/FileSaver":{exports:"saveAs"}},paths:{jquery:"lib/jquery",filesaver:"lib/FileSaver"}}),define("core/config",function(){}),!function(e,t){if("object"==typeof exports)module.exports=t(require,exports,module);else if("function"==typeof define&&define.amd)define("lib/extend",["require","exports","module"],t);else{var n=function(t){return e[t]},i=e,r={exports:i};e.extend=t(n,i,r)}}(this,function(e,t,n){function i(e,t){"use strict";function n(){}return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,e.superconstructor=t,e}return i.isSubclass=function(e,t){"use strict";if("function"==typeof t&&"function"==typeof e)for(var n=e;n=n.superconstructor;)if(n===t)return!0;return!1},n.exports=i,i}),define("core/listener",[],function(){function e(e){this.emitters||(this.emitters=[]),e&&e.registerListener(this)}return e.bind=function(t,n,i,r){var o,s;return s=r?function(e,t,n){i.call(r,e,t,n)}:i,o=new e(t),n.split(",").forEach(function(e){e=e.replace(/^\s+|\s+$/g,""),t.EVENTS[e]?o["on"+e]=s:console.error('Listener.bind: emitter does not emit event:"'+e)}),o},e.prototype.destroy=function(){for(;this.emitters.length>0;)this.emitters[0].unregisterListener(this)},e}),define("core/emitter",["lib/extend","core/listener"],function(e,t){function n(e){return e.constructor.toString().split("\n")[0].replace(/function (\S+)\(.*/,"$1")}function i(){i.superconstructor.call(this,void 0),void 0===this.listeners&&(this.listeners=[]),i.debug&&this.EVENTS.update&&(console.warn(n(this)+": The use of the 'update' event is discouraged."),console.warn("   Cause: The meaning of 'update' is ambiguous"))}var r;return r=0,e(i,t),i.prototype.EVENTS={update:!0,reset:!0},i.prototype.emit=function(e,t){var o,s;if(o=!1,!this.validEvent(e))return console.error("Emitter: unspecified event type: "+e),!1;if(r+=1,i.debug){for(s=">";s.length<=r;)s+=" ";console.log(s+n(this)+".emit("+e+") with "+this.listeners.length+" listeners")}return this.listeners.slice().forEach(function(n){n["on"+e]&&(n["on"+e].call(n,this,e,t),o=!0)},this),r-=1,o},i.prototype.validEvent=function(e){return this.EVENTS&&!!this.EVENTS[e]},i.prototype.registerListener=function(e){return this.unregisterListener(e),this.listeners.push(e),e.emitters.push(this),this},i.prototype.unregisterListener=function(e){var t;return t=this.listeners.indexOf(e),t!==-1&&this.listeners.splice(t,1),e.emitters&&(t=e.emitters.indexOf(this),t!==-1&&e.emitters.splice(t,1)),this},i.prototype.destroy=function(){for(i.superclass.destroy.call(this);this.listeners.length>0;)this.unregisterListener(this.listeners[0])},i.debug=!1,i}),define("core/type",[],function(){function e(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}function t(e){return e.toString().replace(/\s+/g," ").replace(/^\s*function ([A-Za-z]+)\(.*$/,"$1").toLowerCase()}function n(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var i;return i=[1,{},"",void 0,null,new Date,[],/asd/,!0,function(){}],n.is=function(e,i){switch(n(i)){case"string":return n(e)===i;case"function":return n(e)===t(i);case"undefined":return"undefined"===n(e);case"null":return"null"===n(e);default:return!1}},i.map(function(t){var i=n(t);n["is"+e(i)]=function(e){return n.is(e,i)}}),n}),define("core/model",["lib/extend","core/emitter","core/type"],function(e,t,n){function i(e){return e.constructor.toString().replace(/^function (\S+)\((.+|\s+)*$/g,"$1")}function r(e,t){if(n.isArray(t)){if(n.isArray(e)){if(1===t.length)return e.every(function(e){return!!r(e,t[0])||(console.error("restore(): Array element does not match type"),!1)});console.error("SAVEFORMAT array does not contain exactly 1 Type!")}return!1}return!!n.is(e,t)||(console.error(i(this)+".restore(): missing Key of type "+t),!1)}function o(){o.superconstructor.call(this)}return e(o,t),o.prototype.save=function(){return{}},o.prototype.restore=function(e){return n.isObject(e)?n.isObject(this.SAVEFORMAT)?Object.keys(this.SAVEFORMAT).every(function(t){return!!r.call(this,e[t],this.SAVEFORMAT[t])||(console.error("Missing key or wrong format: "+t),console.log(e),!1)},this):(console.error("restore(): SAVEFORMAT is not an object"),!1):(console.error("restore(): data is not an object"),!1)},o.prototype.SAVEFORMAT={},o}),define("list/listupdatelistener",["lib/extend","core/listener"],function(e,t){function n(e,t){n.superconstructor.call(this,e),this.callback=t}return e(n,t),n.bind=function(e,t){return new n(e,t)},n.prototype.update=function(e,t,n){this.callback.call(e,n)},n.prototype.onremove=n.prototype.update,n.prototype.onreset=n.prototype.update,n.prototype.oninsert=n.prototype.update,n}),define("list/listmodel",["lib/extend","core/model","list/listupdatelistener","core/type"],function(e,t,n,i){function r(e){r.superconstructor.call(this),this.length=0,this.list=[],n.bind(this,this.updateLength),i.isArray(e)&&e.forEach(function(e){this.push(e)},this)}return e(r,t),r.prototype.EVENTS={reset:!0,insert:!0,remove:!0,resize:!0},r.prototype.push=function(e){var t;return t=this.list.push(e),this.emit("insert",{id:this.list.length-1,object:e}),t},r.prototype.pop=function(){var e;return e=this.list.pop(),this.emit("remove",{id:this.list.length,object:e}),e},r.prototype.insert=function(e,t){if(e>=0&&e<=this.list.length)return this.list.splice(e,0,t),this.emit("insert",{id:e,object:t}),t},r.prototype.remove=function(e){var t;if(e>=0&&e<this.list.length)return t=this.list.splice(e,1)[0],this.emit("remove",{id:e,object:t}),t},r.prototype.clear=function(){for(;this.length;)this.pop();this.emit("reset")},r.prototype.indexOf=function(e){return this.list.indexOf(e)},r.prototype.includes=function(e){return this.list.indexOf(e)!==-1},r.prototype.get=function(e){return this.list[e]},r.prototype.set=function(e,t){if(e>=0&&e<this.list.length)return this.remove(e),this.insert(e,t),t},r.prototype.erase=function(e){var t,n;for(t=0;(n=this.indexOf(e))>=0;)this.remove(n)===e&&(t+=1);return t},r.prototype.map=function(e,t){var n,i;for(t=t||void 0,i=[],n=0;n<this.length;n+=1)i.push(e.call(t,this.get(n),n,this));return i},r.prototype.asArray=function(){return this.list.slice(0)},r.prototype.updateLength=function(){this.length!==this.list.length&&(this.length=this.list.length,this.emit("resize"))},r.prototype.makeReadonly=function(){this.push=void 0,this.pop=void 0,this.insert=void 0,this.remove=void 0,this.clear=void 0,this.erase=void 0},r.prototype.save=function(){var e;return e=this.list.every(function(e){return i.isFunction(e.save)})?this.list.map(function(e){try{return e.save()}catch(e){throw console.error("ListModel.save() failed with error: "),console.error(e.stack),new Error("ListModel.save() failed")}}):this.asArray()},r.prototype.restore=function(n,r){return!(!n||!i.isArray(n))&&(this.clear(),i.isFunction(r)?n.every(function(n,i){var o;try{if(o=e.isSubclass(r,t)?new r:r(n),!o.restore(n))return!1;for(;this.length<i;)this.push(void 0);return this.push(o),!0}catch(e){return console.error("ListModel.restore() failed for an element:"),console.error(n),console.error(e.stack),!1}},this):(n.forEach(function(e,t){for(;this.length<t;)this.push(void 0);this.push(e)},this),!0))},r.prototype.SAVEFORMAT=[],r}),define("list/indexedlistmodel",["lib/extend","list/listmodel","list/listupdatelistener"],function(e,t,n){function i(){i.superconstructor.call(this),n.bind(this,this.updateIDs)}return e(i,t),i.prototype.updateIDs=function(e){var t,n;if(void 0!==e)for(n=e.id||0,t=n;t<this.length;t+=1)this.get(t).setID(t)},i}),define("core/valuemodel",["lib/extend","core/model"],function(e,t){function n(e){n.superconstructor.call(this),this.onupdate!==n.prototype.onupdate&&this.bind===n.prototype.bind&&(this.bind=void 0),n.prototype.set.call(this,e)}return e(n,t),n.prototype.set=function(e){this.value!==e&&(this.value=e,this.emit("update",e))},n.prototype.get=function(){return this.value},n.prototype.bind=function(e){e.registerListener(this),this.onupdate(e)},n.prototype.onupdate=function(e){this.set&&this.set(e.get())},n}),define("ui/listcleanuplistener",["lib/extend","core/listener"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.onremove=function(e,t,n){return n?n.object?n.object.destroy?void n.object.destroy():void console.warn("ListCleanupListener: data.object has no destroy method"):void console.warn("ListCleanupListener: data contains no object property"):void console.warn("ListCleanupListener: no data object emitted")},n}),define("core/uniquelistmodel",["lib/extend","list/listmodel"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.push=function(e){if(this.indexOf(e)===-1)return n.superclass.push.call(this,e)},n.prototype.insert=function(e,t){if(this.indexOf(t)===-1)return n.superclass.insert.call(this,e,t)},n.prototype.set=function(e,t){if(this.indexOf(t)===-1)return n.superclass.set.call(this,e,t)},n}),define("core/propertymodel",["lib/extend","core/model","core/type"],function(e,t,n){function i(e){i.superconstructor.call(this),this.props={},e&&Object.keys(e).forEach(function(t){this.setProperty(t,e[t])},this)}return e(i,t),i.prototype.EVENTS={update:!0},i.prototype.getProperty=function(e){return this.props[e]},i.prototype.setProperty=function(e,t){if(this.getProperty(e)!==t)if(n.isString(t)||n.isNumber(t)||n.is(t,Boolean)){if(this.props[e]=t,this.getProperty(e)===t)return this.emit("update",{key:e,value:t}),!0}else console.error("setProperty(): unsupported property type: "+n(t));return!1},i.prototype.getPropertyKeys=function(){return Object.keys(this.props).sort()},i.prototype.save=function(){var e=i.superclass.save.call(this);return e.props={},this.getPropertyKeys().forEach(function(t){e.props[t]=this.getProperty(t)},this),e},i.prototype.restore=function(e){return!!i.superclass.restore.call(this,e)&&(Object.keys(e.props).forEach(function(t){var n=e.props[t];this.setProperty(t,n)},this),!0)},i.prototype.SAVEFORMAT=Object.create(i.superclass.SAVEFORMAT),i.prototype.SAVEFORMAT.props=Object,i}),define("ranking/rankingmapper",["lib/extend","core/model"],function(e,t){function n(e,t){n.superconstructor.call(this),this.cache=void 0,this.ranking=e,this.teams=t,e.registerListener(this)}return e(n,t),n.translateIDs=function(e,t){return e.map(function(e){return t.get(e)})},n.updateCache=function(){var e,t;e=this.ranking.get(),t={},Object.keys(e).forEach(function(i){var r;r="ids"===i?n.translateIDs(e[i],this.teams):e[i].slice(0),t[i]=r},this),this.cache=t},n.prototype.get=function(){return void 0===this.cache&&n.updateCache.call(this),this.cache},n.prototype.invalidate=function(){this.cache=void 0},n.prototype.onupdate=function(){this.invalidate(),this.emit("update")},n}),define("core/selectionvaluemodel",["lib/extend","core/valuemodel"],function(e,t){function n(e,t){n.superconstructor.call(this,e),this.allowedValues=t,this.setDefault(e),this.allowedValues.registerListener(this)}return e(n,t),n.prototype.isValid=function(e){return this.allowedValues.indexOf(e)!==-1},n.prototype.set=function(e){return!!this.isValid(e)&&(n.superclass.set.call(this,e),!0)},n.prototype.setDefault=function(e){this.defaultValue=e,this.validate()},n.prototype.validate=function(){this.isValid(this.get())||n.superclass.set.call(this,this.defaultValue)},n.prototype.onremove=function(){this.validate()},n}),define("core/statevaluemodel",["lib/extend","core/selectionvaluemodel","core/uniquelistmodel"],function(e,t,n){function i(e,t){i.superconstructor.call(this,e,new n),this.allowedValues.push(e),this.transitions=t,this.updateStates(),this.registerListener(this)}return e(i,t),i.prototype.updateStates=function(){Object.keys(this.transitions).forEach(function(e){var t;t=this.transitions[this.get()],this.get()===e?this.allowedValues.push(e):t.indexOf(e)!==-1?this.allowedValues.push(e):this.allowedValues.erase(e)},this)},i.prototype.forceState=function(e){return!!this.transitions[e]&&(this.allowedValues.push(e),this.set(e),!0)},i.prototype.onupdate=function(){this.updateStates()},i}),define("list/indexedmodel",["lib/extend","core/model"],function(e,t){function n(e){n.superconstructor.call(this),n.prototype.setID.call(this,e)}return e(n,t),n.prototype.getID=function(){return this.id},n.prototype.setID=function(e){void 0===e&&(e=-1),e!==this.id&&(this.id=e,this.emit("update"))},n.prototype.save=function(){var e=n.superclass.save.call(this);return e.id=this.id,e},n.prototype.restore=function(e){return!!n.superclass.restore.call(this,e)&&(this.id=e.id,!0)},n.prototype.SAVEFORMAT=Object.create(n.superclass.SAVEFORMAT),n.prototype.SAVEFORMAT.id=Number,n}),define("core/matchmodel",["lib/extend","list/indexedmodel","core/type"],function(e,t,n){function i(e,t,n){i.superconstructor.call(this,t),void 0===e&&(e=[]),void 0===n&&(n=-1),this.teams=e.slice(),this.length=this.teams.length,this.group=n}return e(i,t),i.prototype.EVENTS={update:!0,finish:!0},i.prototype.getTeamID=function(e){return this.teams[e]},i.prototype.getGroup=function(){return this.group},i.prototype.isResult=function(){return void 0!==this.score||!this.finish},i.prototype.isRunningMatch=function(){var e;return e=!0,e&&(e=!this.isResult()),e&&(e=this.teams.every(function(e){return n.isNumber(e)})),e&&(e=this.teams.every(function(e,t){return this.teams.slice(t+1).indexOf(e)===-1},this)),e},i.prototype.setID=void 0,i.prototype.finish=function(e){var t,n;return e&&e.length===this.length?(n=require("core/matchresult"),t=new n(this,e),this.emit("finish",t),t):void console.error("MatchModel.finish(): lengths don't match")},i.prototype.save=function(){var e=i.superclass.save.call(this);return e.g=this.group,e.t=this.teams.map(function(e){return e&&e.getID?e.getID():void 0===e?-1:e}),e},i.prototype.restore=function(e){return!!i.superclass.restore.call(this,e)&&(this.group=e.g,this.teams.splice(0),e.t.forEach(function(e){this.teams.push(e===-1?void 0:e)},this),this.length=this.teams.length,!0)},i.prototype.SAVEFORMAT=Object.create(i.superclass.SAVEFORMAT),i.prototype.SAVEFORMAT.g=Number,i.prototype.SAVEFORMAT.t=[Number],i}),define("core/matchresult",["lib/extend","core/matchmodel"],function(e,t){function n(e,t){if(n.superconstructor.call(this,e&&e.teams,e&&e.id,e&&e.group),void 0===t)return void(this.score=[]);if(this.teams.length!==t.length)throw new Error("MatchResult(): array lengths differ: "+this.teams.length+"<>"+t.length);this.score=t.slice(0)}return e(n,t),n.prototype.finish=void 0,n.prototype.isBye=function(){return this.isResult()&&2===this.length&&this.getTeamID(0)===this.getTeamID(1)},n.prototype.save=function(){var e=n.superclass.save.call(this);return e.s=this.score,e},n.prototype.restore=function(e){return!!n.superclass.restore.call(this,e)&&(this.score=e.s,!0)},n.prototype.SAVEFORMAT=Object.create(t.superclass.SAVEFORMAT),n.prototype.SAVEFORMAT.s=[Number],n}),define("ui/listcollectormodel",["lib/extend","core/model","core/listener"],function(e,t,n){function i(e,t){i.superconstructor.call(this),this.list=e,this.createListListener(),this.createEventCallbacks(t),this.registerExistingElements()}return e(i,t),i.prototype.createListListener=function(){this.listener=new n(this.list),this.listener.collector=this,this.listener.list=this.list,this.listener.oninsert=function(e,t,n){n.object.registerListener(this.collector)},this.listener.onremove=function(e,t,n){this.list.indexOf(n.object)===-1&&n.object.unregisterListener(this.collector)}},i.prototype.createEventCallbacks=function(e){var t;this.EVENTS={};for(t in e.prototype.EVENTS)e.prototype.EVENTS[t]&&(this.EVENTS[t]=!0,this["on"+t]=i.PROXYCALLBACK)},i.prototype.registerExistingElements=function(){this.list.map(function(e){e.registerListener(this)},this)},i.PROXYCALLBACK=function(e,t,n){n||(n={}),n.source||(n.source=e),this.emit(t,n)},i}),define("ranking/rankingcomponent",[],function(){function e(t,n){this.ranking=t,n?(this.nextcomponent=n,this.dependencies=this.nextcomponent.dependencies):(this.nextcomponent=e.DUMMYCOMPONENT,this.dependencies=[]),void 0===this.constructor.DEPENDENCIES?this.dependencies.push(this.constructor.NAME):this.constructor.DEPENDENCIES.forEach(function(e){this.dependencies.push(e)},this)}return e.NAME="undefined",e.DEPENDENCIES=[],e.DUMMYCOMPONENT={compare:function(e,t){return 0},getValues:function(e){return e}},e.prototype.getValues=function(e){var t,n;for(void 0===e&&(e=[]),t=[],n=0;n<this.ranking.length;n+=1)t[n]=this.value(n);return t.every(function(e){return void 0===e})&&(t=void 0),e.push(t),this.nextcomponent.getValues(e)},e.prototype.value=function(e){},e.prototype.compare=function(e,t){return this.value(t)-this.value(e)||this.nextcomponent.compare(e,t)},e}),define("ranking/rankingidcomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e){n.superconstructor.call(this,e,void 0)}return e(n,t),n.NAME="id",n.DEPENDENCIES=[],n.prototype.value=function(e){return e},n.prototype.compare=function(e,t){return-n.superclass.compare.call(this,e,t)},n}),define("ranking/rankingpointscomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="points",n.prototype.value=function(e){return this.ranking.points.get(e)},n}),define("ranking/rankinglostpointscomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="lostpoints",n.prototype.value=function(e){return this.ranking.lostpoints.get(e)},n}),define("ranking/rankingsaldocomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="saldo",n.prototype.value=function(e){return this.ranking.saldo.get(e)},n}),define("ranking/rankingbuchholzcomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="buchholz",n.prototype.value=function(e){return this.ranking.buchholz.get(e)},n}),define("ranking/rankingfinebuchholzcomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="finebuchholz",n.prototype.value=function(e){return this.ranking.finebuchholz.get(e)},n}),define("ranking/rankingsonneborncomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="sonneborn",n.prototype.value=function(e){return this.ranking.sonneborn.get(e)},n}),define("ranking/rankingwinscomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="wins",n.prototype.value=function(e){return this.ranking.wins.get(e)},n}),define("ranking/rankingheadtoheadcomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="headtohead",n.prototype.value=function(e){return this.ranking.headtohead.get(e)||""},n}),define("ranking/rankingtaccomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="tac",n.prototype.value=function(e){return this.ranking.tac.get(e)},n}),define("ranking/rankingvotescomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="votes",n.prototype.value=function(e){return this.ranking.votes.get(e)},n.prototype.compare=function(e,t){return this.nextcomponent.compare(e,t)},n}),define("ranking/rankingnumgamescomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="numgames",n.prototype.value=function(e){return this.ranking.numgames.get(e)},n}),define("ranking/rankingkocomponent",["lib/extend","ranking/rankingcomponent"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t)}return e(n,t),n.NAME="ko",n.prototype.value=function(e){return this.ranking.ko.get(e)},n}),define("ranking/rankingcomponentindex",["ranking/rankingidcomponent","ranking/rankingpointscomponent","ranking/rankinglostpointscomponent","ranking/rankingsaldocomponent","ranking/rankingbuchholzcomponent","ranking/rankingfinebuchholzcomponent","ranking/rankingsonneborncomponent","ranking/rankingwinscomponent","ranking/rankingheadtoheadcomponent","ranking/rankingtaccomponent","ranking/rankingvotescomponent","ranking/rankingnumgamescomponent","ranking/rankingkocomponent"],function(){var e,t,n,i;for(e={},i={},t=0;t<arguments.length;t+=1)n=arguments[t],i[n.NAME.toLowerCase()]=n;return e.createComponentChain=function(e,t){var n;if(n=void 0,t=t.slice(0),t.reverse(),t.every(function(t){t=t.toLowerCase();var r=i[t];return void 0===r?(console.error("RankingComponentIndex.createComponentChain error: undefined component name: "+t),!1):(n=new r(e,n),!0)}))return n},e.components=Object.keys(i).sort(),e}),define("ranking/rankingdatalistener",["lib/extend","core/listener"],function(e,t){function n(e,t){var i;if(n.superconstructor.call(this),i=this.constructor,this.ranking=e,t.length!==e.length&&t.resize(e.length),void 0!==e[i.NAME])throw new Error("ranking field already exists: "+i.NAME);e[i.NAME]=t,this[i.NAME]=t,i.DEPENDENCIES&&i.DEPENDENCIES.forEach(function(t){this[t]=e[t],void 0===this[t]&&console.warn("ranking dependency not found: "+t)},this),e.registerListener(this)}return e(n,t),n.prototype.isPrimary=function(){return this.onbye!==n.prototype.onbye||this.onresult!==n.prototype.onresult},n.NAME="undefined",n.DEPENDENCIES=[],n.prototype.destroy=function(){n.superclass.destroy.call(this),delete this.ranking[this.constructor.NAME]},n.prototype.onresult=function(e,t,n){},n.prototype.onbye=function(e,t,n){},n.prototype.oncorrect=function(e,t,n){},n.prototype.onrecalc=function(){},n.prototype.onreset=function(){this[this.constructor.NAME].fill(0)},n.prototype.onresize=function(e){var t=this[this.constructor.NAME];t&&t.resize&&this[this.constructor.NAME].resize(e.length)},n}),define("core/rle",["core/type"],function(e){function t(n){return!!e.isArray(n)&&n.every(t)}var n={};return n.encode=function(i){var r,o,s,a,u;switch(e(i)){case"array":break;case"number":return i.toString();default:throw new Error("RLE encoding failed: cannot parse content of type "+e(i))}for(s="",o=-1,r=0;r<i.length;r+=1){if(a=i[r],u=null!==a&&void 0!==a&&0!==a,u=u&&!t(a),o>-1){if(!u)continue;0===o?s="[":s+=",",s+=r-o===1?"n":"n"+(r-o),o=-1}if(u){s+=0!==r?",":"[";try{s+=n.encode(a)}catch(e){console.error(e),s+=void 0}o=-1}else o=r}return o!==-1&&(0===s.length?s="[":s+=",",s+="n"+(r-o)),s.length&&(s+="]"),s},n.decode=function(t){var n,i,r,o,s,a,u,l;if("string"!==e(t))return void console.error('RLE.decode: input is no string, but of type "'+e(t)+"'");if(0===t.length)return[];for(i=[],o="",n=void 0,a=!1,u=0,r=0;r<t.length;++r)switch(s=t[r]){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":case"e":case".":o+=s;break;case"n":if(a)return void console.error('unexpected sequence of multiple "n" characters in RLE.decode input');a=!0;break;case"[":l=[],i.length>0&&(n[n.length+u]=l),u=0,i.push(l),n=i[i.length-1];break;case",":if(0===o.length)a&&(u+=1);else{if(o=Number(o),isNaN(o))return void console.error("invalid number or character sequence in RLE.decode input");a?u+=o:(n[n.length+u]=o,u=0)}a=!1,o="";break;case"]":if(a)o=Number(o),u+=o,u>0&&(n[n.length+u-1]=void 0),u=0;else if(0===o.length);else{if(o=Number(o),isNaN(o))return void console.error("invalid number or character sequence in RLE.decode input");n[n.length+u]=o,u=0}if(1===i.length)return r===t.length-1?n:void console.error('unbalanced closing "]" in RLE input');i.pop(),n=i[i.length-1],0===n[n.length-1].length&&(n[n.length-1]=void 0),o="",a=!1;break;default:return void console.error('RLE decode: unexpected character "'+s+'" in sparse array blob')}console.error("unexpected end of input. Unbalanced brackets")},n}),define("math/vectormodel",["lib/extend","list/listmodel","core/type","core/rle"],function(e,t,n,i){function r(e){r.superconstructor.call(this),this.resize(e)}return e(r,t),r.prototype.resize=function(e){for((void 0===e||e<0)&&(e=0);this.length>e;)this.pop();for(;this.length<e;)this.push(0)},r.prototype.fill=function(e){var t;for(e=e||0,t=0;t<this.length;t+=1)this.set(t,e)},r.prototype.sum=function(){return this.list.reduce(function(e,t){return e+t})},r.prototype.mult=function(e,t){var i;if(n.isNumber(t))throw new Error("VectorModel.prototype.mult: second argument must be undefined or a VectorModel instance: "+t);if(t=t||this,n.isNumber(e))for(this.resize(t.length),i=0;i<this.length;i+=1)this.set(i,t.get(i)*e);else{if(e.length!==t.length)return void console.error("VectorModel.setProduct: different input lengths: "+e.length+"<>"+t.length);for(this.resize(t.length),i=0;i<this.length;i+=1)this.set(i,e.get(i)*t.get(i))}return this},r.prototype.dot=function(e){var t,n;if(this.length!==e.length)return void console.error("VectorModel.dot: different input lengths: "+this.length+"<>"+e.length);for(n=0,t=0;t<this.length;t+=1)n+=this.get(t)*e.get(t);return n},r.prototype.add=function(e,t){var n;if(t=t||this,e.length!==t.length)return void console.error("VectorModel.prototype.add: different input lengths: "+e.length+"<>"+t.length);for(this.resize(e.length),n=0;n<this.length;n+=1)this.set(n,e.get(n)+t.get(n));return this},r.prototype.save=function(){var e=r.superclass.save.call(this);return e=i.encode(e)},r.prototype.restore=function(e){var t;try{e=i.decode(e)}catch(e){return console.error(e),!1}if(!r.superclass.restore.call(this,e))return!1;for(;(t=this.indexOf(void 0))!==-1;)this.set(t,0);return!0},r.prototype.SAVEFORMAT=Object.create(r.superclass.SAVEFORMAT),r.prototype.SAVEFORMAT.v=[Number],r}),define("ui/optionstemplate",[],function(){var e,t,n;return n=void 0,t={},e={},e.toBlob=function(){return JSON.stringify(e)},e.fromBlob=function(n){var i,r;i=JSON.parse(n);for(r in e)"function"!=typeof e[r]&&delete e[r];for(r in t)e[r]=t[r];for(r in i)e[r]=i[r]},e.setDefault=function(e){t=e},e.reset=function(){e.fromBlob(JSON.stringify(t))},e.reset(),e}),define("options",["ui/optionstemplate"],function(e){var t;return t={minpoints:0,maxpoints:15,byepointswon:13,byepointslost:7,defaultscore:0,tiesforbidden:!1,maxpointtiesforbidden:!0},e.setDefault(t),e.reset(),e}),define("ranking/rankinglostpointslistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel","options"],function(e,t,n,i){function r(e){r.superconstructor.call(this,e,new n)}return e(r,t),r.NAME="lostpoints",r.DEPENDENCIES=void 0,r.prototype.onresult=function(e,t,n){n.teams.forEach(function(e,t){n.teams.forEach(function(i){i!==e&&this.lostpoints.set(i,this.lostpoints.get(i)-n.score[t])},this)},this)},r.prototype.onbye=function(e,t,n){n.forEach(function(e){this.lostpoints.set(e,this.lostpoints.get(e)-i.byepointslost)},this)},r.prototype.oncorrect=function(e,t,n){n.before.teams.forEach(function(e,t){n.before.teams.forEach(function(i){i!==e&&this.lostpoints.set(i,this.lostpoints.get(i)+n.before.score[t])},this)},this),this.onresult(e,t,n.after)},r}),define("ranking/rankingpointslistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel","options"],function(e,t,n,i){function r(e){r.superconstructor.call(this,e,new n)}return e(r,t),r.NAME="points",r.DEPENDENCIES=void 0,r.prototype.onresult=function(e,t,n){n.teams.forEach(function(e,t){this.points.set(e,this.points.get(e)+n.score[t])},this)},r.prototype.onbye=function(e,t,n){n.forEach(function(e){this.points.set(e,this.points.get(e)+i.byepointswon)},this)},r.prototype.oncorrect=function(e,t,n){n.before.teams.forEach(function(e,t){this.points.set(e,this.points.get(e)-n.before.score[t])},this),this.onresult(e,t,n.after)},r}),define("ranking/rankingsaldolistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="saldo",i.DEPENDENCIES=["points","lostpoints"],i.prototype.onrecalc=function(){this.saldo.add(this.points,this.lostpoints)},i}),define("ranking/rankingupvoteslistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.prototype.isPrimary=function(){return!0},i.NAME="upvotes",i.DEPENDENCIES=void 0,i}),define("ranking/rankingdownvoteslistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.prototype.isPrimary=function(){return!0},i.NAME="downvotes",i.DEPENDENCIES=void 0,i}),define("ranking/rankingvoteslistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="votes",i.DEPENDENCIES=["upvotes","downvotes","byes"],i.prototype.onrecalc=function(){this.votes.map(function(e,t){var n,i;for(i="",n=0;n<this.byes.get(t);n+=1)i+="∅";for(n=0;n<this.upvotes.get(t);n+=1)i+="▲";for(n=0;n<this.downvotes.get(t);n+=1)i+="▼";this.votes.set(t,i)},this)},i}),define("ranking/rankingbyelistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="byes",i.DEPENDENCIES=void 0,i.prototype.onbye=function(e,t,n){n.forEach(function(e){this.byes.set(e,this.byes.get(e)+1)},this)},i}),define("ranking/rankingwinslistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){var t,n;return t=void 0,n=void 0,e.teams.forEach(function(i,r){var o;o=e.score[r],void 0===n||o>n?(t=i,n=o):o===n&&(t=void 0)},this),t}function r(e){r.superconstructor.call(this,e,new n)}return e(r,t),r.NAME="wins",r.DEPENDENCIES=void 0,r.prototype.onresult=function(e,t,n){var r=i(n);void 0!==r&&this.wins.set(r,this.wins.get(r)+1)},r.prototype.onbye=function(e,t,n){n.forEach(function(e){this.wins.set(e,this.wins.get(e)+1)},this)},r.prototype.oncorrect=function(e,t,n){var r=i(n.before);void 0!==r&&this.wins.set(r,this.wins.get(r)-1),this.onresult(e,t,n.after)},r}),define("math/matrixmodel",["lib/extend","core/model","core/rle"],function(e,t,n){function i(e){return i.superconstructor.call(this),this.data=[],this.length=Math.max(0,e||0),this}return e(i,t),i.prototype.EVENTS={resize:!0},i.prototype.remove=function(e){return e>=this.length||e<0?this:(this.data.splice(e,1),this.data.forEach(function(t){t.splice(e,1)}),this.length-=1,this.emit("resize"),this)},i.prototype.resize=function(e){if(void 0!==e)return e<0&&(e=0),this.length>e&&(this.data.splice(e),this.data.forEach(function(t){t.splice(e)})),this.length=e,this.emit("resize"),this},i.prototype.get=function(e,t){return Math.min(e,t)<0||Math.max(e,t)>=this.length?void console.warn("MatrixModel.get(): out of bounds"):this.data[e]?this.data[e][t]||0:0},i.prototype.set=function(e,t,n){var i;return Math.min(e,t)<0||Math.max(e,t)>=this.length?void console.warn("MatrixModel.set(): out of bounds"):(i=this.data[e],n?(i||(i=this.data[e]=[]),i[t]=n):i&&delete i[t],this)},i.prototype.diagonal=function(e){var t;for(e.resize(this.length),t=0;t<e.length;t+=1)e.set(t,this.get(t,t));return e},i.prototype.multVector=function(e,t){var n,i,r;if(t.length!==this.length)return void console.warn("MatrixModel.multVector: different input lengths: "+this.length+"<>"+t.length);for(e.resize(t.length),n=0;n<e.length;n+=1){for(r=0,i=0;i<e.length;i+=1)r+=this.get(n,i)*t.get(i);e.set(n,r)}return e},i.prototype.vectorMult=function(e,t){var n,i,r;if(t.length!==this.length)return void console.warn("MatrixModel.multVector: different input lengths: "+this.length+"<>"+t.length);for(e.resize(t.length),i=0;i<e.length;i+=1){for(r=0,n=0;n<e.length;n+=1)r+=this.get(n,i)*t.get(n);e.set(i,r)}return e},i.prototype.fill=function(e){var t,n;if(e=e||0,0===e)this.data.splice(0);else for(t=0;t<this.length;t+=1)for(n=0;n<this.length;n+=1)this.set(t,n,e)},i.prototype.save=function(){
var e,t;return e=i.superclass.save.call(this),t=this.data.map(function(e){return e.map(function(e){return e||0})},this),e.mat=n.encode(t),e.len=this.length,e},i.prototype.restore=function(e){var t;return!!i.superclass.restore.call(this,e)&&(this.resize(0),t=n.decode(e.mat),t.forEach(function(e,t){this.data[t]=e.slice()},this),this.resize(e.len),!0)},i.prototype.SAVEFORMAT=Object.create(i.superclass.SAVEFORMAT),i.prototype.SAVEFORMAT.mat=String,i.prototype.SAVEFORMAT.len=Number,i}),define("math/delegatematrix",["lib/extend","math/matrixmodel"],function(e,t){function n(e){if(n.superconstructor.call(this,e.length),!e)throw new Error("DelegateMatrix(): no input matrix: "+e);this.data=e.data,this.superget=e.get,e.registerListener(this)}return e(n,t),n.prototype.get=function(e,t){return this.superget(e,t)},n.prototype.remove=void 0,n.prototype.set=void 0,n.prototype.fill=void 0,n.prototype.resize=void 0,n.prototype.onresize=function(e){this.length=e.length,this.emit("resize")},n}),define("math/transposesummatrix",["lib/extend","math/delegatematrix"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.get=function(e,t){var n,i;if(n=this.superget(e,t),i=this.superget(t,e),void 0!==n&&void 0!==i)return n+i},n}),define("ranking/rankinggamematrixlistener",["lib/extend","ranking/rankingdatalistener","math/transposesummatrix"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n(e.winsmatrix))}return e(i,t),i.NAME="gamematrix",i.DEPENDENCIES=["winsmatrix"],i}),define("ranking/rankingbuchholzlistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="buchholz",i.DEPENDENCIES=["gamematrix","wins"],i.prototype.onrecalc=function(){this.gamematrix.multVector(this.buchholz,this.wins)},i}),define("ranking/rankingfinebuchholzlistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="finebuchholz",i.DEPENDENCIES=["gamematrix","buchholz"],i.prototype.onrecalc=function(){this.gamematrix.multVector(this.finebuchholz,this.buchholz)},i}),define("ranking/rankingwinsmatrixlistener",["lib/extend","ranking/rankingdatalistener","math/matrixmodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="winsmatrix",i.prototype.onresult=function(e,t,n){var i,r,o;i=void 0,r=!1,n.score.forEach(function(e){e>i||void 0===i?(i=e,r=!1):e===i&&(r=!0)},this),o=r?.5:1,n.score.forEach(function(e,t){var r;e===i&&(r=n.teams[t],n.teams.forEach(function(e){var t;r!==e&&(t=this.winsmatrix.get(r,e)+o,this.winsmatrix.set(r,e,t))},this))},this)},i.prototype.oncorrect=function(e,t,n){var i,r,o;i=void 0,r=!1,n.before.score.forEach(function(e){e>i||void 0===i?(i=e,r=!1):e===i&&(r=!0)},this),o=r?.5:1,n.before.score.forEach(function(e,t){var r;e===i&&(r=n.before.teams[t],n.before.teams.forEach(function(e){var t;r!==e&&(t=this.winsmatrix.get(r,e)-o,this.winsmatrix.set(r,e,t))},this))},this),this.onresult(e,t,n.after)},i}),define("ranking/rankingtaclistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel","options"],function(e,t,n,i){function r(e){return e<0?-1:e>0?1:0===e?0:NaN}function o(e){o.superconstructor.call(this,e,new n)}var s;return s=12,e(o,t),o.NAME="tac",o.prototype.onresult=function(e,t,n){var o,a,u,l;if(2!==n.teams.length)throw new Error("TAC ranking requires exactly two teams in a result");switch(u=n.score[0]-n.score[1],r(u)){case-1:o=1,a=0,u=-u;break;case 1:o=0,a=1;break;case 0:o=0,a=0;break;default:return void console.error("TAC ranking does not accept draws")}n.score[o]>=i.maxpoints&&o!==a?(l=this.tac.get(n.teams[o])+s+u,this.tac.set(n.teams[o],l),l=this.tac.get(n.teams[a])+n.score[a],0===n.score[a]&&(l+=1),this.tac.set(n.teams[a],l)):(l=this.tac.get(n.teams[0])+n.score[0],this.tac.set(n.teams[0],l),l=this.tac.get(n.teams[1])+n.score[1],this.tac.set(n.teams[1],l))},o.prototype.onbye=function(e,t,n){n.forEach(function(e){var t=this.tac.get(e)+i.byepointswon-i.byepointslost+12;this.tac.set(e,t)},this)},o.prototype.oncorrect=function(e,t,n){var o,a,u,l;if(2!==n.before.teams.length)throw new Error("TAC ranking requires exactly two teams in a result");switch(u=n.before.score[0]-n.before.score[1],r(u)){case-1:o=1,a=0,u=-u;break;case 1:o=0,a=1;break;case 0:o=0,a=0;break;default:return void console.error("TAC ranking does not accept draws")}n.before.score[o]>=i.maxpoints&&o!==a?(l=this.tac.get(n.before.teams[o])-s-u,this.tac.set(n.before.teams[o],l),l=this.tac.get(n.before.teams[a])-n.before.score[a],0===n.before.score[a]&&(l-=1),this.tac.set(n.before.teams[a],l)):(l=this.tac.get(n.before.teams[0])-n.before.score[0],this.tac.set(n.before.teams[0],l),l=this.tac.get(n.before.teams[1])-n.before.score[1],this.tac.set(n.before.teams[1],l)),this.onresult(e,t,n.after)},o}),define("ranking/rankingsonnebornlistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="sonneborn",i.DEPENDENCIES=["winsmatrix","wins"],i.prototype.onrecalc=function(){this.winsmatrix.multVector(this.sonneborn,this.wins)},i}),define("ranking/rankingheadtoheadlistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel","ranking/rankingheadtoheadcomponent"],function(e,t,n,i){function r(e){r.superconstructor.call(this,e,new n)}return e(r,t),r.NAME="headtohead",r.DEPENDENCIES=["winsmatrix"],r.prototype.createDummyRanking=function(){var e,t,n;return e=this.ranking.componentnames.slice(0),e.splice(e.indexOf(i.NAME)),n=require("ranking/rankingmodel"),t=new n(e,this.ranking.length),Object.keys(this.ranking.dataListeners).forEach(function(e){t[e]&&(t[e]=this.ranking[e])},this),t},r.prototype.getGroups=function(e){var t=[];return e.ranks.forEach(function(e,n){void 0===t[e]&&(t[e]=[]),t[e].push(n)}),t},r.prototype.calculatePoints=function(e){this.headtohead.fill(0),e.forEach(function(e){e.forEach(function(t){var n=this.headtohead.get(t);e.forEach(function(e){n+=this.winsmatrix.get(t,e)},this),this.headtohead.set(t,n)},this)},this)},r.prototype.onrecalc=function(){var e,t,n;e=this.createDummyRanking(),t=e.getNoRecalc(),n=this.getGroups(t),this.calculatePoints(n)},r}),define("ranking/rankingnumgameslistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){i.superconstructor.call(this,e,new n)}return e(i,t),i.NAME="numgames",i.DEPENDENCIES=void 0,i.prototype.onresult=function(e,t,n){n.teams.forEach(function(e){this.numgames.set(e,this.numgames.get(e)+1)},this)},i.prototype.onbye=function(e,t,n){n.forEach(function(e){this.numgames.set(e,this.numgames.get(e)+1)},this)},i.prototype.oncorrect=function(e,t,n){n.before.teams.forEach(function(e){this.numgames.set(e,this.numgames.get(e)-1)},this),this.onresult(e,t,n.after)},i}),define("ranking/rankingkolistener",["lib/extend","ranking/rankingdatalistener","math/vectormodel"],function(e,t,n){function i(e){var t,n;return t=void 0,n=void 0,e.teams.forEach(function(i,r){var o;o=e.score[r],void 0===n||o<n?(t=i,n=o):o===n&&(t=void 0)},this),t}function r(e){var t,n;return t=void 0,n=void 0,e.teams.forEach(function(i,r){var o;o=e.score[r],void 0===n||o>n?(t=i,n=o):o===n&&(t=void 0)},this),t}function o(e){return-2*e.getGroup()}function s(e){var t=e.getGroup(),n=e.getID();return u=u||require("tournament/kotournamentmodel"),n<=1?-2*t-1:-2*u.loserGroupID(t,n)}function a(e){a.superconstructor.call(this,e,new n)}var u;return e(a,t),a.NAME="ko",a.DEPENDENCIES=void 0,a.prototype.onresult=function(e,t,n){this.ko.set(i(n),s(n)),this.ko.set(r(n),o(n))},a.prototype.oncorrect=function(e,t,n){var a,u,l,c;a=r(n.before),u=i(n.before),l=o(n.before),c=s(n.before),this.ko.get(a)===l&&this.ko.get(u)===c&&this.onresult(e,t,n.after)},a}),define("ranking/rankingdatalistenerindex",["ranking/rankinglostpointslistener","ranking/rankingpointslistener","ranking/rankingsaldolistener","ranking/rankingupvoteslistener","ranking/rankingdownvoteslistener","ranking/rankingvoteslistener","ranking/rankingbyelistener","ranking/rankingwinslistener","ranking/rankinggamematrixlistener","ranking/rankingbuchholzlistener","ranking/rankingfinebuchholzlistener","ranking/rankingwinsmatrixlistener","ranking/rankingtaclistener","ranking/rankingsonnebornlistener","ranking/rankingheadtoheadlistener","ranking/rankingnumgameslistener","ranking/rankingkolistener"],function(){function e(e){return u[e]}function t(t){var n=e(t);return n?e(t).DEPENDENCIES:void console.warn("DataListener is undefined: "+t)}function n(e,t){return!e||!!t&&e.every(function(e){return t.indexOf(e)!==-1})}function i(e){var n,i;for(n=0;n<e.length;n+=1)i=t(e[n]),i&&i.forEach(function(t){e.indexOf(t)===-1&&e.push(t)})}function r(e){var t;for(t=e.length-1;t>=0;t-=1)e.indexOf(e[t])<t&&e.splice(t,1)}function o(e,i){var r;return r=[],e.forEach(function(e,o){n(t(e),i)&&(r.push(o),i.push(e))}),r.reverse(),r.forEach(function(t){e.splice(t,1)}),r.length>0}function s(e){var t;for(t=e.splice(0).reverse(),i(t),r(t);o(t,e););return!(t.length>0)||(console.error("dependencies could not be resolved: ["+t.join(",")+"]"),e.splice(0),!1)}function a(t){var n;for(n=t.length-1;n>=0;n-=1)void 0!==e(t[n])&&t.splice(n,1)}var u;return u=function(e){var t,n,i;for(t={},n=0;n<e.length;n+=1)i=e[n],t[i.NAME.toLowerCase()]=i;return t}(arguments),u.registerDataListeners=function(t,n){var i;if(n&&s(n))return i=n.map(function(t){return e(t)}),i.indexOf(void 0)>=0?(a(n),void console.error("data listener is undefined: "+n.join(", "))):i.map(function(e){return new e(t)})},u}),define("ranking/rankingmodel",["lib/extend","core/model","ranking/rankingcomponentindex","core/type","ranking/rankingdatalistenerindex"],function(e,t,n,i,r){function o(){var e;for(e=[];e.length<this.length;)e.push(e.length);return e}function s(e){var t,n;return t=e.slice(0),n=this.componentchain,t.sort(function(e,t){return n.compare(e,t)||e-t},this),t}function a(e){var t;return t=new Array(this.length),e.forEach(function(n,i){0===i?t[n]=0:this.componentchain.compare(e[i-1],n)<0?t[n]=i:t[n]=t[e[i-1]]},this),t}function u(e){var t,n;e||this.emit("recalc"),t={components:this.componentnames},t.ids=o.call(this),t.displayOrder=s.call(this,t.ids),t.ranks=a.call(this,t.displayOrder),void 0!==this.componentchain&&(n=this.componentchain.getValues(),n.forEach(function(e,n){var i;void 0!==e&&(i=this.componentnames[n],t[i]=e)},this)),this.ranking=t}function l(e,t,n){l.superconstructor.call(this),e=e||[],t=t||0,this.ranking=void 0,this.componentnames=[],this.componentchain=void 0,this.length=0,this.extDeps=[],this.dataListeners={},this.init(e,t,n)}return e(l,t),l.prototype.EVENTS={result:!0,bye:!0,correct:!0,recalc:!0,update:!0,reset:!0,resize:!0},l.prototype.init=function(e,t,i){var o,s;return!this.componentchain&&0===this.componentnames.length&&0===Object.keys(this.dataListeners).length&&(this.componentnames=e.slice(0),this.componentchain=n.createComponentChain(this,e),o=this.componentchain?this.componentchain.dependencies:[],i&&(this.extDeps.push.apply(this.extDeps,i),o.push.apply(o,this.extDeps)),s=r.registerDataListeners(this,o),s&&e&&e.length>0&&(s.forEach(function(e,t){this.dataListeners[o[t]]=e},this),this.resize(t)),!0)},l.prototype.reset=function(){Object.keys(this.dataListeners).forEach(function(e){this.dataListeners[e].destroy()},this),l.call(this),this.emit("reset"),this.invalidate()},l.prototype.result=function(e){this.emit("result",e),this.invalidate()},l.prototype.bye=function(e){i.isNumber(e)&&(e=[e]),this.emit("bye",e),this.invalidate()},l.prototype.correct=function(e){this.emit("correct",e),this.invalidate()},l.prototype.invalidate=function(){this.ranking=void 0,this.emit("update")},l.prototype.get=function(){return void 0===this.ranking&&u.call(this),this.ranking},l.prototype.getNoRecalc=function(){return u.call(this,!0),this.ranking},l.prototype.resize=function(e){return e===this.length||(e>=0?(this.length=e,this.emit("resize"),this.invalidate(),!0):(console.error("RankingModel.resize: invalid size: "+e),!1))},l.prototype.save=function(){var e=l.superclass.save.call(this);if(e.len=this.length,e.comps=this.componentnames.slice(0),e.edep=this.extDeps.slice(0),e.vals={},Object.keys(this.dataListeners).every(function(t){var n;if(n=this.dataListeners[t],n.isPrimary(n)){if(!this[t]||!i.isFunction(this[t].save))return console.error("datalistener cannot be saved: "+t),!1;e.vals[t]=this[t].save()}return!0},this))return e},l.prototype.restore=function(e){return!!l.superclass.restore.call(this,e)&&(this.reset(),this.init(e.comps,e.len,e.edep)&&Object.keys(e.vals).every(function(t){return!!(this[t]&&this[t].restore&&this[t].restore(e.vals[t]))||(console.error("RankingModel.restore(): cannot restore listener "+t),!1)},this)?(this.invalidate(),!0):(this.reset(),!1))},l.prototype.SAVEFORMAT=Object.create(l.superclass.SAVEFORMAT),l.prototype.SAVEFORMAT.len=Number,l.prototype.SAVEFORMAT.comps=[String],l.prototype.SAVEFORMAT.edep=[String],l.prototype.SAVEFORMAT.vals=Object,l}),define("list/referencelistmodel",["lib/extend","list/listmodel"],function(e,t){function n(e,t,i){n.superconstructor.call(this),this.makeReadonly(),this.matches=e,this.teams=t,this.ReferenceModel=i,this.matches.map(function(e,t){n.insertMatch(this,t)},this),this.matches.registerListener(this)}return e(n,t),n.insertMatch=function(e,n){var i;i=new e.ReferenceModel(e.matches.get(n),e.teams),t.prototype.insert.call(e,n,i)},n.removeMatch=function(e,n){t.prototype.remove.call(e,n)},n.prototype.oninsert=function(e,t,i){e===this.matches&&n.insertMatch(this,i.id)},n.prototype.onremove=function(e,t,i){e===this.matches&&n.removeMatch(this,i.id)},n.prototype.onreset=function(e,t,n){e===this.matches&&this.emit(t,n)},n}),define("list/maplistmodel",["lib/extend","list/listmodel"],function(e,t){function n(e,t){n.superconstructor.call(this),this.makeReadonly(),this.indices=e,this.map=t,this.indices.map(function(e,t){n.insertID(this,t)},this),this.indices.registerListener(this)}return e(n,t),n.insertID=function(e,n){var i;i=e.map.get(e.indices.get(n)),t.prototype.insert.call(e,n,i)},n.removeID=function(e,n){t.prototype.remove.call(e,n)},n.prototype.oninsert=function(e,t,i){e===this.indices&&n.insertID(this,i.id)},n.prototype.onremove=function(e,t,i){e===this.indices&&n.removeID(this,i.id)},n.prototype.onreset=function(e,t,n){e===this.indices&&this.emit(t,n)},n}),define("list/readonlylistmodel",["lib/extend","core/model","list/listmodel"],function(e,t,n){function i(e){i.superconstructor.call(this),this.list=e,this.length=this.list.length,this.list.registerListener(this)}return e(i,t),i.prototype.EVENTS=n.prototype.EVENTS,i.prototype.get=function(){return this.list.get.apply(this.list,arguments)},i.prototype.indexOf=function(){return this.list.indexOf.apply(this.list,arguments)},i.prototype.map=function(){return this.list.map.apply(this,arguments)},i.prototype.asArray=function(){return this.list.asArray.apply(this.list,arguments)},i.prototype.updateLength=function(){this.length=this.list.length},i.prototype.oninsert=function(e,t,n){this.emit(t,n)},i.prototype.onremove=function(e,t,n){this.emit(t,n)},i.prototype.onreset=function(e,t,n){this.emit(t,n)},i.prototype.onresize=function(e,t,n){this.updateLength(),this.emit(t,n)},i}),define("core/correctionmodel",["lib/extend","core/model","core/matchresult"],function(e,t,n){function i(e,t){if(i.superconstructor.call(this),void 0===e)this.before=new n;else{if(!(e instanceof n))throw new Error("CorrectionModel: oldResult is not a MatchResult!");this.before=e}if(void 0===t)this.after=new n;else{if(!(t instanceof n))throw new Error("CorrectionModel: newResult is not a MatchResult!");this.after=t}}return e(i,t),i.prototype.EVENTS={},i.prototype.save=function(){var e=i.superclass.save.call(this);return e.b=this.before.save(),e.a=this.after.save(),e},i.prototype.restore=function(e){return!!i.superclass.restore.call(this,e)&&(!!this.before.restore(e.b)&&!!this.after.restore(e.a))},i.prototype.SAVEFORMAT=Object.create(i.superclass.SAVEFORMAT),i.prototype.SAVEFORMAT.a=Object,i.prototype.SAVEFORMAT.b=Object,i}),define("core/matchreferencemodel",["lib/extend","core/matchmodel"],function(e,t){function n(e,t){var i;i=t?e.teams.map(function(e){return t.get(e)}):e.teams.slice(),n.superconstructor.call(this,i,e.id,e.group),this.match=e,e.registerListener(this)}return e(n,t),n.prototype.finish=function(e){if(void 0!==this.match.finish(e))return!0},n.prototype.onfinish=function(){this.match.unregisterListener(this),this.emit("finish")},n}),define("core/resultreferencemodel",["lib/extend","core/matchresult","core/matchreferencemodel"],function(e,t,n){function i(e,r){var o;e instanceof t?(o=new n(e,r),i.superconstructor.call(this,o,e.score),this.result=e):(n.call(this,e,r),this.finish=n.prototype.finish)}return e(i,t),i}),define("core/correctionreferencemodel",["lib/extend","core/correctionmodel","core/resultreferencemodel"],function(e,t,n){function i(e,t){i.superconstructor.call(this,new n(e.before,t),new n(e.after,t)),this.correction=e}return e(i,t),i}),define("list/sortedreferencelistmodel",["lib/extend","list/listmodel"],function(e,t){function n(e,t,i){if(n.superconstructor.call(this),this.makeReadonly(),void 0===e)throw new Error("SortedReferenceListModel: list argument is missing");void 0===t&&(t=n.ascending),this.refList=e,this.sortFunction=t,this.unique=i||!1,e.map(function(e){n.insertElement(this,e)},this),e.registerListener(this)}return e(n,t),n.prototype.oninsert=function(e,t,i){e===this.refList&&n.insertElement(this,i.object)},n.prototype.onremove=function(e,t,i){e===this.refList&&n.removeElement(this,i.object)},n.ascending=function(e,t){switch(!0){case e>t:return 1;case e<t:return-1;default:return 0}},n.descending=function(e,t){return-n.ascending(e,t)},n.insertElement=function(e,t){var i=n.findPosition(e,t);e.unique&&0!==i&&0===e.sortFunction(e.get(i-1),t)||n.superclass.insert.call(e,i,t)},n.removeElement=function(e,t){var i=e.indexOf(t);i>=0&&n.superclass.remove.call(e,i)},n.findPosition=function(e,t,i,r){var o,s;return void 0===i&&(i=0),void 0===r&&(r=e.length),i===r?i:(s=i+r>>1,o=e.sortFunction(e.get(s),t),o>0?n.findPosition(e,t,i,s):n.findPosition(e,t,s+1,r))},n}),define("list/combinedreferencelistmodel",["lib/extend","list/listmodel"],function(e,t){function n(e,t){var i;if(n.superconstructor.call(this),this.makeReadonly(),void 0===e)throw new Error("No lists to combine");for(this.refLists=[],this.listOffsets=[],i=0;i<arguments.length;i+=1)this.refLists.push(arguments[i]),this.listOffsets.push(0);this.refLists.map(function(e,t){e.map(function(e,i){n.insertElement(this,t,i)},this),e.registerListener(this)},this)}return e(n,t),n.prototype.oninsert=function(e,t,i){var r=this.refLists.indexOf(e);r!==-1&&n.insertElement(this,r,i.id)},n.prototype.onremove=function(e,t,i){var r=this.refLists.indexOf(e);r!==-1&&n.removeElement(this,r,i.id)},n.insertElement=function(e,t,i){var r=e.findPosition(t,i);r!==-1&&(n.superclass.insert.call(e,r,e.refLists[t].get(i)),e.increaseOffsets(t))},n.removeElement=function(e,t,i){var r=e.findPosition(t,i);r!==-1&&(n.superclass.remove.call(e,r),e.reduceOffsets(t))},n.prototype.findPosition=function(e,t){return this.listOffsets[e]+t},n.prototype.increaseOffsets=function(e){var t;for(t=e+1;t<this.listOffsets.length;t+=1)this.listOffsets[t]+=1},n.prototype.reduceOffsets=function(e){var t;for(t=e+1;t<this.listOffsets.length;t+=1)this.listOffsets[t]-=1},n}),define("core/byeresult",["lib/extend","core/matchresult","core/matchmodel"],function(e,t,n){function i(e,t,r,o){i.superconstructor.call(this,new n([e,e],r,o),t)}return e(i,t),i}),define("tournament/tournamentmodel",["lib/extend","core/propertymodel","list/listmodel","core/uniquelistmodel","ranking/rankingmapper","core/statevaluemodel","core/matchmodel","core/matchresult","ui/listcollectormodel","core/listener","ranking/rankingmodel","list/referencelistmodel","list/maplistmodel","core/valuemodel","list/readonlylistmodel","options","list/indexedmodel","core/correctionmodel","core/matchreferencemodel","core/resultreferencemodel","core/type","core/correctionreferencemodel","list/sortedreferencelistmodel","list/combinedreferencelistmodel","core/byeresult"],function(e,t,n,i,r,o,s,a,u,l,c,d,h,p,f,m,g,v,y,w,b,k,x,q,E){function T(e){var t;T.superconstructor.call(this),g.call(this),e=e||["id"],this.state=new o(N,S),this.teams=new i,this.matches=new n,this.ranking=new c(e,0,this.RANKINGDEPENDENCIES),this.votes=T.initVoteLists(this.VOTES),this.history=new n,this.corrections=new n,this.name=new p(this.SYSTEM),this.singletons={},this.setProperty("addteamrunning",!1),this.setProperty("addteamidle",!1),t=new u(this.matches,s),t.registerListener(this),l.bind(this,"error",function(e,t,n){console.error(n)})}var S,N;return S={initial:["running"],running:["idle","finished"],idle:["running","finished"],finished:[]},N="initial",e(T,t),T.prototype.SYSTEM="undefined",T.prototype.EVENTS={state:!0,error:!0,update:!0},T.prototype.RANKINGDEPENDENCIES=[],T.prototype.VOTES=["bye"],T.initVoteLists=function(e){var t;return t={},e.forEach(function(e){t[e]=new n}),t},T.prototype.checkIdleState=function(){"running"===this.state.get()&&0===this.matches.length&&(Object.keys(this.votes).forEach(function(e){this.votes[e].clear()},this),this.state.set("idle"))},T.prototype.setRankingOrder=function(e){return"initial"!==this.state.get()?void this.emit("error","cannot change ranking order after starting a tournament"):(this.ranking.reset(),this.ranking.init(e||["id"],this.teams.length,this.RANKINGDEPENDENCIES))},T.prototype.addTeam=function(e){switch(this.state.get()){case"initial":break;case"running":if(!this.getProperty("addteamrunning"))return;break;case"idle":if(!this.getProperty("addteamidle"))return;break;case"finished":return void this.emit("error","cannot enter add a team to a finished tournament")}return void 0!==this.teams.push(e)&&(this.ranking.resize(this.teams.length),!0)},T.prototype.getState=function(){return void 0===this.singletons.state&&(this.singletons.state=new p(this.state.get()),this.singletons.state.bind(this.state)),this.singletons.state},T.prototype.getTeams=function(){return void 0===this.singletons.teams&&(this.singletons.teams=new f(this.teams)),this.singletons.teams},T.prototype.getMatches=function(){return void 0===this.singletons.matches&&(this.singletons.matches=new d(new x(this.matches,T.matchCompare),this.teams,y)),this.singletons.matches},T.matchCompare=function(e,t){return e.getGroup()-t.getGroup()||e.getID()-t.getID()},T.prototype.getHistory=function(){return void 0===this.singletons.history&&(this.singletons.history=new d(new x(this.history,T.matchCompare),this.teams,w)),this.singletons.history},T.prototype.getCombinedHistory=function(){return void 0===this.singletons.combinedHistory&&(this.singletons.combinedRawHistory=new q(this.matches,this.history),this.singletons.sortedCombinedRawHistory=new x(this.singletons.combinedRawHistory,T.matchCompare),this.singletons.combinedHistory=new d(this.singletons.sortedCombinedRawHistory,this.teams,w)),this.singletons.combinedHistory},T.prototype.getCorrections=function(){return void 0===this.singletons.corrections&&(this.singletons.corrections=new d(this.corrections,this.teams,k)),this.singletons.corrections},T.prototype.getVotes=function(e){return e&&void 0!==this.votes[e]?(void 0===this.singletons.votes&&(this.singletons.votes={}),void 0===this.singletons.votes[e]&&(this.singletons.votes[e]=new h(this.votes[e],this.teams)),this.singletons.votes[e]):void this.emit("error",'vote type "'+e+'" does not exist for this tournament type')},T.prototype.getName=function(){return void 0===this.singletons.name&&(this.singletons.name=new p,this.singletons.name.bind(this.name),this.name.bind(this.singletons.name)),this.singletons.name},T.prototype.getRanking=function(){return void 0===this.singletons.ranking&&(this.singletons.ranking=new r(this.ranking,this.teams)),this.singletons.ranking},T.prototype.run=function(){switch(this.state.get()){case"initial":if(this.initialMatches())break;return void this.emit("error","initialMatches() failed");case"idle":if(this.idleMatches())break;return void this.emit("error","idleMatches() failed");case"running":return void this.emit("error","tournament is already running");case"finished":return void this.emit("error","tournament is already finished")}if(!(this.matches.length>0))throw new Error("tournament is running, but no games have been created");return this.state.set("running"),!0},T.prototype.finish=function(){switch(this.state.get()){case"idle":return this.state.set("finished"),!0;case"finished":return!0;case"initial":return this.state.set("finished"),!0;case"running":this.emit("error","cannot finish a running tournament")}return!1},T.prototype.onfinish=function(e,t,n){var i;return i=n.source,this.matches.indexOf(i)===-1?void this.emit("error","onfinish: match is not open anymore or does not exist"):this.validateMatchResult(n)?(this.matches.erase(i),this.history.push(n),this.ranking.result(n),this.postprocessMatch(n),void this.checkIdleState()):void this.emit("error","onfinish: match result fails validation test")},T.prototype.validateMatchResult=function(e){var t;return t=e.score.every(function(e){return e>=m.minpoints&&e<=m.maxpoints})},T.prototype.validateCorrection=function(e){return!0},T.prototype.postprocessMatch=function(e){},T.prototype.postprocessCorrection=function(e){},T.prototype.initialMatches=function(){return!(this.teams.length<3)&&(this.matches.push(new s([0,1],1,0)),this.votes.bye.push(2),!0)},T.prototype.idleMatches=function(){return this.matches.push(new s([1,2],1,0)),this.votes.bye.push(0),!0},T.prototype.addBye=function(e,t,n){var i,r;if(1===arguments.length&&b instanceof E)r=e;else{if(!(3===arguments.length&&b.isNumber(e)&&b.isNumber(t)&&b.isNumber(n)))throw console.error(arguments),new Error("addBye isn't provided the correct arguments");i=e,r=new E(i,[m.byepointswon,m.byepointslost],t,n)}return this.votes.bye.push(i),this.ranking.bye(i),this.history.push(r),r},T.prototype.correct=function(e,t){var n,i,r,o;for(o=e;void 0!==o.result;)o.hasReversedTeams&&t.reverse(),o=o.result;return n=this.history.indexOf(o),n===-1?(this.emit("error","correct(): result does not exist in history"),!1):(r=new a(o,t),this.validateMatchResult(r)?(i=new v(o,r),this.validateCorrection(i)?(this.ranking.correct(i),this.corrections.push(i),this.history.set(n,i.after),this.postprocessCorrection(i),!0):(this.emit("error","correction is invalid, although the score is fine"),!1)):(this.emit("error","correction has invalid score"),!1))},T.prototype.save=function(){var e=T.superclass.save.call(this);return e.sys=this.SYSTEM,e.id=this.id,e.name=this.name.get(),e.state=this.state.get(),e.teams=this.teams.asArray(),e.matches=this.matches.save(),e.history=this.history.save(),e.corrections=this.corrections.save(),e.ranking=this.ranking.save(),e.votes={},this.VOTES.forEach(function(t){e.votes[t]=this.votes[t].save()},this),e},T.prototype.restore=function(e){return this.SYSTEM!==e.sys?(this.emit("error","TournamentModel.restore() error: System mismatch"),!1):!!T.superclass.restore.call(this,e)&&(this.id=e.id,this.name.set(e.name||this.SYSTEM),this.state.forceState(e.state)?this.teams.restore(e.teams)?this.matches.restore(e.matches,s)?this.history.restore(e.history,a)?this.corrections.restore(e.corrections,v)?this.ranking.restore(e.ranking)?this.VOTES.every(function(t){return this.votes[t].clear(),e.votes[t]&&this.votes[t].restore(e.votes[t]),!0},this)?(this.checkIdleState(),!0):(this.emit("error","TournamentModel.restore(): cannot restore votes"),!1):(this.emit("error","TournamentModel.restore(): cannot restore ranking"),!1):(this.emit("error","TournamentModel.restore(): cannot restore corrections"),!1):(this.emit("error","TournamentModel.restore(): cannot restore history"),!1):(this.emit("error","TournamentModel.restore(): cannot restore matches"),!1):(this.emit("error","TournamentModel.restore(): cannot restore teams"),!1):(this.emit("error","TournamentModel.restore(): invalid tournament state"),!1))},T.prototype.getID=g.prototype.getID,T.prototype.setID=g.prototype.setID,T.prototype.SAVEFORMAT=Object.create(T.superclass.SAVEFORMAT),T.prototype.SAVEFORMAT.sys=String,T.prototype.SAVEFORMAT.id=Number,T.prototype.SAVEFORMAT.name=String,T.prototype.SAVEFORMAT.state=String,T.prototype.SAVEFORMAT.teams=[Number],T.prototype.SAVEFORMAT.matches=[Object],T.prototype.SAVEFORMAT.history=[Object],T.prototype.SAVEFORMAT.corrections=[Object],T.prototype.SAVEFORMAT.ranking=Object,T.prototype.SAVEFORMAT.votes=Object,T}),define("tournament/roundtournamentmodel",["lib/extend","tournament/tournamentmodel","core/matchmodel","core/byeresult","options","core/type"],function(e,t,n,i,r,o){function s(e){s.superconstructor.call(this,e),this.round=-1}return e(s,t),s.prototype.SYSTEM="round",s.prototype.initialMatches=function(){return this.round=0,!(this.teams.length<2)&&(s.generateSlideSystemMatches.call(this),!0)},s.prototype.idleMatches=function(){return this.round+=1,s.generateSlideSystemMatches.call(this),!0},s.generateSlideSystemMatches=function(){var e,t,i,r;for(e=s.generateSlideList(this.teams.length,this.round),e.length%2&&(i=this.round===e.length-1?e.shift():e.pop(),r=e.length>>1,this.addBye(i,r,this.round)),r=0;e.length>1;)t=e.shift(),i=e.pop(),this.matches.push(new n([t,i],r,this.round)),r+=1},s.generateSlideList=function(e,t){var n,i;if(o.isNumber(e)&&o.isNumber(t)){if(t<=0){for(n=[];n.length<e;)n.push(n.length);return n}return n=s.generateSlideList(e,t-1),i=n.splice(e-1,1)[0],n.splice(1,0,i),n}},s.prototype.postprocessMatch=function(e){0===this.matches.length&&this.round===this.numRounds()-1&&this.state.set("finished")},s.prototype.getRound=function(){return this.round},s.prototype.numRounds=function(){return this.teams.length%2?this.teams.length:this.teams.length-1},s.prototype.save=function(){var e=s.superclass.save.call(this);return e.round=this.round,e},s.prototype.restore=function(e){return!!s.superclass.restore.call(this,e)&&(this.round=e.round,!0)},s.prototype.SAVEFORMAT=Object.create(s.superclass.SAVEFORMAT),s.prototype.SAVEFORMAT.round=Number,s}),define("core/random",[],function(){var e=function(e,t){var n;void 0!==e&&void 0!==t?(this.x=e,this.c=t):(n=new Date,this.x=65535&n.getTime(),this.c=n.getTime()>>16&65535)};return e.prototype.maxInt=65536,e.prototype.nextInt=function(e){return void 0!==e?Math.floor(this.nextDouble()*e):(this.x=65184*this.x+this.c,this.c=this.x>>16,this.x=65535&this.x,this.x)},e.prototype.nextDouble=function(){return this.nextInt()/this.maxInt},e.prototype.pick=function(e){return e[this.nextInt(e.length)]},e.prototype.pickAndRemove=function(e){return e.splice(this.nextInt(e.length),1)[0]},e}),define("presets",["ranking/rankingcomponentindex"],function(e){var t;return t={target:"test",systems:{swiss:{ranking:["wins","buchholz","finebuchholz","saldo"],mode:"wins"},ko:{mode:"matched"},round:{ranking:["wins","sonneborn"]}},ranking:{components:e.components},registration:{minteamsize:1,maxteamsize:3,teamsizeicon:!0},names:{playernameurl:"",dbplayername:"testplayers",apitoken:"apitoken",teamsfile:"tuvero-anmeldungen.txt"}}}),define("tournament/swisstournamentmodel",["lib/extend","tournament/roundtournamentmodel","core/random","core/matchmodel","core/byeresult","options","presets"],function(e,t,n,i,r,o,s){function a(e){a.superconstructor.call(this,e),this.setProperty("swissmode",s.systems.swiss&&s.systems.swiss.mode||a.MODES.ranks),this.setProperty("swissshuffle",!0),this.setProperty("swisstranspose",!1),this.setProperty("byeafterbye",!1),this.setProperty("byeafterup",!0),this.setProperty("byeafterdown",!0),this.setProperty("upafterbye",!0),this.setProperty("upafterup",!1),this.setProperty("upafterdown",!0),this.setProperty("downafterbye",!0),this.setProperty("downafterup",!0),this.setProperty("downafterdown",!1),this.setProperty("enableupdown","wins"===this.getProperty("swissmode"))}var u=new n;return e(a,t),a.prototype.SYSTEM="swiss",
a.prototype.RANKINGDEPENDENCIES=["votes","gamematrix"],a.prototype.VOTES=["bye","up","down"],a.MODES={all:"all",halves:"halves",ranks:"ranks",wins:"wins",individual:"individual",globalteamid:void 0},a.prototype.idleMatches=function(){var e,t,n,r;return r=this.getProperty("swissmode"),void 0===a.MODES[r]?(this.emit("error","invalid mode: "+r),!1):(e=a.getGroups(this.ranking.get(),r),this.getProperty("swissshuffle")===!0&&(e=a.shuffleGroupTeams(e)),this.getProperty("swisstranspose")===!0&&(e=a.transposeGroups(e)),t=[],n={},this.findSwissByesAndMatches(t,n,e)?(this.round+=1,n.ups.forEach(function(e){this.votes.up.push(e),this.ranking.upvotes.set(e,this.ranking.upvotes.get(e)+1)},this),n.downs.forEach(function(e){this.votes.down.push(e),this.ranking.downvotes.set(e,this.ranking.downvotes.get(e)+1)},this),n.byes.forEach(function(e,n){this.addBye(e,t.length+n,this.round)},this),t.forEach(function(e,t){this.matches.push(new i(e,t,this.round))},this),this.ranking.invalidate(),!0):(this.emit("error","cannot find unique byes and matches"),!1))},a.prototype.initialMatches=function(){return this.correctWinGroupRankingOrder(),this.idleMatches()},a.prototype.correctWinGroupRankingOrder=function(){var e,t;e=this.ranking.componentnames,"wins"===this.getProperty("swissmode")&&"wins"!==e[0]&&(t=e.indexOf("wins"),t!==-1&&e.splice(t,1),e.unshift("wins"),this.setRankingOrder(e))},a.transposeGroups=function(e){var t=[];return e.forEach(function(e){e.forEach(function(e,n){void 0===t[n]&&(t[n]=[]),t[n].push(e)})}),t},a.getGroups=function(e,t){var n,i,r,o;switch(o=void 0,t){case a.MODES.all:o=function(e){return 0};break;case a.MODES.halves:o=function(t){return t<e.displayOrder.length>>1};break;case a.MODES.wins:o=function(t){return e.wins[e.displayOrder[t]]};break;case a.MODES.ranks:o=function(t){return e.ranks[t]};break;case a.MODES.individual:o=function(e){return e};break;default:return void console.error("invalid mode")}return i=[],n=[i],r=void 0,e.displayOrder.forEach(function(e,t){var s=o(t);s!==r&&(r=s,i&&i.length&&(i=[],n.push(i))),i.push(e)}),n},a.shuffleGroupTeams=function(e){return e.map(function(e){var t;for(t=[];e.length;)t.push(u.pickAndRemove(e));return t})},a.prototype.findSwissByesAndMatches=function(e,t,n){var i;return t.byes=[],t.ups=[],t.downs=[],!(a.getGroupsTeamCount(n)%2&&(i=n.slice(0).reverse(),!i.some(function(i){return i.slice(0).reverse().some(function(r){var o;return!!this.canGetBye(r)&&(o=i.indexOf(r),i.splice(o,1),this.prefilterSwissMatches(n)&&this.findSwissMatches(e,t,n)?(t.byes.push(r),!0):(i.splice(o,0,r),!1))},this)},this)))&&!!this.findSwissMatches(e,t,n)},a.getGroupsTeamCount=function(e){var t=0;return e.forEach(function(e){t+=e.length}),t},a.prototype.prefilterSwissMatches=function(e){var t=!1;return!(this.getProperty("enableupdown")&&!e.every(function(e){var n=e.length;if(t){if(!e.some(this.canGetUpvote.bind(this)))return!1;t=!1,n-=1}if(n%2!==0){if(!e.some(this.canGetDownvote.bind(this)))return!1;t=!0}return!0},this))},a.prototype.findSwissMatches=function(e,t,n){var i,r,o,s;return i=void 0,!n.some(function(e){return i=e,e.length>0})||!(1===i.length&&this.getProperty("enableupdown")&&!this.canGetDownvote(i[0]))&&(r=i.shift(),o=void 0,s=!1,n.some(function(a){if(0===a.length)return!1;if(this.getProperty("enableupdown")){if(s)return!1;a!==i&&(s=!0)}return a.some(function(i,u){var l,c;if(this.canPlayMatch(r,i,s)){if(l=a,o=i,c=u,s&&(t.downs.push(r),t.ups.push(o)),l.splice(c,1),this.findSwissMatches(e,t,n))return!0;l.splice(c,0,o),s&&(t.downs.pop(),t.ups.pop())}return!1},this)},this)?(e.unshift([r,o]),!0):(i.unshift(r),!1))},a.prototype.hasBye=function(e){return 0!==this.ranking.byes.get(e)},a.prototype.hasUpvote=function(e){return 0!==this.ranking.upvotes.get(e)},a.prototype.hasDownvote=function(e){return 0!==this.ranking.downvotes.get(e)},a.prototype.canGetBye=function(e){return!(!this.getProperty("byeafterbye")&&this.hasBye(e))&&(!(!this.getProperty("byeafterup")&&this.hasUpvote(e))&&!(!this.getProperty("byeafterdown")&&this.hasDownvote(e)))},a.prototype.canGetUpvote=function(e){return!(!this.getProperty("upafterup")&&this.hasUpvote(e))&&(!(!this.getProperty("upafterbye")&&this.hasBye(e))&&!(!this.getProperty("upafterdown")&&this.hasDownvote(e)))},a.prototype.canGetDownvote=function(e){return!(!this.getProperty("downafterdown")&&this.hasDownvote(e))&&(!(!this.getProperty("downafterbye")&&this.hasBye(e))&&!(!this.getProperty("downafterup")&&this.hasUpvote(e)))},a.prototype.canPlayMatch=function(e,t,n){return 0===this.ranking.gamematrix.get(e,t)&&!!(!n||this.canGetDownvote(e)&&this.canGetUpvote(t))},a}),define("tournament/kotournamentmodel",["lib/extend","tournament/tournamentmodel","core/random","core/type","core/matchmodel","core/byeresult","options","presets"],function(e,t,n,i,r,o,s,a){function u(){u.superconstructor.call(this,["ko"]),this.setProperty("komode",a.systems.ko&&a.systems.ko.mode||u.MODES.matched),this.setProperty("komaxgroup",1),this.setProperty("initialbyes",!1)}var l=new n;return e(u,t),u.prototype.SYSTEM="ko",u.MODES={ordered:"ordered",matched:"matched",shuffled:"shuffled"},u.prototype.initialMatches=function(){var e,t,n,a,l,c,d;if(e=this.getProperty("komode"),n=u[e+"Indices"],!i.isFunction(n))return this.emit("error","unknown KO mode: "+e),!1;if(t=n(this.teams.length),l=u.initialRoundForTeams(this.teams.length),l<0)return this.emit("error","not enough players for KO tournament"),!1;for(a=u.firstMatchIDOfRound(l),this.createPlaceholderMatches();t.length>0;)d=t.splice(0,2),void 0===d[1]?(c=new o(d[0],[s.byepointswon,s.byepointslost],a,0),this.checkForFollowupMatches(c),this.getProperty("initialbyes")&&this.history.push(c)):(c=new r(d,a,0),this.matches.push(c)),a+=1;return!0},u.prototype.idleMatches=function(){throw new Error("KO Tournaments cannot be in idle state. This function can never be called by the TournamentModel.")},u.prototype.postprocessMatch=function(e){this.checkForFollowupMatches(e),0===this.matches.length&&this.state.set("finished")},u.prototype.findMatch=function(e,t){var n,i;for(n=0;n<this.matches.length;n+=1)if(i=this.matches.get(n),i.getID()===t&&i.getGroup()===e)return i},u.prototype.findMatchInHistory=function(e,t){var n,i;for(n=0;n<this.history.length;n+=1)if(i=this.history.get(n),i.getID()===t&&i.getGroup()===e)return i},u.prototype.createPlaceholderMatches=function(){var e,t,n,i,o;for(i=Math.min(this.getProperty("komaxgroup"),(this.teams.length-1)/2),e=[];e.length<=i;)e.push(e.length);for(t=e.map(function(e){return u.firstMatchIDOfRound(u.roundsInGroup(e))}),o=e.map(function(){return[]}),this.matches.map(function(e){o[e.getGroup()][e.getID()]=e}),this.history.map(function(e){o[e.getGroup()][e.getID()]=e}),n=u.firstMatchIDOfRound(u.initialRoundForTeams(this.teams.length))-1;n>0;n-=1)t.forEach(function(e,t){n<e&&void 0===o[t][n]&&this.matches.push(new r([void 0,void 0],n,t))},this)},u.prototype.createWaitingMatches=function(){var e,t;e=this.teams.map(function(){}),this.matches.map(function(t){t.teams.forEach(function(n){e[n]=t})}),t=[],e.forEach(function(e,n){var i;void 0===e&&(this.history.map(function(e){e.teams.indexOf(n)!==-1&&(void 0===i||i.getID()<e.getID())&&(i=e)}),t.indexOf(i)===-1&&t.push(i))},this),t.forEach(function(e){this.checkForFollowupMatches(e)},this)},u.prototype.checkForFollowupMatches=function(e){var t,n,i,r,o,s;t=e.getID(),0!==t&&(n=u.nextRoundMatchID(t),i=e.getGroup(),r=u.loserGroupID(i,t),e.isBye()?(o=e.getTeamID(0),s=void 0):e.score[0]<e.score[1]?(o=e.getTeamID(1),s=e.getTeamID(0)):(o=e.getTeamID(0),s=e.getTeamID(1)),this.createFollowupMatch(o,n,i,e),this.createFollowupMatch(s,n,r,e))},u.prototype.createFollowupMatch=function(e,t,n,i){var o,s,a,l,c,d,h;l=i.getID(),c=i.getGroup(),l<=1||n>this.getProperty("komaxgroup")||void 0!==e&&(s=this.findMatch(n,t),s?s.isRunningMatch()?console.warn("trying to overwrite existing match!"):(o=s.getTeamID(0),void 0===o&&(o=s.getTeamID(1)),this.matches.remove(this.matches.indexOf(s)),d=[e,o],u.isSecondInNextRound(l)&&d.reverse(),s=new r(d,t,n),this.matches.push(s)):(a=u.complementaryMatchID(l),h=c,s=this.findMatch(c,a),s||(s=this.findMatchInHistory(c,a)),s&&s.isResult()&&s.isBye()?(s=this.addBye(e,t,n),this.checkForFollowupMatches(s)):void 0===s.getTeamID(0)&&void 0===s.getTeamID(1)&&(s=new r([e,void 0],t,n),this.matches.push(s))))},u.matchedIndices=function(e){var t,n,i,r;if(1===e)t=[0];else if(e>1)for(r=u.ceilPowerOfTwo(e),t=u.matchedIndices(r>>1),n=t.length-1;n>=0;n-=1)i=t[n],i=r-i-1,i>=e&&(i=void 0),t.splice(n+1,0,i);else t=[];return t},u.orderedIndices=function(e){var t,n,i;for(n=u.ceilPowerOfTwo(e),t=[];t.length<e;)t.push(t.length);for(i=t.length;t.length<n;i-=1)t.splice(i,0,void 0);return t},u.shuffledIndices=function(e){var t,n,i,r;for(n=u.ceilPowerOfTwo(e),r=[];r.length<e;)r.push(r.length);for(t=[];r.length>0;)t.push(l.pickAndRemove(r));for(i=t.length;t.length<n;i-=1)t.splice(i,0,void 0);return t},u.ceilPowerOfTwo=function(e){return 1<<Math.ceil(Math.log(e)/Math.LN2)},u.nextRoundMatchID=function(e){return e>>1},u.isSecondInNextRound=function(e){return e%2===1&&1!==e},u.complementaryMatchID=function(e){return 1^e},u.firstMatchIDOfRound=function(e){return 1<<e},u.numMatchesInRound=u.firstMatchIDOfRound,u.roundOfMatchID=function(e){return e<=0&&(e=1),Math.floor(Math.log(e)/Math.LN2)},u.loserGroupID=function(e,t){var n=u.roundOfMatchID(t);return 0===n?e:e+(1<<n-1)},u.parentGroup=function(e){return 0===e?0:e-(1<<u.roundsInGroup(e)-1)},u.initialRoundForTeams=function(e){return e<=0&&(e=1),Math.ceil(Math.log(e)/Math.LN2)-1},u.roundsInGroup=function(e){var t;if(0===e)return 30;for(t=0;t<30&&0===(e&1<<t);t+=1);return t+1},u}),define("tournament/tournamentindex",["core/type","tournament/roundtournamentmodel","tournament/swisstournamentmodel","tournament/kotournamentmodel"],function(e){var t,n,i,r;for(n={},i=1;i<arguments.length;i+=1)r=arguments[i].prototype.SYSTEM,n[r]&&console.error("ERROR: duplicate tournament sys: "+r),n[r]=arguments[i];return t={createTournament:function(i,r){if(e.isString(i)){if(n[i])return new n[i](r)}else if(e.isObject(i))return t.createTournament(i.sys);console.error("TournamentIndex: system not found: "+i)},systems:Object.keys(n).sort()}}),define("tournament/tournamentlistmodel",["lib/extend","list/indexedlistmodel","list/listmodel","core/uniquelistmodel","tournament/tournamentindex","core/listener","core/model"],function(e,t,n,i,r,o,s){function a(){a.superconstructor.call(this),this.startIndex=new n,this.closedTournaments=new i,this.rankingCache=void 0,this.setListeners()}return e(a,t),a.prototype.EVENTS={update:!0,reset:!0,insert:!0,remove:!0,resize:!0},a.prototype.tournamentIDsForEachTeam=function(){var e=[];return this.map(function(t){"finished"!==t.getState().get()&&t.getTeams().map(function(n){e[n]=t.getID()})}),e},a.prototype.invalidateGlobalRanking=function(){this.rankingCache=void 0,this.emit("update")},a.prototype.closeTournament=function(e){return void 0===this.get(e)?(console.error("tournament ID "+e+" is undefined"),!1):this.closedTournaments.push(e)?(this.invalidateGlobalRanking(),!0):(console.error("tournament ID "+e+" is already closed"),!1)},a.prototype.areTournamentsClosed=function(){var e;for(e=[];e.length<this.length;)e.push(!1);return this.closedTournaments.map(function(t){e[t]=!0}),e},a.prototype.getGlobalRanking=function(e){var t,n,i;if(void 0===e||e<0)return void console.error("invalid numTeams parameter");if(this.rankingCache&&this.rankingCache.displayOrder&&this.rankingCache.displayOrder.length===e)return this.rankingCache;for(t=[];t.length<e;)t.push(t.length);return n=t.map(function(){}),i=t.map(function(){return 0}),this.rankingCache={displayOrder:t.slice(0),globalRanks:i.slice(0),tournamentRanks:i.slice(0),tournamentIDs:n.slice(0),tournamentOffsets:this.startIndex.asArray()},this.map(function(e){this.applyTournamentToRanks(e,this.rankingCache)},this),this.calculateGlobalRanks(this.rankingCache),this.rankingCache},a.prototype.applyTournamentToRanks=function(e,t){var n,i,r,o;n=e.getID(),i=e.getRanking().get(),r=this.startIndex.get(n),o=this.closedTournaments.indexOf(n)!==-1,i.displayOrder.map(function(e,s){var a,u,l;a=i.ids[e],u=r+s,l=i.ranks[e],t.displayOrder[u]=a,t.tournamentRanks[a]=l,o?t.tournamentIDs[a]=void 0:t.tournamentIDs[a]=n},this)},a.prototype.calculateGlobalRanks=function(e){var t,n,i;t=void 0,n=0,i=void 0,e.displayOrder.map(function(r,o){var s,a;s=e.tournamentIDs[r],a=e.tournamentRanks[r],void 0!==i&&s===t&&n===a||(i=o,n=a,t=s),e.globalRanks[r]=i})},a.prototype.push=function(e,t){return this.length===this.startIndex.length&&this.startIndex.push(t||0),a.superclass.push.call(this,e)},a.prototype.onupdate=function(e,t,n){this.invalidateGlobalRanking()},a.prototype.setListeners=function(){o.bind(this,"insert",function(e,t,n){e===this&&(n.object.getRanking().registerListener(this),n.object.getState().registerListener(this),this.invalidateGlobalRanking())},this),o.bind(this,"remove",function(e,t,n){e===this&&(n.object.getRanking().unregisterListener(this),n.object.getState().unregisterListener(this),this.invalidateGlobalRanking())},this)},a.prototype.clear=function(){this.isRestoring||(this.startIndex.clear(),this.closedTournaments.clear()),a.superclass.clear.call(this)},a.prototype.save=function(){var e=s.prototype.save.call(this);return e.tournaments=a.superclass.save.call(this),e.startIndex=this.startIndex.save(),e.closedTournaments=this.closedTournaments.save(),e},a.prototype.restore=function(e){return!!s.prototype.restore.call(this,e)&&(this.isRestoring=!0,this.startIndex.restore(e.startIndex)&&this.closedTournaments.restore(e.closedTournaments)?a.superclass.restore.call(this,e.tournaments,r.createTournament)?(delete this.isRestoring,!0):(console.error('TournamentListModel: cannot restore "this"'),!1):(console.error("TournamentListModel: cannot restore closedTournaments"),!1))},a.prototype.SAVEFORMAT={tournaments:[Object],startIndex:[Number],closedTournaments:[Number]},a}),define("ui/playermodel",["lib/extend","core/model"],function(e,t){function n(e){return e.trim().replace(/\s+/g," ")}function i(e){i.superconstructor.call(this),this.name=i.NONAME,this.setName(e)}return e(i,t),i.NONAME="noname",i.prototype.getName=function(){return this.name.slice(0)},i.prototype.setName=function(e){e=n(e||""),e&&e!==this.name&&(this.name=e,this.emit("update"))},i.prototype.SAVEFORMAT=Object.create(i.superclass.SAVEFORMAT),i.prototype.SAVEFORMAT.n=String,i.prototype.save=function(){var e=i.superclass.save.call(this);return e.n=this.name,e},i.prototype.restore=function(e){return!!i.superclass.restore.call(this,e)&&(this.setName(e.n),!0)},i}),define("ui/teammodel",["lib/extend","list/indexedmodel","ui/playermodel"],function(e,t,n){function i(e,t){i.superconstructor.call(this,t),this.setPlayers(e)}return e(i,t),i.prototype.length=0,i.prototype.getPlayer=function(e){if(e>=0&&e<this.length)return this.players[e]},i.prototype.setPlayers=function(e){e=e||[],0===e.length&&e.push(new n),this.length=e.length,this.players=e.slice(0),this.players.forEach(function(e){e.registerListener(this)},this)},i.prototype.getNames=function(){return this.players.map(function(e){return e.getName()})},i.prototype.onupdate=function(e,t){var n;n={id:this.players.indexOf(e)},this.emit("update",n)},i.prototype.SAVEFORMAT=Object.create(i.superclass.SAVEFORMAT),i.prototype.SAVEFORMAT.p=[Object],i.prototype.save=function(){var e=i.superclass.save.call(this);return e.p=this.players.map(function(e){return e.save()}),e},i.prototype.restore=function(e){return!!i.superclass.restore.call(this,e)&&(this.setPlayers(e.p.map(function(e){var t=new n;return t.restore(e),t})),!0)},i}),define("ui/statemodel",["lib/extend","core/model","list/indexedlistmodel","core/valuemodel","ui/listcleanuplistener","tournament/tournamentlistmodel","options","presets","ui/teammodel","core/listener"],function(e,t,n,i,r,o,s,a,u,l){function c(){function e(e,t){return new i(a.taboptions&&void 0!==a.taboptions[e]?!!a.taboptions[e]:t)}c.superconstructor.call(this),this.teams=new n,this.teamsize=new i(3),this.tournaments=new o,this.tabOptions={showNames:e("shownames",!0),nameMaxWidth:e("namemaxwidth",!0),teamTable:e("teamtable",!0),rankingAbbreviations:e("rankingabbreviations",!1),showMatchTables:e("showmatchtables",!1),hideFinishedGroups:e("hidefinishedgroups",!1)},this.initCleanupListeners()}return e(c,t),c.prototype.EVENTS={error:!0,clear:!0},c.prototype.initCleanupListeners=function(){this.teamscleanuplistener=new r(this.teams),this.tournamentscleanuplistener=new r(this.tournaments)},c.prototype.clear=function(){this.tournaments.clear(),this.teams.clear(),s.reset(),this.emit("clear")},c.prototype.SAVEFORMAT=Object.create(c.superclass.SAVEFORMAT),c.prototype.SAVEFORMAT.options=Object,c.prototype.SAVEFORMAT.teams=[Object],c.prototype.SAVEFORMAT.teamsize=Number,c.prototype.SAVEFORMAT.tournaments=Object,c.prototype.SAVEFORMAT.target=String,c.prototype.SAVEFORMAT.version=String,c.prototype.save=function(){var e=c.superclass.save.call(this);return e.teams=this.teams.save(),e.teamsize=this.teamsize.get(),e.tournaments=this.tournaments.save(),e.options=JSON.parse(s.toBlob()),e.version="1.5.0-dev",e.target=a.target,e},c.prototype.restore=function(e){return c.superclass.restore.call(this,e)?a.target!==e.target?(this.emit("error","Wrong target: "+e.target+", expected: "+a.target),!1):(this.clear(),s.fromBlob(JSON.stringify(e.options)),this.teamsize.set(e.teamsize),this.teams.restore(e.teams,u)?!!this.tournaments.restore(e.tournaments)||(this.emit("error","error: cannot restore State.tournaments"),!1):(this.emit("error","error: cannot restore State.teams"),!1)):(this.emit("error","Wrong data format"),!1)},c}),define("ui/state",["ui/statemodel","core/listener"],function(e,t){var n;return n=new e,t.bind(n,"error",function(e,t,n){console.error(n)}),n}),define("timemachine/keymodel",["lib/extend","core/model","core/type","presets"],function(e,t,n,i){function r(e,t){if(r.superconstructor.call(this),!a.test(e))throw new Error("startDate is no valid ISO8601. toISOString() failure?");if(!a.test(t))throw new Error("saveDate is no valid ISO8601. toISOString() failure?");if(t<e)throw new Error("saveDate is earlier than startDate!");if(this.target=i.target,this.startDate=e,this.saveDate=t,!r.isValidKey(this))throw new Error("Critical error: serialized key is not valid. Call Erik E. Lorenz!")}var o,s,a,u,l,c;return o="_",s="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}Z",a=new RegExp("^"+s+"$"),u=new RegExp("^("+i.target+")"+o),l=new RegExp(u.source+"("+s+")"+o+"("+s+")$"),c=new RegExp("^([a-z]*)"+o+"("+s+")"+o+"("+s+")$"),e(r,t),r.prototype.toString=function(){var e=[this.target,this.startDate,this.saveDate].join(o);if(!l.test(e))throw new Error("created KeyModel does not match format: "+e);return e},r.prototype.isRoot=function(){return this.startDate===this.saveDate},r.prototype.isRelated=function(e){var t;return t=new RegExp(u.source+"("+this.startDate+")"+o+"("+s+")$","i"),t.test(e.toString())},r.prototype.isEqual=function(e){return this.toString()===e.toString()},r.isValidKey=function(e){return l.test(e.toString())},r.isValidDate=function(e){return a.test(e)},r.isTuveroKey=function(e){return c.test(e.toString())},r.createChild=function(e){var t,i;if(!r.isValidKey(e)||!n.isObject(e))throw new Error("createChild(): parentKey is not valid");t=e.startDate;do i=(new Date).toISOString();while(i===t);return new r(t,i)},r.fromString=function(e){var t,n,i;if(!u.test(e))throw new Error("KeyModel reference string has wrong target: "+e);if(i=l.exec(e),!i)throw new Error("KeyModel reference string does not match format");if(4!==i.length)throw new Error("Regex Error? wrong number of captures (not 3): "+i.join(","));return t=i[2],n=i[3],new r(t,n)},r.createRoot=function(){var e=(new Date).toISOString();return new r(e,e)},r.sortFunction=function(e,t){return e.toString().localeCompare(t.toString())},r}),define("timemachine/query",["timemachine/keymodel","core/type"],function(e,t){function n(i){if(this.source=n.source||window.localStorage,this.reference=i,i===n.ALLKEYS);else if(i===n.ROOTKEYS);else if(i===n.LASTKEYS);else if(i===n.LATESTSAVE);else if(i===n.ALLTUVEROKEYS);else if(t.isString(i))this.referenceKey=e.fromString(i);else{if(!(i instanceof e))throw new Error("Query: reference has unknown type: "+i);this.referenceKey=i}}return n.ALLKEYS=void 0,n.ROOTKEYS={},n.LASTKEYS={},n.LATESTSAVE={},n.ALLTUVEROKEYS={},n.prototype.filter=function(){var t,i,r,o;if(t=this.source?Object.keys(this.source):[],t=this.reference===n.ALLTUVEROKEYS?t.filter(e.isTuveroKey):t.filter(e.isValidKey),0===t.length)return[];switch(this.reference){case n.ALLKEYS:case n.ALLTUVEROKEYS:break;case n.ROOTKEYS:t=t.filter(function(t){var n=new e.fromString(t);return n.isRoot()});break;case n.LASTKEYS:i={},t.forEach(function(t){var n=e.fromString(t).startDate;(!i[n]||i[n]<t)&&(i[n]=t)}),t=Object.keys(i).map(function(e){return i[e]});break;case n.LATESTSAVE:r=void 0,t.forEach(function(t){var n=e.fromString(t).saveDate;(!r||o<n)&&(r=t,o=n)}),t=[r];break;default:if(!this.referenceKey)throw new Error("Query: this.referenceKey could not be extracted from this.reference");t=t.filter(this.referenceKey.isRelated.bind(this.referenceKey))}return t.sort()},n}),define("timemachine/reflog",["lib/extend","core/model","presets","timemachine/query","list/listmodel","core/listener","timemachine/keymodel"],function(e,t,n,i,r,o,s){function a(){a.superconstructor.call(this),this.source=void 0,this.data={},this.storageKey=this.formatTargetKey(n.target),o.bind(this,"error",function(e,t,n){console.error(n)}),this.refresh()}var u;return e(a,t),a.prototype.EVENTS={error:!0,rename:!0,refresh:!0,reset:!0},a.prototype.refresh=function(){var e,t;if(e=window.localStorage?window.localStorage[this.storageKey]:this.source){if(this.source===e||"undefined"===e)return!0}else console.log("creating new reflog"),e="{}";try{t=JSON.parse(e)}catch(e){return console.error(e.stack),this.emit("error","cannot JSON-parse reflog from localStorage."),!1}return t?(this.data=t,this.source=e,this.store(),this.emit("refresh"),!0):(this.emit("error","RefLog from localStorage contains no data."),!1)},a.prototype.store=function(){var e;return this.isValid()?(e=JSON.stringify(this.data),!!window.localStorage&&(window.localStorage[this.storageKey]=e,window.localStorage[this.storageKey]===e)):(this.emit("error","RefLogModel: this.data is not valid!"),!1)},a.prototype.isValid=function(){return!!this.data},a.prototype.newSaveKey=function(e){var t,n,i,r;return e?(t=s.createChild(e),e.isRelated(t)?(n=e.startDate,i=e.saveDate,r=t.saveDate,this.contains(e)?(this.data[n][r]=i,this.store(),t):void this.emit("error","newSaveKey(): parentKey is not in reflog!")):void this.emit("error","unexpected error: newKey is unrelated to parentKey")):void this.emit("error","newSaveKey: no parent key given")},a.prototype.newInitKey=function(e){var t;do t=s.createRoot();while(this.contains(t));return this.data[t.startDate]={name:e},this.store(),t},a.prototype.contains=function(e){return this.refresh(),this.data?!!this.data[e.startDate]&&(!!e.isRoot()||!!this.data[e.startDate][e.saveDate]):(this.emit("error","reflog contains no data!"),!1)},a.prototype.listStartDates=function(){return this.refresh(),this.data?Object.keys(this.data).filter(s.isValidDate):[]},a.prototype.listSaveDates=function(e){return this.refresh(),this.data&&this.data[e]?Object.keys(this.data[e]).filter(s.isValidDate):(this.emit("error","reflog does not contain start Date "+e),[])},a.prototype.getName=function(e){return this.contains(e)||(e=new s(e.startDate,e.startDate),this.contains(e))?this.data[e.startDate].name||"":(this.emit("error","reflog does not contain key for name query"),"")},a.prototype.setName=function(e,t){return this.contains(e)||(e=new s(e.startDate,e.startDate),this.contains(e))?t===this.getName(e)||(this.data[e.startDate].name=t,this.store()?(this.emit("rename",e),!0):(this.emit("error","RefLog: store() error during name change"),!1)):(this.emit("error","RefLog does not contain key for name setting"),!1)},a.prototype.getParent=function(e){if(!this.contains(e))return void this.emit("error","reflog does not contain key for parent search!");if(!e.isRoot())return new s(e.startDate,this.data[e.startDate][e.saveDate])},a.prototype.getChildren=function(e){return this.contains(e)?this.listSaveDates(e.startDate).filter(function(t){var n=this.data[e.startDate][t];return n===e.saveDate},this).map(function(t){return new s(e.startDate,t)}):(this.emit("error","reflog does not contain key for children search"),[])},a.prototype.getAllKeys=function(){var e;return e=this.getInitKeys(),this.listStartDates().forEach(function(t){this.listSaveDates(t).forEach(function(n){e.push(new s(t,n))})},this),e.sort()},a.prototype.getInitKeys=function(){return this.listStartDates().sort().map(function(e){return new s(e,e)})},a.prototype.getLatestGlobalKey=function(){var e;if(e=this.listStartDates().map(function(e){var t=this.listSaveDates(e).sort().pop()||e;return new s(e,t)},this).sort(s.sortFunction).pop())return e},a.prototype.getLatestRelatedKey=function(e){var t,n,i;return s.isValidKey(e)?(t=e.startDate,this.contains(e)||(i=new s(t,t),this.contains(i))?(n=this.listSaveDates(t).sort().pop()||t,new s(t,n)):void this.emit("error","root key is missing in reflog")):void this.emit("error","getLatestRelatedKey(): refKey is invalid")},a.prototype.reset=function(){return this.refresh(),this.data?void(0!==this.listStartDates().length&&(this.data={},this.emit("reset"),this.store())):(this.emit("error","RefLog.reset(): data is undefined"),void(this.data={}))},a.prototype.deleteTree=function(e){(this.contains(e)||this.contains(new s(e.startDate,e.startDate)))&&(delete this.data[e.startDate],this.store())},a.prototype.deleteKey=function(e){var t,n;if(e.isRoot())return void this.emit("error","cannot delete a single init key. use deleteTree() instead");if(this.contains(e)){if(t=this.getParent(e),!t)return void this.emit("error","deleteKey(): parent key is not in reflog!");if(n=this.getChildren(e),void 0===n)return void this.emit("error","deleteKey(): Children cannot be extracted!");n.forEach(function(n){this.data[e.startDate][n.saveDate]=t.saveDate},this),delete this.data[e.startDate][e.saveDate],this.store()}},a.prototype.toString=function(){return JSON.stringify(this.data)},a.prototype.formatTargetKey=function(e){return e+"-reflog"},u=new a}),define("timemachine/commitmodel",["lib/extend","core/model","timemachine/reflog","core/type","timemachine/keymodel","timemachine/query"],function(e,t,n,i,r,o){function s(e){s.superconstructor.call(this),i.isString(e)&&(e=r.fromString(e)),n.registerListener(this),this.key=e}return e(s,t),s.prototype.EVENTS={remove:!0,rename:!0},s.prototype.isValid=function(){return!!this.key&&r.isValidKey(this.key)&&n.contains(this.key)&&(!window.localStorage||!!window.localStorage[this.key])},s.prototype.isRoot=function(){return this.key.isRoot()},s.prototype.getChildren=function(){return n.contains(this.key)?n.getChildren(this.key).map(function(e){return new s(e)}).sort(s.sortFunction):[]},s.prototype.getYoungestDescendant=function(){var e,t;if(e=this.getChildren(),0!==e.length)return t=e[e.length-1],e.forEach(function(e){var n=e.getYoungestDescendant();n&&1===s.sortFunction(n,t)&&(t=n)}),t},s.prototype.getParent=function(){if(!this.isRoot())return new s(n.getParent(this.key))},s.prototype.getRoot=function(){var e;return this.isRoot()?this:(e=new r(this.key.startDate,this.key.startDate),new s(e))},s.prototype.getTreeName=function(){return n.getName(this.key)},s.prototype.setTreeName=function(e){return n.setName(this.key,e)},s.prototype.isEqual=function(e){return!!e&&this.key.isEqual(e.key)},s.prototype.isAncestorOf=function(e){var t;if(!e||this.isRoot())return!1;if(this.key.isRelated(e.key))return!1;for(t=e.getParent();t;t=t.getParent())if(this.isEqual(t))return!0;return!1},s.prototype.eraseTree=function(){var e;this.getChildren().forEach(function(e){e.eraseTree()}),this.isRoot()?(e=new o(this.key),window.localStorage&&e.filter().forEach(window.localStorage.removeItem.bind(window.localStorage)),n.deleteTree(this.key),this.emit("remove")):this.remove()},s.prototype.remove=function(){this.isRoot()?this.eraseTree():(window.localStorage&&window.localStorage.removeItem(this.key.toString()),n.deleteKey(this.key),this.emit("remove"))},s.prototype.load=function(){if(this.isValid()&&window.localStorage)return window.localStorage[this.key]},s.prototype.createChild=function(e){var t=n.newSaveKey(this.key);return window.localStorage&&(window.localStorage[t]=e),new s(t)},s.createRoot=function(e,t){var i=n.newInitKey(t);return window.localStorage&&(window.localStorage[i]=e),new s(i)},s.sortFunction=function(e,t){return r.sortFunction(e.key,t.key)},s.prototype.onrename=function(e,t,n){this.key.isRelated(n)&&this.emit("rename")},s}),define("timemachine/timemachine",["lib/extend","core/model","timemachine/reflog","timemachine/keymodel","timemachine/commitmodel","list/listmodel","timemachine/query","list/sortedreferencelistmodel","ui/listcollectormodel","presets","core/valuemodel"],function(e,t,n,i,r,o,s,a,u,l,c){function d(){var e;d.superconstructor.call(this),e=n.getLatestGlobalKey(),this.unsortedRoots=new o,this.roots=new a(this.unsortedRoots,r.sortFunction),this.rootsCollector=new u(this.unsortedRoots,r),this.rootsCollector.registerListener(this),n.registerListener(this),this.updateRoots(),this.commit=new c(void 0),e?this.commit.set(new r(e)):console.warn("No saved tournament found.")}var h;return e(d,t),d.prototype.EVENTS={init:!0,save:!0,cleanup:!0,load:!0,unload:!0},d.prototype.updateRoots=function(){var e,t,i,o;for(e=n.getInitKeys().map(function(e){return new r(e)}),t=e.map(function(e){return e.key.toString()}),i=this.unsortedRoots.length-1;i>=0;i-=1)o=this.unsortedRoots.get(i).key.toString(),t.indexOf(o)===-1&&(this.unsortedRoots.get(i).destroy(),this.unsortedRoots.remove(i));t=this.unsortedRoots.map(function(e){return e.key.toString()}),e.forEach(function(e){o=e.key.toString(),t.indexOf(o)===-1&&this.unsortedRoots.push(e)},this)},d.prototype.init=function(e,t){return this.commit.set(r.createRoot(e,t||l.target)),this.emit("init",this.commit.get()),this.updateRoots(),this.commit.get()},d.prototype.save=function(e){return this.commit.get()&&this.commit.get().isValid()?e===this.commit.get().load()?this.commit.get():(this.commit.set(this.commit.get().createChild(e)),this.emit("save",this.commit.get()),this.commit.get()):void this.commit.set(void 0)},d.prototype.load=function(e){var t;return void 0===e&&this.isInitialized()?this.commit.get().load():(this.unload(),e instanceof r&&e.isValid()?(t=e.load(),t&&(this.commit.set(e),this.emit("load",t)),t):void 0)},d.prototype.unload=function(){this.commit.set(void 0),this.emit("unload")},d.prototype.getOrphans=function(){var e,t;return e=new s(s.ALLKEYS),t=e.filter().map(function(e){return new r(e)}).filter(function(e){return!e.isValid()}),t=t.concat(n.getAllKeys().map(function(e){return new r(e)}).filter(function(e){return!e.isValid()})),t.sort(r.sortFunction)},d.prototype.isInitialized=function(){return!!this.commit.get()},d.prototype.isActive=function(e){return!!this.commit.get()&&!!e&&this.commit.get().key.isEqual(e.key)},d.prototype.isRelatedToActive=function(e){return!!this.commit.get()&&!!e&&this.commit.get().key.isRelated(e.key)},d.prototype.usedRelatedStorage=function(e){var t,n;return t=0,n=new s(e.key),n.filter().forEach(function(e){var n;n=window.localStorage?window.localStorage[e]||"":"",t+=n.length}),t},d.prototype.usedStorage=function(){var e,t,i;return t={},e=new s(s.ALLTUVEROKEYS),e.filter().forEach(function(e){var n,i;n=e.split("_")[0],i=window.localStorage?window.localStorage[e]||"":"",t[n]=(t[n]||0)+i.length}),i=0,window.localStorage&&Object.keys(t).forEach(function(e){t[e]+=(window.localStorage[n.formatTargetKey(e)]||"").length,i+=t[e]}),t.total=i,t},d.prototype.cleanup=function(e,t){var n,i;if(e instanceof r&&e.isValid()){for(n=new s(e.key),i=n.filter(),i.shift(),i.pop();i.length>t;)new r(i.shift()).remove();
this.emit("cleanup",e)}},d.prototype.onremove=function(e,t,n){if(n.source.isRoot()){var i=this.unsortedRoots.indexOf(n.source);this.unsortedRoots.get(i).destroy(),this.unsortedRoots.remove(i)}},d.prototype.onrefresh=function(e,t,n){this.updateRoots()},h=new d}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=pe.type(e);return"function"!==n&&!pe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(pe.isFunction(t))return pe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return pe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(qe.test(t))return pe.filter(t,e,n);t=pe.filter(t,e)}return pe.grep(e,function(e){return pe.inArray(e,t)>-1!==n})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t={};return pe.each(e.match(Ce)||[],function(e,n){t[n]=!0}),t}function s(){ie.addEventListener?(ie.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a)):(ie.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(ie.addEventListener||"load"===e.event.type||"complete"===ie.readyState)&&(s(),pe.ready())}function u(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(Oe,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ae.test(n)?pe.parseJSON(n):n)}catch(e){}pe.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if(("data"!==t||!pe.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,i){if($e(e)){var r,o,s=pe.expando,a=e.nodeType,u=a?pe.cache:e,l=a?e[s]:e[s]&&s;if(l&&u[l]&&(i||u[l].data)||void 0!==n||"string"!=typeof t)return l||(l=a?e[s]=ne.pop()||pe.guid++:s),u[l]||(u[l]=a?{}:{toJSON:pe.noop}),"object"!=typeof t&&"function"!=typeof t||(i?u[l]=pe.extend(u[l],t):u[l].data=pe.extend(u[l].data,t)),o=u[l],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[pe.camelCase(t)]=n),"string"==typeof t?(r=o[t],null==r&&(r=o[pe.camelCase(t)])):r=o,r}}function d(e,t,n){if($e(e)){var i,r,o=e.nodeType,s=o?pe.cache:e,a=o?e[pe.expando]:pe.expando;if(s[a]){if(t&&(i=n?s[a]:s[a].data)){pe.isArray(t)?t=t.concat(pe.map(t,pe.camelCase)):t in i?t=[t]:(t=pe.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!l(i):!pe.isEmptyObject(i))return}(n||(delete s[a].data,l(s[a])))&&(o?pe.cleanData([e],!0):de.deleteExpando||s!=s.window?delete s[a]:s[a]=void 0)}}}function h(e,t,n,i){var r,o=1,s=20,a=i?function(){return i.cur()}:function(){return pe.css(e,t,"")},u=a(),l=n&&n[3]||(pe.cssNumber[t]?"":"px"),c=(pe.cssNumber[t]||"px"!==l&&+u)&&Ie.exec(pe.css(e,t));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do o=o||".5",c/=o,pe.style(e,t,c+l);while(o!==(o=a()/u)&&1!==o&&--s)}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}function p(e){var t=He.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){var n,i,r=0,o="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||pe.nodeName(i,t)?o.push(i):pe.merge(o,f(i,t));return void 0===t||t&&pe.nodeName(e,t)?pe.merge([e],o):o}function m(e,t){for(var n,i=0;null!=(n=e[i]);i++)pe._data(n,"globalEval",!t||pe._data(t[i],"globalEval"))}function g(e){Pe.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t,n,i,r){for(var o,s,a,u,l,c,d,h=e.length,v=p(t),y=[],w=0;h>w;w++)if(s=e[w],s||0===s)if("object"===pe.type(s))pe.merge(y,s.nodeType?[s]:s);else if(We.test(s)){for(u=u||v.appendChild(t.createElement("div")),l=(Ve.exec(s)||["",""])[1].toLowerCase(),d=Ge[l]||Ge._default,u.innerHTML=d[1]+pe.htmlPrefilter(s)+d[2],o=d[0];o--;)u=u.lastChild;if(!de.leadingWhitespace&&Be.test(s)&&y.push(t.createTextNode(Be.exec(s)[0])),!de.tbody)for(s="table"!==l||Ke.test(s)?"<table>"!==d[1]||Ke.test(s)?0:u:u.firstChild,o=s&&s.childNodes.length;o--;)pe.nodeName(c=s.childNodes[o],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(pe.merge(y,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=v.lastChild}else y.push(t.createTextNode(s));for(u&&v.removeChild(u),de.appendChecked||pe.grep(f(y,"input"),g),w=0;s=y[w++];)if(i&&pe.inArray(s,i)>-1)r&&r.push(s);else if(a=pe.contains(s.ownerDocument,s),u=f(v.appendChild(s),"script"),a&&m(u),n)for(o=0;s=u[o++];)Fe.test(s.type||"")&&n.push(s);return u=null,v}function y(){return!0}function w(){return!1}function b(){try{return ie.activeElement}catch(e){}}function k(e,t,n,i,r,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(a in t)k(e,a,n,i,t[a],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=w;else if(!r)return e;return 1===o&&(s=r,r=function(e){return pe().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=pe.guid++)),e.each(function(){pe.event.add(this,t,r,i,n)})}function x(e,t){return pe.nodeName(e,"table")&&pe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function q(e){return e.type=(null!==pe.find.attr(e,"type"))+"/"+e.type,e}function E(e){var t=rt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){if(1===t.nodeType&&pe.hasData(e)){var n,i,r,o=pe._data(e),s=pe._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)pe.event.add(t,n,a[n][i])}s.data&&(s.data=pe.extend({},s.data))}}function S(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!de.noCloneEvent&&t[pe.expando]){r=pe._data(t);for(i in r.events)pe.removeEvent(t,i,r.handle);t.removeAttribute(pe.expando)}"script"===n&&t.text!==e.text?(q(t).text=e.text,E(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),de.html5Clone&&e.innerHTML&&!pe.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Pe.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function N(e,t,n,i){t=oe.apply([],t);var r,o,s,a,u,l,c=0,d=e.length,h=d-1,p=t[0],m=pe.isFunction(p);if(m||d>1&&"string"==typeof p&&!de.checkClone&&it.test(p))return e.each(function(r){var o=e.eq(r);m&&(t[0]=p.call(this,r,o.html())),N(o,t,n,i)});if(d&&(l=v(t,e[0].ownerDocument,!1,e,i),r=l.firstChild,1===l.childNodes.length&&(l=r),r||i)){for(a=pe.map(f(l,"script"),q),s=a.length;d>c;c++)o=l,c!==h&&(o=pe.clone(o,!0,!0),s&&pe.merge(a,f(o,"script"))),n.call(e[c],o,c);if(s)for(u=a[a.length-1].ownerDocument,pe.map(a,E),c=0;s>c;c++)o=a[c],Fe.test(o.type||"")&&!pe._data(o,"globalEval")&&pe.contains(u,o)&&(o.src?pe._evalUrl&&pe._evalUrl(o.src):pe.globalEval((o.text||o.textContent||o.innerHTML||"").replace(ot,"")));l=r=null}return e}function D(e,t,n){for(var i,r=t?pe.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||pe.cleanData(f(i)),i.parentNode&&(n&&pe.contains(i.ownerDocument,i)&&m(f(i,"script")),i.parentNode.removeChild(i));return e}function C(e,t){var n=pe(t.createElement(e)).appendTo(t.body),i=pe.css(n[0],"display");return n.detach(),i}function M(e){var t=ie,n=lt[e];return n||(n=C(e,t),"none"!==n&&n||(ut=(ut||pe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(ut[0].contentWindow||ut[0].contentDocument).document,t.write(),t.close(),n=C(e,t),ut.detach()),lt[e]=n),n}function L(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function $(e){if(e in Et)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=qt.length;n--;)if(e=qt[n]+t,e in Et)return e}function A(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=pe._data(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&ze(i)&&(o[s]=pe._data(i,"olddisplay",M(i.nodeName)))):(r=ze(i),(n&&"none"!==n||!r)&&pe._data(i,"olddisplay",r?n:pe.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function O(e,t,n){var i=bt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function R(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=pe.css(e,n+je[o],!0,r)),i?("content"===n&&(s-=pe.css(e,"padding"+je[o],!0,r)),"margin"!==n&&(s-=pe.css(e,"border"+je[o]+"Width",!0,r))):(s+=pe.css(e,"padding"+je[o],!0,r),"padding"!==n&&(s+=pe.css(e,"border"+je[o]+"Width",!0,r)));return s}function I(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=ft(e),s=de.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=mt(e,t,o),(0>r||null==r)&&(r=e.style[t]),dt.test(r))return r;i=s&&(de.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+R(e,t,n||(s?"border":"content"),i,o)+"px"}function j(e,t,n,i,r){return new j.prototype.init(e,t,n,i,r)}function z(){return e.setTimeout(function(){Tt=void 0}),Tt=pe.now()}function _(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=je[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function P(e,t,n){for(var i,r=(B.tweeners[t]||[]).concat(B.tweeners["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function V(e,t,n){var i,r,o,s,a,u,l,c,d=this,h={},p=e.style,f=e.nodeType&&ze(e),m=pe._data(e,"fxshow");n.queue||(a=pe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,pe.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=pe.css(e,"display"),c="none"===l?pe._data(e,"olddisplay")||M(e.nodeName):l,"inline"===c&&"none"===pe.css(e,"float")&&(de.inlineBlockNeedsLayout&&"inline"!==M(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",de.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Nt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}h[i]=m&&m[i]||pe.style(e,i)}else l=void 0;if(pe.isEmptyObject(h))"inline"===("none"===l?M(e.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(f=m.hidden):m=pe._data(e,"fxshow",{}),o&&(m.hidden=!f),f?pe(e).show():d.done(function(){pe(e).hide()}),d.done(function(){var t;pe._removeData(e,"fxshow");for(t in h)pe.style(e,t,h[t])});for(i in h)s=P(f?m[i]:0,i,d),i in m||(m[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function F(e,t){var n,i,r,o,s;for(n in e)if(i=pe.camelCase(n),r=t[i],o=e[n],pe.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=pe.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function B(e,t,n){var i,r,o=0,s=B.prefilters.length,a=pe.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var t=Tt||z(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:pe.extend({},t),opts:pe.extend(!0,{specialEasing:{},easing:pe.easing._default},n),originalProperties:t,originalOptions:n,startTime:Tt||z(),duration:n.duration,tweens:[],createTween:function(t,n){var i=pe.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),c=l.props;for(F(c,l.opts.specialEasing);s>o;o++)if(i=B.prefilters[o].call(l,e,c,l.opts))return pe.isFunction(i.stop)&&(pe._queueHooks(l.elem,l.opts.queue).stop=pe.proxy(i.stop,i)),i;return pe.map(c,P,l),pe.isFunction(l.opts.start)&&l.opts.start.call(e,l),pe.fx.timer(pe.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function H(e){return pe.attr(e,"class")||""}function G(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(Ce)||[];if(pe.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function W(e,t,n,i){function r(a){var u;return o[a]=!0,pe.each(e[a]||[],function(e,a){var l=a(t,n,i);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),u}var o={},s=e===Qt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function K(e,t){var n,i,r=pe.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&pe.extend(!0,e,n),e}function U(e,t,n){for(var i,r,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){u.unshift(s);break}if(u[0]in n)o=u[0];else{for(s in n){if(!u[0]||e.converters[s+" "+u[0]]){o=s;break}i||(i=s)}o=o||i}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function Y(e,t,n,i){var r,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(r in l)if(a=r.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[r]:l[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function Z(e){return e.style&&e.style.display||pe.css(e,"display")}function J(e){if(!pe.contains(e.ownerDocument||ie,e))return!0;for(;e&&1===e.nodeType;){if("none"===Z(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function Q(e,t,n,i){var r;if(pe.isArray(t))pe.each(t,function(t,r){n||rn.test(e)?i(e,r):Q(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==pe.type(t))i(e,t);else for(r in t)Q(e+"["+r+"]",t[r],n,i)}function X(){try{return new e.XMLHttpRequest}catch(e){}}function ee(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function te(e){return pe.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ne=[],ie=e.document,re=ne.slice,oe=ne.concat,se=ne.push,ae=ne.indexOf,ue={},le=ue.toString,ce=ue.hasOwnProperty,de={},he="1.12.4",pe=function(e,t){return new pe.fn.init(e,t)},fe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,me=/^-ms-/,ge=/-([\da-z])/gi,ve=function(e,t){return t.toUpperCase()};pe.fn=pe.prototype={jquery:he,constructor:pe,selector:"",length:0,toArray:function(){return re.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:re.call(this)},pushStack:function(e){var t=pe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return pe.each(this,e)},map:function(e){return this.pushStack(pe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:se,sort:ne.sort,splice:ne.splice},pe.extend=pe.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||pe.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(r=arguments[a]))for(i in r)e=s[i],n=r[i],s!==n&&(l&&n&&(pe.isPlainObject(n)||(t=pe.isArray(n)))?(t?(t=!1,o=e&&pe.isArray(e)?e:[]):o=e&&pe.isPlainObject(e)?e:{},s[i]=pe.extend(l,o,n)):void 0!==n&&(s[i]=n));return s},pe.extend({expando:"jQuery"+(he+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===pe.type(e)},isArray:Array.isArray||function(e){return"array"===pe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!pe.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==pe.type(e)||e.nodeType||pe.isWindow(e))return!1;try{if(e.constructor&&!ce.call(e,"constructor")&&!ce.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!de.ownFirst)for(t in e)return ce.call(e,t);for(t in e);return void 0===t||ce.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ue[le.call(e)]||"object":typeof e},globalEval:function(t){t&&pe.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(me,"ms-").replace(ge,ve)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;i>r&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(fe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?pe.merge(i,"string"==typeof e?[e]:e):se.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(ae)return ae.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;s>o;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o,s=0,a=[];if(n(e))for(r=e.length;r>s;s++)o=t(e[s],s,i),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,i),null!=o&&a.push(o);return oe.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),pe.isFunction(e)?(n=re.call(arguments,2),i=function(){return e.apply(t||this,n.concat(re.call(arguments)))},i.guid=e.guid=e.guid||pe.guid++,i):void 0},now:function(){return+new Date},support:de}),"function"==typeof Symbol&&(pe.fn[Symbol.iterator]=ne[Symbol.iterator]),pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ue["[object "+t+"]"]=t.toLowerCase()});var ye=function(e){function t(e,t,n,i){var r,o,s,a,u,l,d,p,f=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!i&&((t?t.ownerDocument||t:P)!==$&&L(t),t=t||$,O)){if(11!==m&&(l=ve.exec(e)))if(r=l[1]){if(9===m){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(f&&(s=f.getElementById(r))&&z(t,s)&&s.id===r)return n.push(s),n}else{if(l[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&k.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(k.qsa&&!G[e+" "]&&(!R||!R.test(e))){if(1!==m)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(we,"\\$&"):t.setAttribute("id",a=_),d=T(e),o=d.length,u=he.test(a)?"#"+a:"[id='"+a+"']";o--;)d[o]=u+" "+h(d[o]);p=d.join(","),f=ye.test(e)&&c(t.parentNode)||t}if(p)try{return Q.apply(n,f.querySelectorAll(p)),n}catch(e){}finally{a===_&&t.removeAttribute("id")}}}return N(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[_]=!0,e}function r(e){var t=$.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=F++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,u,l,c=[V,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[_]||(t[_]={}),u=l[t.uniqueID]||(l[t.uniqueID]={}),(a=u[i])&&a[0]===V&&a[1]===o)return c[2]=a[2];if(u[i]=c,c[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),l&&t.push(a)));return s}function v(e,t,n,r,o,s){return r&&!r[_]&&(r=v(r)),o&&!o[_]&&(o=v(o,s)),i(function(i,s,a,u){var l,c,d,h=[],p=[],f=s.length,v=i||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?v:g(v,h,e,a,u),w=n?o||(i?e:f||r)?[]:s:y;if(n&&n(y,w,a,u),r)for(l=g(w,p),r(l,[],a,u),c=l.length;c--;)(d=l[c])&&(w[p[c]]=!(y[p[c]]=d));if(i){if(o||e){if(o){for(l=[],c=w.length;c--;)(d=w[c])&&l.push(y[c]=d);o(null,w=[],l,u)}for(c=w.length;c--;)(d=w[c])&&(l=o?ee(i,d):h[c])>-1&&(i[l]=!(s[l]=d))}}else w=g(w===s?w.splice(f,w.length):w),o?o(null,s,w,u):Q.apply(s,w)})}function y(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,u=p(function(e){return e===t},s,!0),l=p(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,i){var r=!o&&(i||n!==D)||((t=n).nodeType?u(e,n,i):l(e,n,i));return t=null,r}];r>a;a++)if(n=x.relative[e[a].type])c=[p(f(c),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[_]){for(i=++a;r>i&&!x.relative[e[i].type];i++);return v(a>1&&f(c),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,i>a&&y(e.slice(a,i)),r>i&&y(e=e.slice(i)),r>i&&h(e))}c.push(n)}return f(c)}function w(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,u,l){var c,d,h,p=0,f="0",m=i&&[],v=[],y=D,w=i||o&&x.find.TAG("*",l),b=V+=null==y?1:Math.random()||.1,k=w.length;for(l&&(D=s===$||s||l);f!==k&&null!=(c=w[f]);f++){if(o&&c){for(d=0,s||c.ownerDocument===$||(L(c),a=!O);h=e[d++];)if(h(c,s||$,a)){u.push(c);break}l&&(V=b)}r&&((c=!h&&c)&&p--,i&&m.push(c))}if(p+=f,r&&f!==p){for(d=0;h=n[d++];)h(m,v,s,a);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=Z.call(u));v=g(v)}Q.apply(u,v),l&&!i&&v.length>0&&p+n.length>1&&t.uniqueSort(u)}return l&&(V=b,D=y),m};return r?i(s):s}var b,k,x,q,E,T,S,N,D,C,M,L,$,A,O,R,I,j,z,_="sizzle"+1*new Date,P=e.document,V=0,F=0,B=n(),H=n(),G=n(),W=function(e,t){return e===t&&(M=!0),0},K=1<<31,U={}.hasOwnProperty,Y=[],Z=Y.pop,J=Y.push,Q=Y.push,X=Y.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),ke=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=function(){L()};try{Q.apply(Y=X.call(P.childNodes),P.childNodes),Y[P.childNodes.length].nodeType}catch(e){Q={apply:Y.length?function(e,t){J.apply(e,X.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}k=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},L=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:P;return i!==$&&9===i.nodeType&&i.documentElement?($=i,A=$.documentElement,O=!E($),(n=$.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),k.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=r(function(e){return e.appendChild($.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=ge.test($.getElementsByClassName),k.getById=r(function(e){return A.appendChild(e).id=_,!$.getElementsByName||!$.getElementsByName(_).length}),k.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,ke);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,ke);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=k.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):k.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=k.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&O?t.getElementsByClassName(e):void 0},I=[],R=[],(k.qsa=ge.test($.querySelectorAll))&&(r(function(e){A.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+_+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||R.push(".#.+[+~]")}),r(function(e){var t=$.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(k.matchesSelector=ge.test(j=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(e){k.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),I.push("!=",oe)}),R=R.length&&new RegExp(R.join("|")),I=I.length&&new RegExp(I.join("|")),t=ge.test(A.compareDocumentPosition),z=t||ge.test(A.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return M=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!k.sortDetached&&t.compareDocumentPosition(e)===n?e===$||e.ownerDocument===P&&z(P,e)?-1:t===$||t.ownerDocument===P&&z(P,t)?1:C?ee(C,e)-ee(C,t):0:4&n?-1:1)}:function(e,t){if(e===t)return M=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!r||!o)return e===$?-1:t===$?1:r?-1:o?1:C?ee(C,e)-ee(C,t):0;if(r===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[i]===u[i];)i++;return i?s(a[i],u[i]):a[i]===P?-1:u[i]===P?1:0},$):$},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==$&&L(e),n=n.replace(ce,"='$1']"),k.matchesSelector&&O&&!G[n+" "]&&(!I||!I.test(n))&&(!R||!R.test(n)))try{var i=j.call(e,n);if(i||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,$,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==$&&L(e),z(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==$&&L(e);var n=x.attrHandle[t.toLowerCase()],i=n&&U.call(x.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==i?i:k.attributes||!O?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(M=!k.detectDuplicates,C=!k.sortStable&&e.slice(0),e.sort(W),M){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return C=null,e},q=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=q(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=q(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ke),e[3]=(e[3]||e[4]||e[5]||"").replace(be,ke),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,ke).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(se," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,h,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a,w=!1;if(g){
if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(h=g,d=h[_]||(h[_]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),l=c[e]||[],p=l[0]===V&&l[1],w=p&&l[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(w=p=0)||f.pop();)if(1===h.nodeType&&++w&&h===t){c[e]=[V,p,w];break}}else if(y&&(h=t,d=h[_]||(h[_]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),l=c[e]||[],p=l[0]===V&&l[1],w=p),w===!1)for(;(h=++p&&h&&h[m]||(w=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++w||(y&&(d=h[_]||(h[_]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),c[e]=[V,w]),h!==t)););return w-=r,w===i||w%i===0&&w/i>=0}}},PSEUDO:function(e,n){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[_]?o(n):o.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=ee(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=S(e.replace(ae,"$1"));return r[_]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,ke),function(t){return(t.textContent||t.innerText||q(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,ke).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=u(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,T=t.tokenize=function(e,n){var i,r,o,s,a,u,l,c=H[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=x.preFilter;a;){i&&!(r=ue.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),i=!1,(r=le.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ae," ")}),a=a.slice(i.length));for(s in x.filter)!(r=pe[s].exec(a))||l[s]&&!(r=l[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):H(e,u).slice(0)},S=t.compile=function(e,t){var n,i=[],r=[],o=G[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)o=y(t[n]),o[_]?i.push(o):r.push(o);o=G(e,w(r,i)),o.selector=e}return o},N=t.select=function(e,t,n,i){var r,o,s,a,u,l="function"==typeof e&&e,d=!i&&T(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&k.getById&&9===t.nodeType&&O&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(be,ke),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((u=x.find[a])&&(i=u(s.matches[0].replace(be,ke),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return Q.apply(n,i),n;break}}return(l||S(e,d))(i,t,!O,n,!t||ye.test(e)&&c(t.parentNode)||t),n},k.sortStable=_.split("").sort(W).join("")===_,k.detectDuplicates=!!M,L(),k.sortDetached=r(function(e){return 1&e.compareDocumentPosition($.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);pe.find=ye,pe.expr=ye.selectors,pe.expr[":"]=pe.expr.pseudos,pe.uniqueSort=pe.unique=ye.uniqueSort,pe.text=ye.getText,pe.isXMLDoc=ye.isXML,pe.contains=ye.contains;var we=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&pe(e).is(n))break;i.push(e)}return i},be=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ke=pe.expr.match.needsContext,xe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,qe=/^.[^:#\[\.,]*$/;pe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?pe.find.matchesSelector(i,e)?[i]:[]:pe.find.matches(e,pe.grep(t,function(e){return 1===e.nodeType}))},pe.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(pe(e).filter(function(){for(t=0;r>t;t++)if(pe.contains(i[t],this))return!0}));for(t=0;r>t;t++)pe.find(e,i[t],n);return n=this.pushStack(r>1?pe.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ke.test(e)?pe(e):e||[],!1).length}});var Ee,Te=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Se=pe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||Ee,"string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Te.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof pe?t[0]:t,pe.merge(this,pe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),xe.test(i[1])&&pe.isPlainObject(t))for(i in t)pe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(r=ie.getElementById(i[2]),r&&r.parentNode){if(r.id!==i[2])return Ee.find(e);this.length=1,this[0]=r}return this.context=ie,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):pe.isFunction(e)?"undefined"!=typeof n.ready?n.ready(e):e(pe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),pe.makeArray(e,this))};Se.prototype=pe.fn,Ee=pe(ie);var Ne=/^(?:parents|prev(?:Until|All))/,De={children:!0,contents:!0,next:!0,prev:!0};pe.fn.extend({has:function(e){var t,n=pe(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(pe.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=ke.test(e)||"string"!=typeof e?pe(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&pe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?pe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?pe.inArray(this[0],pe(e)):pe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(pe.uniqueSort(pe.merge(this.get(),pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,n){return we(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,n){return we(e,"nextSibling",n)},prevUntil:function(e,t,n){return we(e,"previousSibling",n)},siblings:function(e){return be((e.parentNode||{}).firstChild,e)},children:function(e){return be(e.firstChild)},contents:function(e){return pe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:pe.merge([],e.childNodes)}},function(e,t){pe.fn[e]=function(n,i){var r=pe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=pe.filter(i,r)),this.length>1&&(De[e]||(r=pe.uniqueSort(r)),Ne.test(e)&&(r=r.reverse())),this.pushStack(r)}});var Ce=/\S+/g;pe.Callbacks=function(e){e="string"==typeof e?o(e):pe.extend({},e);var t,n,i,r,s=[],a=[],u=-1,l=function(){for(r=e.once,i=t=!0;a.length;u=-1)for(n=a.shift();++u<s.length;)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(u=s.length-1,a.push(n)),function t(n){pe.each(n,function(n,i){pe.isFunction(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==pe.type(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return pe.each(arguments,function(e,t){for(var n;(n=pe.inArray(t,s,n))>-1;)s.splice(n,1),u>=n&&u--}),this},has:function(e){return e?pe.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=!0,n||c.disable(),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},pe.extend({Deferred:function(e){var t=[["resolve","done",pe.Callbacks("once memory"),"resolved"],["reject","fail",pe.Callbacks("once memory"),"rejected"],["notify","progress",pe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return pe.Deferred(function(n){pe.each(t,function(t,o){var s=pe.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&pe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?pe.extend(e,i):i}},r={};return i.pipe=i.then,pe.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=re.call(arguments),s=o.length,a=1!==s||e&&pe.isFunction(e.promise)?s:0,u=1===a?e:pe.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?re.call(arguments):r,i===t?u.notifyWith(n,i):--a||u.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&pe.isFunction(o[r].promise)?o[r].promise().progress(l(r,n,t)).done(l(r,i,o)).fail(u.reject):--a;return a||u.resolveWith(i,o),u.promise()}});var Me;pe.fn.ready=function(e){return pe.ready.promise().done(e),this},pe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?pe.readyWait++:pe.ready(!0)},ready:function(e){(e===!0?--pe.readyWait:pe.isReady)||(pe.isReady=!0,e!==!0&&--pe.readyWait>0||(Me.resolveWith(ie,[pe]),pe.fn.triggerHandler&&(pe(ie).triggerHandler("ready"),pe(ie).off("ready"))))}}),pe.ready.promise=function(t){if(!Me)if(Me=pe.Deferred(),"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll)e.setTimeout(pe.ready);else if(ie.addEventListener)ie.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a);else{ie.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var n=!1;try{n=null==e.frameElement&&ie.documentElement}catch(e){}n&&n.doScroll&&!function t(){if(!pe.isReady){try{n.doScroll("left")}catch(n){return e.setTimeout(t,50)}s(),pe.ready()}}()}return Me.promise(t)},pe.ready.promise();var Le;for(Le in pe(de))break;de.ownFirst="0"===Le,de.inlineBlockNeedsLayout=!1,pe(function(){var e,t,n,i;n=ie.getElementsByTagName("body")[0],n&&n.style&&(t=ie.createElement("div"),i=ie.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",de.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=ie.createElement("div");de.deleteExpando=!0;try{delete e.test}catch(e){de.deleteExpando=!1}e=null}();var $e=function(e){var t=pe.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||t!==!0&&e.getAttribute("classid")===t)},Ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/([A-Z])/g;pe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?pe.cache[e[pe.expando]]:e[pe.expando],!!e&&!l(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),pe.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=pe.data(o),1===o.nodeType&&!pe._data(o,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=pe.camelCase(i.slice(5)),u(o,i,r[i])));pe._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){pe.data(this,e)}):arguments.length>1?this.each(function(){pe.data(this,e,t)}):o?u(o,e,pe.data(o,e)):void 0},removeData:function(e){return this.each(function(){pe.removeData(this,e)})}}),pe.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=pe._data(e,t),n&&(!i||pe.isArray(n)?i=pe._data(e,t,pe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=pe.queue(e,t),i=n.length,r=n.shift(),o=pe._queueHooks(e,t),s=function(){pe.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return pe._data(e,n)||pe._data(e,n,{empty:pe.Callbacks("once memory").add(function(){pe._removeData(e,t+"queue"),pe._removeData(e,n)})})}}),pe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?pe.queue(this[0],e):void 0===t?this:this.each(function(){var n=pe.queue(this,e,t);pe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=pe.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=pe._data(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}}),function(){var e;de.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=ie.getElementsByTagName("body")[0],n&&n.style?(t=ie.createElement("div"),i=ie.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ie.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var Re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ie=new RegExp("^(?:([+-])=|)("+Re+")([a-z%]*)$","i"),je=["Top","Right","Bottom","Left"],ze=function(e,t){return e=t||e,"none"===pe.css(e,"display")||!pe.contains(e.ownerDocument,e)},_e=function(e,t,n,i,r,o,s){var a=0,u=e.length,l=null==n;if("object"===pe.type(n)){r=!0;for(a in n)_e(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,pe.isFunction(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(pe(e),n)})),t))for(;u>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:l?t.call(e):u?t(e[0],n):o},Pe=/^(?:checkbox|radio)$/i,Ve=/<([\w:-]+)/,Fe=/^$|\/(?:java|ecma)script/i,Be=/^\s+/,He="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=ie.createElement("div"),t=ie.createDocumentFragment(),n=ie.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",de.leadingWhitespace=3===e.firstChild.nodeType,de.tbody=!e.getElementsByTagName("tbody").length,de.htmlSerialize=!!e.getElementsByTagName("link").length,de.html5Clone="<:nav></:nav>"!==ie.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),de.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",de.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=ie.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),de.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,de.noCloneEvent=!!e.addEventListener,e[pe.expando]=1,de.attributes=!e.getAttribute(pe.expando)}();var Ge={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:de.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td;var We=/<|&#?\w+;/,Ke=/<tbody/i;!function(){var t,n,i=ie.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(de[t]=n in e)||(i.setAttribute(n,"t"),de[t]=i.attributes[n].expando===!1);i=null}();var Ue=/^(?:input|select|textarea)$/i,Ye=/^key/,Ze=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Je=/^(?:focusinfocus|focusoutblur)$/,Qe=/^([^.]*)(?:\.(.+)|)/;pe.event={global:{},add:function(e,t,n,i,r){var o,s,a,u,l,c,d,h,p,f,m,g=pe._data(e);if(g){for(n.handler&&(u=n,n=u.handler,r=u.selector),n.guid||(n.guid=pe.guid++),(s=g.events)||(s=g.events={}),(c=g.handle)||(c=g.handle=function(e){return"undefined"==typeof pe||e&&pe.event.triggered===e.type?void 0:pe.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(Ce)||[""],a=t.length;a--;)o=Qe.exec(t[a])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(l=pe.event.special[p]||{},p=(r?l.delegateType:l.bindType)||p,l=pe.event.special[p]||{},d=pe.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&pe.expr.match.needsContext.test(r),namespace:f.join(".")},u),(h=s[p])||(h=s[p]=[],h.delegateCount=0,l.setup&&l.setup.call(e,i,f,c)!==!1||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),pe.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var o,s,a,u,l,c,d,h,p,f,m,g=pe.hasData(e)&&pe._data(e);if(g&&(c=g.events)){for(t=(t||"").match(Ce)||[""],l=t.length;l--;)if(a=Qe.exec(t[l])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(d=pe.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=h.length;o--;)s=h[o],!r&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(e,s));u&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||pe.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)pe.event.remove(e,p+t[l],n,i,!0);pe.isEmptyObject(c)&&(delete g.handle,pe._removeData(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,u,l,c,d,h=[i||ie],p=ce.call(t,"type")?t.type:t,f=ce.call(t,"namespace")?t.namespace.split("."):[];if(a=c=i=i||ie,3!==i.nodeType&&8!==i.nodeType&&!Je.test(p+pe.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,t=t[pe.expando]?t:new pe.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:pe.makeArray(n,[t]),l=pe.event.special[p]||{},r||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!r&&!l.noBubble&&!pe.isWindow(i)){for(u=l.delegateType||p,Je.test(u+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),c=a;c===(i.ownerDocument||ie)&&h.push(c.defaultView||c.parentWindow||e)}for(d=0;(a=h[d++])&&!t.isPropagationStopped();)t.type=d>1?u:l.bindType||p,o=(pe._data(a,"events")||{})[t.type]&&pe._data(a,"handle"),o&&o.apply(a,n),o=s&&a[s],o&&o.apply&&$e(a)&&(t.result=o.apply(a,n),t.result===!1&&t.preventDefault());if(t.type=p,!r&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(h.pop(),n)===!1)&&$e(i)&&s&&i[p]&&!pe.isWindow(i)){c=i[s],c&&(i[s]=null),pe.event.triggered=p;try{i[p]()}catch(e){}pe.event.triggered=void 0,c&&(i[s]=c)}return t.result}},dispatch:function(e){e=pe.event.fix(e);var t,n,i,r,o,s=[],a=re.call(arguments),u=(pe._data(this,"events")||{})[e.type]||[],l=pe.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=pe.event.handlers.call(this,e,u),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((pe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(i=[],n=0;a>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?pe(r,this).index(u)>-1:pe.find(r,this,null,[u]).length),i[r]&&i.push(o);i.length&&s.push({elem:u,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[pe.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ze.test(r)?this.mouseHooks:Ye.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new pe.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||ie),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||ie,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===b()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return pe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return pe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var i=pe.extend(new pe.Event,n,{type:e,isSimulated:!0});pe.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}},pe.removeEvent=ie.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},pe.Event=function(e,t){return this instanceof pe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?y:w):this.type=e,t&&pe.extend(this,t),this.timeStamp=e&&e.timeStamp||pe.now(),void(this[pe.expando]=!0)):new pe.Event(e,t)},pe.Event.prototype={constructor:pe.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=y,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=y,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=y,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||pe.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),de.submit||(pe.event.special.submit={setup:function(){return!pe.nodeName(this,"form")&&void pe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=pe.nodeName(t,"input")||pe.nodeName(t,"button")?pe.prop(t,"form"):void 0;n&&!pe._data(n,"submit")&&(pe.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),pe._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&pe.event.simulate("submit",this.parentNode,e))},teardown:function(){return!pe.nodeName(this,"form")&&void pe.event.remove(this,"._submit")}}),de.change||(pe.event.special.change={setup:function(){return Ue.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(pe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),pe.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),pe.event.simulate("change",this,e)})),!1):void pe.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ue.test(t.nodeName)&&!pe._data(t,"change")&&(pe.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||pe.event.simulate("change",this.parentNode,e)}),pe._data(t,"change",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return pe.event.remove(this,"._change"),!Ue.test(this.nodeName)}}),de.focusin||pe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){pe.event.simulate(t,e.target,pe.event.fix(e))};pe.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=pe._data(i,t);r||i.addEventListener(e,n,!0),pe._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=pe._data(i,t)-1;r?pe._data(i,t,r):(i.removeEventListener(e,n,!0),pe._removeData(i,t))}}}),pe.fn.extend({on:function(e,t,n,i){return k(this,e,t,n,i)},one:function(e,t,n,i){return k(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,pe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=w),this.each(function(){pe.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?pe.event.trigger(e,t,n,!0):void 0}});var Xe=/ jQuery\d+="(?:null|\d+)"/g,et=new RegExp("<(?:"+He+")[\\s/>]","i"),tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,nt=/<script|<style|<link/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,st=p(ie),at=st.appendChild(ie.createElement("div"));pe.extend({htmlPrefilter:function(e){return e.replace(tt,"<$1></$2>")},clone:function(e,t,n){var i,r,o,s,a,u=pe.contains(e.ownerDocument,e);if(de.html5Clone||pe.isXMLDoc(e)||!et.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(at.innerHTML=e.outerHTML,at.removeChild(o=at.firstChild)),!(de.noCloneEvent&&de.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pe.isXMLDoc(e)))for(i=f(o),a=f(e),s=0;null!=(r=a[s]);++s)i[s]&&S(r,i[s]);if(t)if(n)for(a=a||f(e),i=i||f(o),s=0;null!=(r=a[s]);s++)T(r,i[s]);else T(e,o);return i=f(o,"script"),i.length>0&&m(i,!u&&f(e,"script")),i=a=r=null,o},cleanData:function(e,t){for(var n,i,r,o,s=0,a=pe.expando,u=pe.cache,l=de.attributes,c=pe.event.special;null!=(n=e[s]);s++)if((t||$e(n))&&(r=n[a],o=r&&u[r])){if(o.events)for(i in o.events)c[i]?pe.event.remove(n,i):pe.removeEvent(n,i,o.handle);u[r]&&(delete u[r],l||"undefined"==typeof n.removeAttribute?n[a]=void 0:n.removeAttribute(a),ne.push(r))}}}),pe.fn.extend({domManip:N,detach:function(e){return D(this,e,!0)},remove:function(e){return D(this,e)},text:function(e){return _e(this,function(e){return void 0===e?pe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ie).createTextNode(e))},null,e,arguments.length)},append:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.appendChild(e)}})},prepend:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&pe.cleanData(f(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&pe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return pe.clone(this,e,t)})},html:function(e){return _e(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Xe,""):void 0;if("string"==typeof e&&!nt.test(e)&&(de.htmlSerialize||!et.test(e))&&(de.leadingWhitespace||!Be.test(e))&&!Ge[(Ve.exec(e)||["",""])[1].toLowerCase()]){e=pe.htmlPrefilter(e);
try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(pe.cleanData(f(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return N(this,arguments,function(t){var n=this.parentNode;pe.inArray(this,e)<0&&(pe.cleanData(f(this)),n&&n.replaceChild(t,this))},e)}}),pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){pe.fn[e]=function(e){for(var n,i=0,r=[],o=pe(e),s=o.length-1;s>=i;i++)n=i===s?this:this.clone(!0),pe(o[i])[t](n),se.apply(r,n.get());return this.pushStack(r)}});var ut,lt={HTML:"block",BODY:"block"},ct=/^margin/,dt=new RegExp("^("+Re+")(?!px)[a-z%]+$","i"),ht=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r},pt=ie.documentElement;!function(){function t(){var t,c,d=ie.documentElement;d.appendChild(u),l.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=r=a=!1,i=s=!0,e.getComputedStyle&&(c=e.getComputedStyle(l),n="1%"!==(c||{}).top,a="2px"===(c||{}).marginLeft,r="4px"===(c||{width:"4px"}).width,l.style.marginRight="50%",i="4px"===(c||{marginRight:"4px"}).marginRight,t=l.appendChild(ie.createElement("div")),t.style.cssText=l.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",l.style.width="1px",s=!parseFloat((e.getComputedStyle(t)||{}).marginRight),l.removeChild(t)),l.style.display="none",o=0===l.getClientRects().length,o&&(l.style.display="",l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",l.childNodes[0].style.borderCollapse="separate",t=l.getElementsByTagName("td"),t[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===t[0].offsetHeight,o&&(t[0].style.display="",t[1].style.display="none",o=0===t[0].offsetHeight)),d.removeChild(u)}var n,i,r,o,s,a,u=ie.createElement("div"),l=ie.createElement("div");l.style&&(l.style.cssText="float:left;opacity:.5",de.opacity="0.5"===l.style.opacity,de.cssFloat=!!l.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",de.clearCloneStyle="content-box"===l.style.backgroundClip,u=ie.createElement("div"),u.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",l.innerHTML="",u.appendChild(l),de.boxSizing=""===l.style.boxSizing||""===l.style.MozBoxSizing||""===l.style.WebkitBoxSizing,pe.extend(de,{reliableHiddenOffsets:function(){return null==n&&t(),o},boxSizingReliable:function(){return null==n&&t(),r},pixelMarginRight:function(){return null==n&&t(),i},pixelPosition:function(){return null==n&&t(),n},reliableMarginRight:function(){return null==n&&t(),s},reliableMarginLeft:function(){return null==n&&t(),a}}))}();var ft,mt,gt=/^(top|right|bottom|left)$/;e.getComputedStyle?(ft=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},mt=function(e,t,n){var i,r,o,s,a=e.style;return n=n||ft(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||pe.contains(e.ownerDocument,e)||(s=pe.style(e,t)),n&&!de.pixelMarginRight()&&dt.test(s)&&ct.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o),void 0===s?s:s+""}):pt.currentStyle&&(ft=function(e){return e.currentStyle},mt=function(e,t,n){var i,r,o,s,a=e.style;return n=n||ft(e),s=n?n[t]:void 0,null==s&&a&&a[t]&&(s=a[t]),dt.test(s)&&!gt.test(t)&&(i=a.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=i,o&&(r.left=o)),void 0===s?s:s+""||"auto"});var vt=/alpha\([^)]*\)/i,yt=/opacity\s*=\s*([^)]*)/i,wt=/^(none|table(?!-c[ea]).+)/,bt=new RegExp("^("+Re+")(.*)$","i"),kt={position:"absolute",visibility:"hidden",display:"block"},xt={letterSpacing:"0",fontWeight:"400"},qt=["Webkit","O","Moz","ms"],Et=ie.createElement("div").style;pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=mt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:de.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=pe.camelCase(t),u=e.style;if(t=pe.cssProps[a]||(pe.cssProps[a]=$(a)||a),s=pe.cssHooks[t]||pe.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:u[t];if(o=typeof n,"string"===o&&(r=Ie.exec(n))&&r[1]&&(n=h(e,t,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(pe.cssNumber[a]?"":"px")),de.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(e,n,i)))))try{u[t]=n}catch(e){}}},css:function(e,t,n,i){var r,o,s,a=pe.camelCase(t);return t=pe.cssProps[a]||(pe.cssProps[a]=$(a)||a),s=pe.cssHooks[t]||pe.cssHooks[a],s&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=mt(e,t,i)),"normal"===o&&t in xt&&(o=xt[t]),""===n||n?(r=parseFloat(o),n===!0||isFinite(r)?r||0:o):o}}),pe.each(["height","width"],function(e,t){pe.cssHooks[t]={get:function(e,n,i){return n?wt.test(pe.css(e,"display"))&&0===e.offsetWidth?ht(e,kt,function(){return I(e,t,i)}):I(e,t,i):void 0},set:function(e,n,i){var r=i&&ft(e);return O(e,n,i?R(e,t,i,de.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,r),r):0)}}}),de.opacity||(pe.cssHooks.opacity={get:function(e,t){return yt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=pe.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===pe.trim(o.replace(vt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=vt.test(o)?o.replace(vt,r):o+" "+r)}}),pe.cssHooks.marginRight=L(de.reliableMarginRight,function(e,t){return t?ht(e,{display:"inline-block"},mt,[e,"marginRight"]):void 0}),pe.cssHooks.marginLeft=L(de.reliableMarginLeft,function(e,t){return t?(parseFloat(mt(e,"marginLeft"))||(pe.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-ht(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px":void 0}),pe.each({margin:"",padding:"",border:"Width"},function(e,t){pe.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+je[i]+t]=o[i]||o[i-2]||o[0];return r}},ct.test(e)||(pe.cssHooks[e+t].set=O)}),pe.fn.extend({css:function(e,t){return _e(this,function(e,t,n){var i,r,o={},s=0;if(pe.isArray(t)){for(i=ft(e),r=t.length;r>s;s++)o[t[s]]=pe.css(e,t[s],!1,i);return o}return void 0!==n?pe.style(e,t,n):pe.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ze(this)?pe(this).show():pe(this).hide()})}}),pe.Tween=j,j.prototype={constructor:j,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(pe.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.options.duration?this.pos=t=pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=pe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){pe.fx.step[e.prop]?pe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[pe.cssProps[e.prop]]&&!pe.cssHooks[e.prop]?e.elem[e.prop]=e.now:pe.style(e.elem,e.prop,e.now+e.unit)}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},pe.fx=j.prototype.init,pe.fx.step={};var Tt,St,Nt=/^(?:toggle|show|hide)$/,Dt=/queueHooks$/;pe.Animation=pe.extend(B,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return h(n.elem,e,Ie.exec(t),n),n}]},tweener:function(e,t){pe.isFunction(e)?(t=e,e=["*"]):e=e.match(Ce);for(var n,i=0,r=e.length;r>i;i++)n=e[i],B.tweeners[n]=B.tweeners[n]||[],B.tweeners[n].unshift(t)},prefilters:[V],prefilter:function(e,t){t?B.prefilters.unshift(e):B.prefilters.push(e)}}),pe.speed=function(e,t,n){var i=e&&"object"==typeof e?pe.extend({},e):{complete:n||!n&&t||pe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!pe.isFunction(t)&&t};return i.duration=pe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in pe.fx.speeds?pe.fx.speeds[i.duration]:pe.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){pe.isFunction(i.old)&&i.old.call(this),i.queue&&pe.dequeue(this,i.queue)},i},pe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ze).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=pe.isEmptyObject(e),o=pe.speed(t,n,i),s=function(){var t=B(this,pe.extend({},e),o);(r||pe._data(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=pe.timers,s=pe._data(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&Dt.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||pe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=pe._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=pe.timers,s=i?i.length:0;for(n.finish=!0,pe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),pe.each(["toggle","show","hide"],function(e,t){var n=pe.fn[t];pe.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(_(t,!0),e,i,r)}}),pe.each({slideDown:_("show"),slideUp:_("hide"),slideToggle:_("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){pe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),pe.timers=[],pe.fx.tick=function(){var e,t=pe.timers,n=0;for(Tt=pe.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||pe.fx.stop(),Tt=void 0},pe.fx.timer=function(e){pe.timers.push(e),e()?pe.fx.start():pe.timers.pop()},pe.fx.interval=13,pe.fx.start=function(){St||(St=e.setInterval(pe.fx.tick,pe.fx.interval))},pe.fx.stop=function(){e.clearInterval(St),St=null},pe.fx.speeds={slow:600,fast:200,_default:400},pe.fn.delay=function(t,n){return t=pe.fx?pe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e,t=ie.createElement("input"),n=ie.createElement("div"),i=ie.createElement("select"),r=i.appendChild(ie.createElement("option"));n=ie.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",de.getSetAttribute="t"!==n.className,de.style=/top/.test(e.getAttribute("style")),de.hrefNormalized="/a"===e.getAttribute("href"),de.checkOn=!!t.value,de.optSelected=r.selected,de.enctype=!!ie.createElement("form").enctype,i.disabled=!0,de.optDisabled=!r.disabled,t=ie.createElement("input"),t.setAttribute("value",""),de.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),de.radioValue="t"===t.value}();var Ct=/\r/g,Mt=/[\x20\t\r\n\f]+/g;pe.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=pe.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,pe(this).val()):e,null==r?r="":"number"==typeof r?r+="":pe.isArray(r)&&(r=pe.map(r,function(e){return null==e?"":e+""})),t=pe.valHooks[this.type]||pe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=pe.valHooks[r.type]||pe.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(Ct,""):null==n?"":n)):void 0}}),pe.extend({valHooks:{option:{get:function(e){var t=pe.find.attr(e,"value");return null!=t?t:pe.trim(pe.text(e)).replace(Mt," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,u=0>r?a:o?r:0;a>u;u++)if(n=i[u],(n.selected||u===r)&&(de.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!pe.nodeName(n.parentNode,"optgroup"))){if(t=pe(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=pe.makeArray(t),s=r.length;s--;)if(i=r[s],pe.inArray(pe.valHooks.option.get(i),o)>-1)try{i.selected=n=!0}catch(e){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),pe.each(["radio","checkbox"],function(){pe.valHooks[this]={set:function(e,t){return pe.isArray(t)?e.checked=pe.inArray(pe(e).val(),t)>-1:void 0}},de.checkOn||(pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Lt,$t,At=pe.expr.attrHandle,Ot=/^(?:checked|selected)$/i,Rt=de.getSetAttribute,It=de.input;pe.fn.extend({attr:function(e,t){return _e(this,pe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){pe.removeAttr(this,e)})}}),pe.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?pe.prop(e,t,n):(1===o&&pe.isXMLDoc(e)||(t=t.toLowerCase(),r=pe.attrHooks[t]||(pe.expr.match.bool.test(t)?$t:Lt)),void 0!==n?null===n?void pe.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=pe.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!de.radioValue&&"radio"===t&&pe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(Ce);if(o&&1===e.nodeType)for(;n=o[r++];)i=pe.propFix[n]||n,pe.expr.match.bool.test(n)?It&&Rt||!Ot.test(n)?e[i]=!1:e[pe.camelCase("default-"+n)]=e[i]=!1:pe.attr(e,n,""),e.removeAttribute(Rt?n:i)}}),$t={set:function(e,t,n){return t===!1?pe.removeAttr(e,n):It&&Rt||!Ot.test(n)?e.setAttribute(!Rt&&pe.propFix[n]||n,n):e[pe.camelCase("default-"+n)]=e[n]=!0,n}},pe.each(pe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=At[t]||pe.find.attr;It&&Rt||!Ot.test(t)?At[t]=function(e,t,i){var r,o;return i||(o=At[t],At[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,At[t]=o),r}:At[t]=function(e,t,n){return n?void 0:e[pe.camelCase("default-"+t)]?t.toLowerCase():null}}),It&&Rt||(pe.attrHooks.value={set:function(e,t,n){return pe.nodeName(e,"input")?void(e.defaultValue=t):Lt&&Lt.set(e,t,n)}}),Rt||(Lt={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},At.id=At.name=At.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},pe.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Lt.set},pe.attrHooks.contenteditable={set:function(e,t,n){Lt.set(e,""!==t&&t,n)}},pe.each(["width","height"],function(e,t){pe.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),de.style||(pe.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var jt=/^(?:input|select|textarea|button|object)$/i,zt=/^(?:a|area)$/i;pe.fn.extend({prop:function(e,t){return _e(this,pe.prop,e,t,arguments.length>1)},removeProp:function(e){return e=pe.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),pe.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&pe.isXMLDoc(e)||(t=pe.propFix[t]||t,r=pe.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=pe.find.attr(e,"tabindex");return t?parseInt(t,10):jt.test(e.nodeName)||zt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),de.hrefNormalized||pe.each(["href","src"],function(e,t){pe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),de.optSelected||(pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pe.propFix[this.toLowerCase()]=this}),de.enctype||(pe.propFix.enctype="encoding");var _t=/[\t\r\n\f]/g;pe.fn.extend({addClass:function(e){var t,n,i,r,o,s,a,u=0;if(pe.isFunction(e))return this.each(function(t){pe(this).addClass(e.call(this,t,H(this)))});if("string"==typeof e&&e)for(t=e.match(Ce)||[];n=this[u++];)if(r=H(n),i=1===n.nodeType&&(" "+r+" ").replace(_t," ")){for(s=0;o=t[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=pe.trim(i),r!==a&&pe.attr(n,"class",a)}return this},removeClass:function(e){var t,n,i,r,o,s,a,u=0;if(pe.isFunction(e))return this.each(function(t){pe(this).removeClass(e.call(this,t,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ce)||[];n=this[u++];)if(r=H(n),i=1===n.nodeType&&(" "+r+" ").replace(_t," ")){for(s=0;o=t[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");a=pe.trim(i),r!==a&&pe.attr(n,"class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):pe.isFunction(e)?this.each(function(n){pe(this).toggleClass(e.call(this,n,H(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=pe(this),o=e.match(Ce)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=H(this),t&&pe._data(this,"__className__",t),pe.attr(this,"class",t||e===!1?"":pe._data(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+H(n)+" ").replace(_t," ").indexOf(t)>-1)return!0;return!1}}),pe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){pe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Pt=e.location,Vt=pe.now(),Ft=/\?/,Bt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;pe.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=pe.trim(t+"");return r&&!pe.trim(r.replace(Bt,function(e,t,r,o){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!o-!r,"")}))?Function("return "+r)():pe.error("Invalid JSON: "+t)},pe.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new e.DOMParser,n=i.parseFromString(t,"text/xml")):(n=new e.ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(e){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||pe.error("Invalid XML: "+t),n};var Ht=/#.*$/,Gt=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Yt=/^\/\//,Zt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Jt={},Qt={},Xt="*/".concat("*"),en=Pt.href,tn=Zt.exec(en.toLowerCase())||[];pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:en,type:"GET",isLocal:Kt.test(tn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":pe.parseJSON,"text xml":pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?K(K(e,pe.ajaxSettings),t):K(pe.ajaxSettings,e)},ajaxPrefilter:G(Jt),ajaxTransport:G(Qt),ajax:function(t,n){function i(t,n,i,r){var o,d,y,w,k,q=n;2!==b&&(b=2,u&&e.clearTimeout(u),c=void 0,a=r||"",x.readyState=t>0?4:0,o=t>=200&&300>t||304===t,i&&(w=U(h,x,i)),w=Y(h,w,x,o),o?(h.ifModified&&(k=x.getResponseHeader("Last-Modified"),k&&(pe.lastModified[s]=k),k=x.getResponseHeader("etag"),k&&(pe.etag[s]=k)),204===t||"HEAD"===h.type?q="nocontent":304===t?q="notmodified":(q=w.state,d=w.data,y=w.error,o=!y)):(y=q,!t&&q||(q="error",0>t&&(t=0))),x.status=t,x.statusText=(n||q)+"",o?m.resolveWith(p,[d,q,x]):m.rejectWith(p,[x,q,y]),x.statusCode(v),v=void 0,l&&f.trigger(o?"ajaxSuccess":"ajaxError",[x,h,o?d:y]),g.fireWith(p,[x,q]),l&&(f.trigger("ajaxComplete",[x,h]),--pe.active||pe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,s,a,u,l,c,d,h=pe.ajaxSetup({},n),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?pe(p):pe.event,m=pe.Deferred(),g=pe.Callbacks("once memory"),v=h.statusCode||{},y={},w={},b=0,k="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!d)for(d={};t=Wt.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=w[n]=w[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||k;return c&&c.abort(t),i(0,t),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||en)+"").replace(Ht,"").replace(Yt,tn[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=pe.trim(h.dataType||"*").toLowerCase().match(Ce)||[""],null==h.crossDomain&&(r=Zt.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===tn[1]&&r[2]===tn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(tn[3]||("http:"===tn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=pe.param(h.data,h.traditional)),W(Jt,h,n,x),2===b)return x;l=pe.event&&h.global,l&&0===pe.active++&&pe.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ut.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(Ft.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Gt.test(s)?s.replace(Gt,"$1_="+Vt++):s+(Ft.test(s)?"&":"?")+"_="+Vt++)),h.ifModified&&(pe.lastModified[s]&&x.setRequestHeader("If-Modified-Since",pe.lastModified[s]),pe.etag[s]&&x.setRequestHeader("If-None-Match",pe.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Xt+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)x.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(p,x,h)===!1||2===b))return x.abort();k="abort";for(o in{success:1,error:1,complete:1})x[o](h[o]);if(c=W(Qt,h,n,x)){if(x.readyState=1,l&&f.trigger("ajaxSend",[x,h]),2===b)return x;h.async&&h.timeout>0&&(u=e.setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,c.send(y,i)}catch(e){if(!(2>b))throw e;i(-1,e)}}else i(-1,"No Transport");return x},getJSON:function(e,t,n){return pe.get(e,t,n,"json")},getScript:function(e,t){return pe.get(e,void 0,t,"script")}}),pe.each(["get","post"],function(e,t){pe[t]=function(e,n,i,r){return pe.isFunction(n)&&(r=r||i,i=n,n=void 0),pe.ajax(pe.extend({url:e,type:t,dataType:r,data:n,success:i},pe.isPlainObject(e)&&e))}}),pe._evalUrl=function(e){return pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},pe.fn.extend({wrapAll:function(e){if(pe.isFunction(e))return this.each(function(t){pe(this).wrapAll(e.call(this,t))});if(this[0]){var t=pe(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return pe.isFunction(e)?this.each(function(t){pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=pe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=pe.isFunction(e);return this.each(function(n){pe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){pe.nodeName(this,"body")||pe(this).replaceWith(this.childNodes)}).end()}}),pe.expr.filters.hidden=function(e){return de.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:J(e)},pe.expr.filters.visible=function(e){return!pe.expr.filters.hidden(e)};var nn=/%20/g,rn=/\[\]$/,on=/\r?\n/g,sn=/^(?:submit|button|image|reset|file)$/i,an=/^(?:input|select|textarea|keygen)/i;pe.param=function(e,t){var n,i=[],r=function(e,t){t=pe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=pe.ajaxSettings&&pe.ajaxSettings.traditional),pe.isArray(e)||e.jquery&&!pe.isPlainObject(e))pe.each(e,function(){r(this.name,this.value)});else for(n in e)Q(n,e[n],t,r);return i.join("&").replace(nn,"+")},pe.fn.extend({serialize:function(){return pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pe.prop(this,"elements");return e?pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pe(this).is(":disabled")&&an.test(this.nodeName)&&!sn.test(e)&&(this.checked||!Pe.test(e))}).map(function(e,t){var n=pe(this).val();return null==n?null:pe.isArray(n)?pe.map(n,function(e){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),pe.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return this.isLocal?ee():ie.documentMode>8?X():/^(get|post|head|put|delete|options)$/i.test(this.type)&&X()||ee()}:X;var un=0,ln={},cn=pe.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in ln)ln[e](void 0,!0)}),de.cors=!!cn&&"withCredentials"in cn,cn=de.ajax=!!cn,cn&&pe.ajaxTransport(function(t){if(!t.crossDomain||de.cors){var n;return{send:function(i,r){var o,s=t.xhr(),a=++un;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)void 0!==i[o]&&s.setRequestHeader(o,i[o]+"");s.send(t.hasContent&&t.data||null),n=function(e,i){var o,u,l;if(n&&(i||4===s.readyState))if(delete ln[a],n=void 0,s.onreadystatechange=pe.noop,i)4!==s.readyState&&s.abort();else{l={},o=s.status,"string"==typeof s.responseText&&(l.text=s.responseText);try{u=s.statusText}catch(e){u=""}o||!t.isLocal||t.crossDomain?1223===o&&(o=204):o=l.text?200:404}l&&r(o,u,l,s.getAllResponseHeaders())},t.async?4===s.readyState?e.setTimeout(n):s.onreadystatechange=ln[a]=n:n()},abort:function(){n&&n(void 0,!0)}}}}),pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return pe.globalEval(e),e}}}),pe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),pe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ie.head||pe("head")[0]||ie.documentElement;return{send:function(i,r){t=ie.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var dn=[],hn=/(=)\?(?=&|$)|\?\?/;pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=dn.pop()||pe.expando+"_"+Vt++;return this[e]=!0,e}}),pe.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(hn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&hn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=pe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(hn,"$1"+r):t.jsonp!==!1&&(t.url+=(Ft.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||pe.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){void 0===o?pe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,dn.push(r)),s&&pe.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),pe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ie;var i=xe.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=v([e],t,r),r&&r.length&&pe(r).remove(),pe.merge([],i.childNodes))};var pn=pe.fn.load;pe.fn.load=function(e,t,n){if("string"!=typeof e&&pn)return pn.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>-1&&(i=pe.trim(e.slice(a,e.length)),e=e.slice(0,a)),pe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&pe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?pe("<div>").append(pe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pe.fn[t]=function(e){return this.on(t,e)}}),pe.expr.filters.animated=function(e){return pe.grep(pe.timers,function(t){return e===t.elem}).length},pe.offset={setOffset:function(e,t,n){var i,r,o,s,a,u,l,c=pe.css(e,"position"),d=pe(e),h={};"static"===c&&(e.style.position="relative"),a=d.offset(),o=pe.css(e,"top"),u=pe.css(e,"left"),l=("absolute"===c||"fixed"===c)&&pe.inArray("auto",[o,u])>-1,l?(i=d.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(u)||0),pe.isFunction(t)&&(t=t.call(e,n,pe.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):d.css(h)}},pe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){pe.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(t=o.documentElement,pe.contains(t,r)?("undefined"!=typeof r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=te(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0
},i=this[0];return"fixed"===pe.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),pe.nodeName(e[0],"html")||(n=e.offset()),n.top+=pe.css(e[0],"borderTopWidth",!0),n.left+=pe.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-pe.css(i,"marginTop",!0),left:t.left-n.left-pe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!pe.nodeName(e,"html")&&"static"===pe.css(e,"position");)e=e.offsetParent;return e||pt})}}),pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);pe.fn[e]=function(i){return _e(this,function(e,i,r){var o=te(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?pe(o).scrollLeft():r,n?r:pe(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),pe.each(["top","left"],function(e,t){pe.cssHooks[t]=L(de.pixelPosition,function(e,n){return n?(n=mt(e,t),dt.test(n)?pe(e).position()[t]+"px":n):void 0})}),pe.each({Height:"height",Width:"width"},function(e,t){pe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){pe.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return _e(this,function(t,n,i){var r;return pe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?pe.css(t,n,s):pe.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),pe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),pe.fn.size=function(){return this.length},pe.fn.andSelf=pe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pe});var fn=e.jQuery,mn=e.$;return pe.noConflict=function(t){return e.$===pe&&(e.$=mn),t&&e.jQuery===pe&&(e.jQuery=fn),pe},t||(e.jQuery=e.$=pe),pe}),define("ui/toast",["jquery","core/type"],function(e,t){function n(){var e;return e=i.$template.css("transition"),void 0===e?(console.error("could not read any transition lengths. What's your browser?"),.2):Number(e.replace(/^[^0-9]*([0-9.]+)s.*$/,"$1"))}function i(e,t){this.message=e,this.duration=t||i.SHORT,this.$toast=void 0,r?this.display():o.push(this)}var r,o;return r=!1,o=[],i.fadeinDuration=.2,i.fadeoutDuration=.2,i.$container=void 0,i.$template=void 0,i.prototype.display=function(){var e;return r?this.$toast?void console.error("toast is already visible"):(e=this.$toast=i.$template.clone().removeClass("hidden"),t.isString(this.message)?this.$toast.text(this.message):this.$toast.append(this.message),i.$container.append(this.$toast),i.$container.append("<br>"),window.setTimeout(function(){e.addClass("toast")},10),void(this.duration>0?(window.setTimeout(this.close.bind(this),1e3*(this.duration+i.fadeinDuration)),e.addClass("temporary")):e.addClass("infinite"))):void console.error("Cannot display Toast: Toast.init() has not been called yet.")},i.prototype.close=function(){var e;r&&this.$toast?(e=this.$toast,e.removeClass("toast"),window.setTimeout(function(){e.next().remove(),e.remove()},1e3*i.fadeoutDuration),this.$toast=void 0):o&&o.indexOf(this)!==-1&&o.splice(o.indexOf(this),1)},i.init=function(){i.$container=e('<div id="toasts">'),i.$template=e('<div class="hidden">ERROR</div>'),i.$container.append(i.$template),e("body").append(i.$container),"fixed"!==e("#toasts").css("position")?console.error("Toast: stylesheet not found. Initialization failed."):(i.fadeoutDuration=n(),i.$template.addClass("toast"),i.fadeinDuration=n(),i.fadeinDuration===Number(i.fadeinDuration)&&isFinite(i.fadeinDuration)&&!isNaN(i.fadeinDuration)||(console.error("Toast.fadeinDuration: not a valid number: "+i.fadeinDuration),i.$template.removeClass("hidden")),i.fadeoutDuration===Number(i.fadeoutDuration)&&isFinite(i.fadeoutDuration)&&!isNaN(i.fadeoutDuration)||(console.error("Toast.fadeoutDuration: not a valid number: "+i.fadeoutDuration),i.$template.removeClass("hidden"))),r=!0,o.forEach(function(e){e.display()},this),o=void 0},i.closeTemporaryToasts=function(){i.$container.find(".toast.temporary").map(function(){var t=e(this);t.next().hide(),t.hide()})},i.SHORT=2,i.LONG=5,i.INFINITE=-1,i}),define("ui/legacyloadermodel",["lib/extend","core/model","ui/state","ui/teammodel","ui/playermodel","options","presets","tournament/tournamentindex","core/matchmodel","core/matchresult","core/byeresult","core/correctionmodel","ui/toast","core/rle"],function(e,t,n,i,r,o,s,a,u,l,c,d,h,p){function f(){f.superconstructor.call(this)}return e(f,t),f.prototype.load=function(e){var t,i;return n.clear(),console.log("starting conversion"),t=[],i=[],this.loadOptions(e.options),this.loadTeams(e.team),this.loadTournaments(e.tournaments,t,i),this.loadHistory(e.history,t),this.loadVotes(t,i),this.createMissingObjects(),console.log("conversion to format 1.5.0 successful"),!0},f.prototype.loadTeams=function(e){var t;console.log("converting teams"),t=JSON.parse(e),t.forEach(function(e){var t,o;t=e.names.map(function(e){return new r(e)}),o=new i(t),n.teams.push(o),console.log("converting team "+o.getID()+": "+e.names.join(", "))}),console.log("conversion finished: "+n.teams.length+" teams converted")},f.prototype.loadOptions=function(e){var t;if(t=JSON.parse(e),void 0===t.savefile){if("boule"!==s.target)throw new h("cannot load pre-1.4 saves with this target: "+s.target,h.LONG),new Error("cannot load pre-1.4 saves with this target: "+s.target)}else if(t.savefile!==s.target+".json")throw new h("cannot convert "+t.savefile.replace(/.json$/,"")+" to "+s.target,h.LONG),new Error("cannot convert "+t.savefile.replace(/.json$/,"")+" to "+s.target);console.log("converting options"),o.fromBlob(e),console.log("converting teamsize"),n.teamsize.set(o.teamsize||1),console.log("conversion finished: options")},f.prototype.loadTournaments=function(e,t,i){var r,o,s;console.log("converting tournaments"),r=JSON.parse(e),o=[],s=[],r.forEach(function(e,r){var o,l,c,d,h,p,f,m,g,v;return l=e[0],c=e[1],d=e[2],h=e[3],p=e[4],f=e[5],console.log("converting tournament "+r+": "+c),g=d?JSON.parse(d):void 0,t[r]=g,i[r]=p,m={swiss:["wins","buchholz","finebuchholz","saldo","votes"],ko:["ko"]}[l],(o=a.createTournament(l,m))?(o.getName().set(c),h.forEach(o.addTeam.bind(o)),g?(g.games&&g.games.length>0?o.state.forceState("running"):o.state.forceState("initial"),"swiss"===l&&(o.round=g.round-1),console.log("converting tournament matches"),g.games.forEach(function(e){var t,n,i,r;t=[e.teams[0][0],e.teams[1][0]],i=e.id,"swiss"===l?r=o.round:(r=g.roundids[t[0]],i+=1),n=new u(t,i,r),console.log("converting match "+r+":"+i+": "+t.join(" vs. ")),o.matches.push(n)})):o.state.forceState("finished"),console.log("converted tournament state: "+o.state.get()),void 0===f||null===f?v=0:(console.log("converted tournament's parent: "+f),v=s[f],s[f]+=o.getTeams().length),s[r]=v,console.log("converted tournament range: "+v+"-"+(v+o.getTeams().length)),n.tournaments.push(o,v),void(d||(console.log("closing tournament "+r),n.tournaments.closeTournament(r)))):void console.error("TOURNAMENT SYSTEM NOT SUPPORTED YET: "+l)}),console.log("conversion finished: tournaments")},f.prototype.loadHistory=function(e,t){var i=JSON.parse(e);console.log("converting history"),i.forEach(function(e,i){function r(e){var t,n,i,r,o;return n=[e[0],e[1]],i=[e[2],e[3]],o=e[4],r=e[5],o>a&&(a=o),"ko"===p&&(r+=1),n=n.map(s.teams.indexOf.bind(s.teams)),e=new u(n,r,o),t=new l(e,i)}var s,a,h,p;console.log("converting history for tournament "+i),h=t[i],s=n.tournaments.get(i),a=s.round,p=s.SYSTEM,e.games&&e.games.length>0&&("initial"===s.state.get()&&s.state.forceState("idle"),e.games.forEach(function(e){var t=r(e);console.log("converting match result "+t.getID()+": "+t.teams.join(" vs. ")+":  "+t.score.join(":")),s.history.push(t),s.ranking.result(t)}),console.log("conversion: "+s.history.length+" results converted"),"swiss"===s.SYSTEM&&a>s.round&&(s.round=a)),e.corrections&&e.corrections.forEach(function(e,t){var n,i,o;n=r(e[0]),i=r(e[1]),o=new d(n,i),console.log("converting correction "+t+": "+n.teams.join(" vs. ")+": "),s.corrections.push(o)}),console.log("conversion finished: "+s.corrections.length+" corrections converted"),e.votes.forEach(function(e){var t,n,i,r,a;t=e[0],n=e[1],i=e[2],a=s.getTeams().length>>1,0===t&&(r=new c(n,[o.byepointswon,o.byepointslost],a,i),console.log("converting bye for team "+n),s.history.push(r),"swiss"===s.SYSTEM&&i===s.getRound()&&s.votes.bye.push(n),s.ranking.bye(n))})}),console.log("conversion finished: history")},f.prototype.createMissingObjects=function(){console.log("conversion: creating missing tournament objects"),n.tournaments.map(function(e){this["createMissingObjects"+e.SYSTEM](e)},this),console.log("conversion finished: missing tournament objects")},f.prototype.createMissingObjectsko=function(e){console.log("conversion: creating missing objects for tournament "+e.getID()+" ("+e.getName().get()+")"),console.log("conversion: finding dangling teams"),e.createWaitingMatches(),console.log("conversion: creating missing ko placeholder matches"),e.createPlaceholderMatches()},f.prototype.createMissingObjectsswiss=function(e){console.log("conversion: no need missing objects for swiss tournament "+e.getID()+" ("+e.getName().get()+")")},f.prototype.loadVotes=function(e,t){console.log("converting votes"),e.forEach(function(e,i){var r,o,s,a,u,l;if(console.log("converting votes of tournament "+i),r=n.tournaments.get(i),s=t[i],l=r.getRanking().get().displayOrder,o=r.SYSTEM,e)console.log("converting votes from tournament data"),e.upvote&&(a=p.decode(e.upvote)),e.downvote&&(a=p.decode(e.downvote));else{if(!s)throw new h("tournament "+i+" contains neither tournament nor ranking blob",h.LONG),new Error("tournament "+i+" contains neither tournament nor ranking blob");console.log("converting votes from ranking cache"),a=s.upvote,u=s.downvote}"swiss"===o&&(r.ranking.upvotes&&a&&a.forEach(function(e,t){var n=l[t];e>0&&(console.log("converting "+e+" upvotes for team "+n),r.ranking.upvotes.set(n,r.ranking.upvotes.get(n)+e))}),r.ranking.downvotes&&u&&u.forEach(function(e,t){var n=l[t];e>0&&(console.log("converting "+e+" downvotes for team "+n),r.ranking.downvotes.set(n,r.ranking.downvotes.get(n)+e))})),console.log("conversion finished: votes of tournament "+i),console.log("updating the ranking. You know... for safety and stuff."),console.log(""),console.log("ok, I admit it. It is for the upvotes and downvotes."),r.ranking.emit("recalc"),r.ranking.invalidate()}),console.log("conversion finished: votes")},f}),define("ui/legacystoragekeyconverter",["timemachine/commitmodel","presets"],function(e,t){function n(){}var i=new RegExp("^"+t.target+"s?tournament$");return n.prototype.convertAll=function(){var e,t;e=window.localStorage?Object.keys(window.localStorage):[],t=e.filter(i.test.bind(i)),t.forEach(this.convert.bind(this))},n.prototype.convert=function(t){var n,i;return!t||!!window.localStorage&&((n=window.localStorage[t])?(i=e.createRoot(n,"imported_"+t),!(!i||!i.isValid())&&(localStorage.removeItem(t),!0)):(window.localStorage.removeItem(t),!0))},n}),define("core/controller",[],function(){function e(e){this.model=e.model,this.view=e}return e.prototype.destroy=function(){},e}),define("core/view",["lib/extend","core/listener","core/model"],function(e,t,n){function i(e,t){e=e||new n,i.superconstructor.call(this,e),void 0!==t&&0!==t.length||(console.error("View: $view is empty or undefined:"),console.error(t),t&&t.selector&&console.error(t?"selector: "+t.selector:"")),this.model=e,this.$view=t}return e(i,t),i.prototype.reset=function(){},i.prototype.update=function(){},i.prototype.destroy=function(){i.superclass.destroy.call(this),this.$view.remove()},i}),define("ui/inputview",["lib/extend","core/view"],function(e,t){function n(e){n.superconstructor.call(this,void 0,e)}return e(n,t),n.prototype.onreset=function(){this.$view.val("")},n}),define("strings",[],function(){return{teamsicon:"teams2",variant:"Test"}}),define("ui/strings",["strings"],function(e){var t;return t={autosaveoff:"Automatisches  Speichern aus",autosaveon:"Automatisches Speichern an",autoupdateoff:"Automatische Aktualisierung aus",autoupdateon:"Automatische Aktualisierung an",clearstorage:"Wirklich alle Turniere löschen?",confirmtreeremoval:'Das Turnier "%s" wirklich löschen?',confirmactivetreeremoval:'Das laufende Turnier "%s" wirklich löschen?',confirmleave:"Fenster schließen, ohne das Turnier zu speichern?",upvote:"▲",downvote:"▼",byevote:"∅",byename:"Freilos",byeid:"∅",onlyonefile:"Zu viele Dateien. Bitte nur eine Datei laden",nofiles:"Keine Dateien ausgewählt",fileabort:"Lesen abgebrochen",fileerror:"Lesefehler",filenotfound:"Datei wurde nicht gefunden",filenotreadable:"Datei ist nicht lesbar",gamefinished:"Spiel beendet",invalidresult:"Ungültiges Ergebnis",loaded:"Turnier geladen",loadfailed:"Ladevorgang fehlgeschlagen!",newtournament:"Neues Turnier begonnen",notournament:"Noch kein Turnier gestartet",notimplemented:"Funktion noch nicht verfügbar",pageload:"Seite geladen",pointchangeaborted:"Änderung verworfen",pointchangeapplied:"Änderung gespeichert",toolatetournamentfinished:"Neues Ergebnis beeinflusst Folgerunden nicht!",rankingupdate:"Ranking wurde berechnet",roundfailed:"Auslosung fehlgeschlagen",roundfinished:"%s. Runde abgeschlossen",roundstarted:"%s. Runde ausgelost",roundrunning:"Runde %s läuft",registrationclosed:"Registrierung geschlossen",saved:"gespeichert",savefailed:"Speichern fehlgeschlagen",exportfailed:"Export fehlgeschlagen",startfailed:"Auslosung fehlgeschlagen. Zu wenige Teams?",teamadded:"Team %s registriert",notenoughteams:"Zu wenige Teams",teamtext:"Spieler",teamstext:"Spieler",namechanged:"Umbenannt: %s",namechangeaborted:"Name verworfen",teamsnotempty:"Teilnehmer wurden schon eingetragen",emptyname:"N.N.",differentteamsizes:"Teams haben unterschiedliche Größe",invalidteamsize:"Unzulässige Spielerzahl pro Team",alltabsreloaded:"Alle Tabs neu geladen",modsvariableadded:"window.mods erstellt",tournamentfinished:"Turnier beendet",autocompleteloaded:"Namensvorschläge geladen",autocompletereloadfailed:"Konnte Namensvorschläge nicht laden",fileempty:"Datei ist leer",teamdeleted:"Anmeldung %s gelöscht",deleteteamconfirmation:"Anmeldung %1 (%2) löschen?",deleteallteamsconfirmation:"Wirklich alle Anmeldungen löschen?",nofilereader:"Dieser Browser kann keine Speicherstände laden!",nojson:"Dieser Browser kann keine Speicherstände erstellen!",nostorage:"Dieser Browser kann keine Spielstände speichern!",updatedownloading:"Neue Version wird geladen...",updatefailed:"Fehler beim Download der neuen Version",updateavailable:"Neu laden für neue Version",dev:"Entwicklerversion",rc:"Versionsvorschau",reset:"Gespeicherte Daten gelöscht",defaultnameswiss:"Schweizer System",defaultnameko:"KO-Turnier",defaultnamepoule:"Poule-System",defaultnameround:"Rundenturnier",defaultnamesupermelee:"Supermelee",offlineconfirmexit:"Tuvero ist gerade nicht offline verfügbar. Beenden?",winstatustrue:"S",winstatusfalse:"N",winstatusundefined:"",nomanifest:"Offline-Modus deaktiviert",tournamentalreadyfinished:"Turnier ist schon beendet",gamesstillrunning:"Es gibt noch offene Spiele",tournamentstarted:"Turnier gestartet",tabupdateerror:"Fehler bei Aktualisierung vom %s-Tab",tab_teams:"Mannschaften",tab_new:"Turniersysteme",tab_games:"Laufende Spiele",tab_ranking:"Platzierungen",tab_history:"Spielverlauf",tab_debug:"Debugging Console",tab_settings:"Optionen und Einstellungen",tab_about:"Über...",nodata:"Keine Daten",svgns:"http://www.w3.org/2000/svg",firstplace:"1. Platz",thirdplace:"3. Platz",ranking_numgames:"Spiele",ranking_wins:"Siege",ranking_points:"Kleine Punkte",ranking_lostpoints:"Gegnerpunkte",ranking_saldo:"Saldo-Punkte",ranking_buchholz:"Buchholz-Punkte",ranking_finebuchholz:"Feinbuchholz-Punkte",ranking_sonneborn:"Sonneborn-Berger-Zahl",ranking_id:"Startnummer",ranking_ko:"KO-Wertung",ranking_headtohead:"Direkter Vergleich",ranking_tac:"TAC-Punkte",ranking_votes:"Lose (nur Anzeige)",ranking_ranks:"Platz",ranking_short_numgames:"Sp.",ranking_short_wins:"S",ranking_short_points:"P",ranking_short_lostpoints:"GP",ranking_short_saldo:"SP",ranking_short_buchholz:"BH",ranking_short_finebuchholz:"FBH",ranking_short_sonneborn:"SB",ranking_short_id:"No.",ranking_short_ko:"KO",ranking_short_headtohead:"VGL",ranking_short_tac:"TAC",ranking_short_votes:"L",ranking_short_ranks:"Pl.",ranking_medium_numgames:"Spiele",ranking_medium_wins:"Siege",ranking_medium_points:"Punkte",ranking_medium_lostpoints:"Gegnerpunkte",ranking_medium_saldo:"Saldo",ranking_medium_buchholz:"Buchholz",ranking_medium_finebuchholz:"Feinbuchholz",ranking_medium_sonneborn:"SB-Zahl",ranking_medium_id:"Startnummer",ranking_medium_ko:"KO-Wertung",ranking_medium_headtohead:"Vergleich",ranking_medium_tac:"TAC",ranking_medium_votes:"Lose",ranking_medium_ranks:"Platz",tournamenterrorprefix:"Turnierfehler",oldsaveformat:"Fehler beim Umwandeln eines alten 1.4-Speicherstandes",tournament_initial:"Unterturnier erstellt",tournament_running:"Runde gestartet",tournament_idle:"Runde beendet",tournament_finished:"Unterturnier beendet",namechangeprompt:"Neuen Namen eingeben",teamdeleteprompt:"Zum Löschen Team anklicken",csvheader_teams:"No.,Name",csvheader_history:'Runde,Spielno.,"No. 1","No. 2","Punkte 1","Punkte 2"',csvheader_ranking:"Platz,No.",popout_adblocked:"Ein Werbeblocker verhindert das Öffnen eines Fensters",display_error:"Anzeigefehler. Bitte neu laden."},Object.keys(e).forEach(function(n){t[n]=e[n]}),t}),define("ui/fileloadcontroller",["jquery","lib/extend","core/controller","ui/inputview","ui/toast","ui/strings"],function(e,t,n,i,r,o){function s(t){var n,r;r=new i(e("<input>").attr("type","file")),s.superconstructor.call(this,r),n=this,this.reader=void 0,this.file=void 0,this.view.$view.change(function(e){n.initFileRead(e.target.files[0])}),t.on("dragover",this.buttonDragOver.bind(this)),t.on("drop",this.buttonDrop.bind(this)),t.click(function(){n.view.$view.click()})}return t(s,n),s.prototype.unreadFile=function(){console.warn("FileLoadController.unreadfile() called but not overloaded")},s.prototype.readFile=function(e){console.log(e)},s.prototype.buttonDragOver=function(e){e.originalEvent.dataTransfer.dropEffect="copy"},s.prototype.buttonDrop=function(e){var t=e.originalEvent.dataTransfer.files;return t.length<1?void new r(o.nofiles,r.LONG):t.length>1?void new r(o.onlyonefile,r.LONG):void(t[0]?this.initFileRead(t[0]):new r(o.nofiles,r.LONG))},s.prototype.initFileRead=function(e){this.file=e,this.reader=new FileReader,this.reader.onerror=this.loadError.bind(this),this.reader.onabort=this.loadAbort.bind(this),this.reader.onload=this.loadSuccess.bind(this),this.reader.readAsText(this.file)},s.prototype.loadError=function(e){switch(this.unreadFile(),e.target.error.code){case e.target.error.NOT_FOUND_ERR:new r(o.filenotfound);break;case e.target.error.NOT_READABLE_ERR:new r(o.filenotreadable);break;case e.target.error.ABORT_ERR:break;default:new r(o.fileerror,r.LONG)}this.model.emit("reset")},s.prototype.loadSuccess=function(e){e.target===this.reader?this.readFile(e.target.result):new r(o.loadfailed,r.LONG),this.model.emit("reset")},s.prototype.loadAbort=function(){new r(o.fileabort)},s}),define("ui/unicodehelper",[],function(){function e(){}return e.numutfbytes=function(e){var t;switch(t=e.charCodeAt(),!0){case t<192:return 1;case t>=192&&t<224:return 2;case t>=224&&t<240:return 3;case t>=240&&t<248:return 4;case t>=248&&t<252:return 5;case t>=252&&t<254:return 6}return 0},e.isutf8byte=function(e){var t;return t=e.charCodeAt(),t>=128&&t<192},e.isutf8codepoint=function(t){var n,i;if(n=e.numutfbytes(t[0]),n<=1)return!1;for(i=1;i<n;i+=1)if(!e.isutf8byte(t[i]))return!1;return!0},e.latin2utf8symbol=function(t){var n,i,r;switch(n=e.numutfbytes(t[0]),i=t[0].charCodeAt(),n){case 1:return t[0];case 2:i^=192;break;case 3:i^=224;break;case 4:i^=240;break;case 5:i^=248;break;case 6:i^=252;break;default:return t[0]}for(r=1;r<n;r+=1)i<<=6,i+=128^t[r].charCodeAt();return String.fromCharCode(i)},e.latin2utf8=function(t){var n,i,r;for(i=[],n=0;n<t.length;n+=1)r=t.substr(n,6),e.isutf8codepoint(r)?(n+=e.numutfbytes(r)-1,i.push(e.latin2utf8symbol(r))):i.push(t[n]);return i.join("")},e}),define("ui/teamsfileloadcontroller",["lib/extend","ui/fileloadcontroller","ui/toast","ui/strings","ui/state","ui/playermodel","ui/teammodel","presets","ui/unicodehelper"],function(e,t,n,i,r,o,s,a,u){function l(e){l.superconstructor.call(this,e)}return e(l,t),l.prototype.readFile=function(e){return l.load(e)},l.prototype.unreadFile=function(){},l.parseCSVString=function(e,t){var n;return n=e.split("\n"),n=n.filter(function(e){return 0!==e.trim().length&&!e.trim().match(/^#/)}).map(function(e){for(var t,n,i=[];e.length>0;)t=e.match(/^\s*"([^"]+|"")*"\s*(,|$)/)||"",t=t||e.match(/^\s*[^,]*\s*(,|$)/),n=t&&t[0]||e,e=e.substr(n.length),i.push(n);return i}),n=n.map(function(e){return e.map(function(e){return e=e.replace(/,$/,"").trim(),e.match(/^".*"$/)&&(e=e.replace(/^"(.*)"$/,"$1"),e=e.replace(/""/g,'"')),e})}),n=n.filter(function(e){return 0!==e.join("").length})},l.readTeamsize=function(e){var t,n;return 0===e.length?0:(t=e.map(function(e){return e.length}),n=t[0],t.some(function(e){return e!==n})?0:n)},l.load=function(e){var t,c;return e=u.latin2utf8(e),0!==r.teams.length?(new n(i.teamsnotempty),!1):(t=l.parseCSVString(e,r.teamsize),c=l.readTeamsize(t),c>=a.registration.minteamsize&&c<=a.registration.maxteamsize?(r.teamsize.set(c),t.forEach(function(e){var t=e.map(function(e){return new o(e)});r.teams.push(new s(t))}),new n(i.loaded),!0):(new n(i.invalidteamsize),!1))},l}),define("ui/stateloader",["ui/state","timemachine/timemachine","ui/legacyloadermodel","ui/legacystoragekeyconverter","ui/teamsfileloadcontroller"],function(e,t,n,i,r){function o(){var e=new i;e.convertAll()}var s;return o.prototype.loadLatest=function(){var e;return 0!==t.roots.length&&(e=t.roots.get(t.roots.length-1),e=e.getYoungestDescendant()||e,this.loadCommit(e))},o.prototype.loadCommit=function(e){var n;return!(!e||!e.isValid())&&(n=t.load(e),!!n&&this.loadString(n))},o.prototype.loadString=function(e){var t;if(!e)return!1;try{t=JSON.parse(e)}catch(t){return this.loadTeamsCSV(e)}return this.loadData(t)},o.prototype.loadData=function(t){var n;return!!t&&(t.version?(n=e.restore(t),n&&console.log("savestate loaded"),n):this.loadLegacyData(t))},o.prototype.loadLegacyData=function(e){var t;console.warn("Saved data is older than 1.5.0. Tuvero tries to auto-convert it, but success is not guaranteed.Please check the results before trusting them blindly"),t=new n;try{if(t.load(e))return console.log("legacy savestate loaded"),!0}catch(e){console.error(e.stack)}return!1},o.prototype.loadTeamsCSV=function(t){try{return e.clear(),r.load(t)}catch(e){}return!1},o.prototype.unload=function(){t.unload(),e.clear()},s=new o}),define("ui/statesaver",["ui/state","timemachine/timemachine","ui/stateloader"],function(e,t,n){function i(){this.createTree=void 0}var r;return i.prototype.newTree=function(e){this.createTree=e||""},i.prototype.createNewEmptyTree=function(e){return this.newTree(e),n.unload(),this.saveState()},i.prototype.canSave=function(){return void 0!==this.createTree||t.isInitialized()},i.prototype.saveState=function(){var t=e.save();return this.saveData(t)},i.prototype.saveData=function(e){var t;return!!e&&(t=JSON.stringify(e),this.saveString(t))},i.prototype.saveString=function(e){var n,i;return!!e&&(!!(n=void 0===this.createTree?t.save(e):t.init(e,this.createTree))&&(i=n.isValid(),i&&(this.createTree=void 0,t.cleanup(n,3),console.log("state saved")),i))},i.prototype.removeEverything=function(){for(n.unload();t.roots.length>0;)t.roots.get(0).eraseTree();t.getOrphans().forEach(function(e){e.remove()})},r=new i}),define("background/autosave",["ui/state","ui/listcollectormodel","ui/teammodel","tournament/tournamentmodel","ui/statesaver","core/listener"],function(e,t,n,i,r,o){function s(){void 0===a&&(a=window.setTimeout(function(){a=void 0,r.canSave()?r.saveState()||console.error("autosave failed"):console.warn("cannot autosave: No state loaded.")},10))}var a,u,l;return l=void 0,a=void 0,o.bind(new t(e.teams,n),"update",s),o.bind(e.teams,"resize",s),o.bind(new t(e.tournaments,i),"update",s),o.bind(e.tournaments,"resize",s),o.bind(e.tournaments,"update",s),u=new o,u.onupdate=s,o.bind(e.tournaments,"insert",function(e,t,n){n.object.getName().registerListener(u)}),o.bind(e.tournaments,"remove",function(e,t,n){n.object.getName().unregisterListener(u)}),l}),define("background/dropstyle",["jquery"],function(e){function t(e){e.on("dragover",function(t){return e.addClass("dragover"),t.preventDefault(),!1}),e.on("dragleave drop",function(t){return e.removeClass("dragover"),t.preventDefault(),!1})}var n,i;return n=void 0,i=void 0,e(function(e){t(e("body"))}),n}),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},r=n.prototype,o=i.prototype,s=e.FileReaderSync,a=function(e){this.code=this[this.name=e]},u="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=u.length,c=e.URL||e.webkitURL||e,d=c.createObjectURL,h=c.revokeObjectURL,p=c,f=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;l--;)a.prototype[u[l]]=l+1;return c.createObjectURL||(p=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(y),n.origin=t&&t[1])),n}),p.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):f?t+";base64,"+f(e.data):t+","+encodeURIComponent(e.data)):d?d.call(c,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(c,e)},r.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var r="",o=new v(e),u=0,l=o.length;u<l;u++)r+=String.fromCharCode(o[u]);n.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!s)throw new a("NOT_READABLE_ERR");var c=new s;n.push(c.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var r=arguments.length;return r<3&&(n=null),new i(this.data.slice(e,r>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,n){var i=n?n.type||"":"",r=new t;if(e)for(var o=0,s=e.length;o<s;o++)Uint8Array&&e[o]instanceof Uint8Array?r.append(e[o].buffer):r.append(e[o]);var a=r.getBlob(i);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),define("lib/Blob",function(e){return function(){var t;return t||e.Blob}}(this)),function(e,t,n){function i(e,t){return typeof e===t}function r(){var e,t,n,r,o,s,a;for(var u in g)if(g.hasOwnProperty(u)){if(e=[],t=g[u],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=i(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)s=e[o],a=s.split("."),1===a.length?y[a[0]]=r:(!y[a[0]]||y[a[0]]instanceof Boolean||(y[a[0]]=new Boolean(y[a[0]])),y[a[0]][a[1]]=r),b.push((r?"":"no-")+a.join("-"))}}function o(e){var t=k.className,n=y._config.classPrefix||"";if(x&&(t=t.baseVal),y._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}y._config.enableClasses&&(t+=" "+n+e.join(" "+n),x?k.className.baseVal=t:k.className=t)}function s(e,t){if("object"==typeof e)for(var n in e)w(e,n)&&s(n,e[n]);else{e=e.toLowerCase();var i=e.split("."),r=y[i[0]];if(2==i.length&&(r=r[i[1]]),"undefined"!=typeof r)return y;t="function"==typeof t?t():t,1==i.length?y[i[0]]=t:(!y[i[0]]||y[i[0]]instanceof Boolean||(y[i[0]]=new Boolean(y[i[0]])),y[i[0]][i[1]]=t),o([(t&&0!=t?"":"no-")+i.join("-")]),y._trigger(e,t)}return y}function a(e,t){return!!~(""+e).indexOf(t)}function u(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):x?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function l(){var e=t.body;return e||(e=u(x?"svg":"body"),e.fake=!0),e}function c(e,n,i,r){var o,s,a,c,d="modernizr",h=u("div"),p=l();if(parseInt(i,10))for(;i--;)a=u("div"),a.id=r?r[i]:d+(i+1),h.appendChild(a);return o=u("style"),o.type="text/css",o.id="s"+d,(p.fake?p:h).appendChild(o),p.appendChild(h),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),h.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",c=k.style.overflow,k.style.overflow="hidden",k.appendChild(p)),s=n(h,e),p.fake?(p.parentNode.removeChild(p),k.style.overflow=c,k.offsetHeight):h.parentNode.removeChild(h),!!s}function d(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(t,n,i){var r;if("getComputedStyle"in e){r=getComputedStyle.call(e,t,n);var o=e.console;if(null!==r)i&&(r=r.getPropertyValue(i));else if(o){var s=o.error?"error":"log";o[s].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else r=!n&&t.currentStyle&&t.currentStyle[i];return r}function p(t,i){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(d(t[r]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];r--;)o.push("("+d(t[r])+":"+i+")");return o=o.join(" or "),c("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==h(e,null,"position")})}return n}function f(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function m(e,t,r,o){function s(){c&&(delete E.style,delete E.modElem)}if(o=!i(o,"undefined")&&o,!i(r,"undefined")){var l=p(e,r);if(!i(l,"undefined"))return l}for(var c,d,h,m,g,v=["modernizr","tspan","samp"];!E.style&&v.length;)c=!0,E.modElem=u(v.shift()),E.style=E.modElem.style;for(h=e.length,d=0;d<h;d++)if(m=e[d],g=E.style[m],a(m,"-")&&(m=f(m)),E.style[m]!==n){if(o||i(r,"undefined"))return s(),"pfx"!=t||m;try{E.style[m]=r}catch(e){}if(E.style[m]!=g)return s(),"pfx"!=t||m}return s(),!1}var g=[],v={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){g.push({name:e,fn:t,options:n})},addAsyncTest:function(e){g.push({name:null,fn:e})}},y=function(){};y.prototype=v,y=new y;var w,b=[];!function(){var e={}.hasOwnProperty;w=i(e,"undefined")||i(e.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}();var k=t.documentElement,x="svg"===k.nodeName.toLowerCase();v._l={},v.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),y.hasOwnProperty(e)&&setTimeout(function(){y._trigger(e,y[e])},0)},v._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e,i;for(e=0;e<n.length;e++)(i=n[e])(t);
},0),delete this._l[e]}},y._q.push(function(){v.addTest=s});x||!function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=E.elements;return"string"==typeof e?e.split(" "):e}function r(e,t){var n=E.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),E.elements=n+" "+e,l(t)}function o(e){var t=q[e[k]];return t||(t={},x++,e[k]=x,q[x]=t),t}function s(e,n,i){if(n||(n=t),g)return n.createElement(e);i||(i=o(n));var r;return r=i.cache[e]?i.cache[e].cloneNode():b.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!r.canHaveChildren||w.test(e)||r.tagUrn?r:i.frag.appendChild(r)}function a(e,n){if(e||(e=t),g)return e.createDocumentFragment();n=n||o(e);for(var r=n.frag.cloneNode(),s=0,a=i(),u=a.length;s<u;s++)r.createElement(a[s]);return r}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return E.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(E,t.frag)}function l(e){e||(e=t);var i=o(e);return!E.shivCSS||m||i.hasCSS||(i.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),g||u(e,i),e}function c(e){for(var t,n=e.getElementsByTagName("*"),r=n.length,o=RegExp("^(?:"+i().join("|")+")$","i"),s=[];r--;)t=n[r],o.test(t.nodeName)&&s.push(t.applyElement(d(t)));return s}function d(e){for(var t,n=e.attributes,i=n.length,r=e.ownerDocument.createElement(S+":"+e.nodeName);i--;)t=n[i],t.specified&&r.setAttribute(t.nodeName,t.nodeValue);return r.style.cssText=e.style.cssText,r}function h(e){for(var t,n=e.split("{"),r=n.length,o=RegExp("(^|[\\s,>+~])("+i().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),s="$1"+S+"\\:$2";r--;)t=n[r]=n[r].split("}"),t[t.length-1]=t[t.length-1].replace(o,s),n[r]=t.join("}");return n.join("{")}function p(e){for(var t=e.length;t--;)e[t].removeNode()}function f(e){function t(){clearTimeout(s._removeSheetTimer),i&&i.removeNode(!0),i=null}var i,r,s=o(e),a=e.namespaces,u=e.parentWindow;return!N||e.printShived?e:("undefined"==typeof a[S]&&a.add(S),u.attachEvent("onbeforeprint",function(){t();for(var o,s,a,u=e.styleSheets,l=[],d=u.length,p=Array(d);d--;)p[d]=u[d];for(;a=p.pop();)if(!a.disabled&&T.test(a.media)){try{o=a.imports,s=o.length}catch(e){s=0}for(d=0;d<s;d++)p.push(o[d]);try{l.push(a.cssText)}catch(e){}}l=h(l.reverse().join("")),r=c(e),i=n(e,l)}),u.attachEvent("onafterprint",function(){p(r),clearTimeout(s._removeSheetTimer),s._removeSheetTimer=setTimeout(t,500)}),e.printShived=!0,e)}var m,g,v="3.7.3",y=e.html5||{},w=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,b=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,k="_html5shiv",x=0,q={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",m="hidden"in e,g=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(e){m=!0,g=!0}}();var E={elements:y.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:v,shivCSS:y.shivCSS!==!1,supportsUnknownElements:g,shivMethods:y.shivMethods!==!1,type:"default",shivDocument:l,createElement:s,createDocumentFragment:a,addElements:r};e.html5=E,l(t);var T=/^$|\b(?:all|print)\b/,S="html5shiv",N=!g&&function(){var n=t.documentElement;return!("undefined"==typeof t.namespaces||"undefined"==typeof t.parentWindow||"undefined"==typeof n.applyElement||"undefined"==typeof n.removeNode||"undefined"==typeof e.attachEvent)}();E.type+=" print",E.shivPrint=f,f(t),"object"==typeof module&&module.exports&&(module.exports=E)}("undefined"!=typeof e?e:this,t);var q={elem:u("modernizr")};y._q.push(function(){delete q.elem});var E={style:q.elem.style};y._q.unshift(function(){delete E.style});v.testProp=function(e,t,i){return m([e],n,t,i)};y.addTest("json","JSON"in e&&"parse"in JSON&&"stringify"in JSON),y.addTest("adownload",!e.externalHost&&"download"in u("a")),y.addTest("filereader",!!(e.File&&e.FileList&&e.FileReader)),y.addTest("localstorage",function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}),r(),delete v.addTest,delete v.addAsyncTest;for(var T=0;T<y._q.length;T++)y._q[T]();e.Modernizr=y}(window,document),define("lib/modernizr",["lib/Blob"],function(e){return function(){var t;return t||e.Modernizr}}(this)),define("background/featuredetect",["jquery","lib/modernizr","ui/strings","ui/toast"],function(e,t,n,i){var r;return r={},e(function(e){function r(){window.onbeforeunload=function(){return n.confirmleave}}t?(t.adownload||e(".noadownload").show(),t.filereader||(e(".nofilereader").show(),e(".filereader").detach(),new i(n.nofilereader,i.LONG)),t.json||(e(".nojson").show(),e(".json").detach(),new i(n.nojson,i.LONG),r()),t.localstorage||(e(".nostorage").show(),e(".storage").detach(),new i(n.nostorage,i.LONG),r())):console.error("cannot load Modernizr!")}),r}),define("background/fonthotkeys",["jquery"],function(e){function t(){o&&("#font+"===window.location.hash?(i(n()+1),window.location.hash=""):"#font-"===window.location.hash&&(i(n()-1),window.location.hash=""))}function n(){var t=-1;return o.each(function(n){e(this).parent().hasClass(e(this).attr("class"))&&(t=n)}),t}function i(e){var t=Math.min(Math.max(e,0),o.length-1);o.eq(t).click()}var r,o;return r=void 0,o=void 0,e(window).on("hashchange",function(){t()}),e(function(e){o=e('#tabs>[data-tab="settings"] .fontsizeview:first button')}),r}),define("ui/boxcontroller",["lib/extend","core/controller"],function(e,t){function n(e){n.superconstructor.call(this,e),this.view.$view.on("click","> h3:first-child",this.toggle.bind(this))}return e(n,t),n.prototype.toggle=function(e){return"input"===e.target.nodeName.toLowerCase()?(e.preventDefault(),!1):void this.model.emit("toggle")},n}),define("ui/boxview",["lib/extend","core/view","ui/boxcontroller"],function(e,t,n){function i(e){var t,n,i,r;for(r=!e.hasClass("collapsed"),n=e.find("a, button, input, select, textarea"),t=0;t<n.length;t+=1)i=n.eq(t),r?(void 0===i.data().tabindex?i.removeAttr("tabindex"):i.attr("tabindex",i.data().tabindex),delete i.data().tabindex):(i.data().tabindex=i.attr("tabindex"),i.attr("tabindex",-1))}function r(e){r.superconstructor.call(this,void 0,e),this.model.EVENTS=r.EVENTS,this.$view.hasClass("collapsed")&&i(this.$view.css("height",0)),this.controller=new n(this)}return e(r,t),r.EVENTS={toggle:!0},r.prototype.reset=function(){i(this.$view.removeClass("collapsed").css("height","").css("transition",""))},r.prototype.update=function(){var e,t,n;e=this.$view,e.hasClass("collapsed")?n=0:(t=e.height(),e.css("transition",""),e.css("height",""),e[0].offsetHeight,n=e.height(),e.css("height",t),e[0].offsetHeight),e.css("height",e.height()),e.css("transition","height 0.5s"),e[0].offsetHeight,e.css("height",n),i(e),setTimeout(function(){e.css("transition",""),e.hasClass("collapsed")||e.css("height","")},500)},r.prototype.ontoggle=function(){this.$view.toggleClass("collapsed"),this.update()},r}),define("background/initboxviews",["ui/boxview","jquery"],function(e,t){var n;return t(function(t){t(".boxview:not(.template)").each(function(){var n;if(n=t(this),0===n.parents(".template").length)return new e(n)})}),n}),define("background/matchtoasts",["ui/state","ui/toast","ui/strings","core/listener"],function(e,t,n,i){var r;return r={},r.matchfinished=new i,r.matchfinished.onremove=function(e,i,r){if(r.object.isRunningMatch())return new t(n.gamefinished)},r.tournamentState=new i,r.tournamentState.onupdate=function(e,i,r){return new t(n["tournament_"+r],t.LONG)},i.bind(e.tournaments,"insert",function(e,i,o){return o.object.getMatches().registerListener(r.matchfinished),o.object.getState().registerListener(r.tournamentState),new t(n.tournament_initial,t.LONG)}),i.bind(e.tournaments,"remove",function(e,t,n){n.object.getMatches().unregisterListener(r.matchfinished),n.object.getState().unregisterListener(r.tournamentState)}),r}),define("ui/debug",["ui/toast","ui/strings","jquery"],function(e,t,n){var i;return i={stackTrace:function(){var e,t;e=new Error("dummy"),t=e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"),console.log(t)},isDevVersion:void 0},i.isDevVersion=!/\s[0-9]+(\.[0-9]+)+(-rc[0-9]*)?$/.test(n("head title").text()),i.isDevVersion&&new e(t.dev,e.INFINITE),i}),define("ui/update",["ui/strings","ui/toast","ui/debug"],function(e,t,n){function i(){l&&(l.close(),l=void 0)}function r(){return"file:"===document.location.protocol}function o(o){o?(a.isCached=!0,c&&c.close()):(a.isCached=!1,n.isDevVersion||r()||(console.error("no cache manifest found"),void 0===c&&(c=new t(e.nomanifest,t.INFINITE)))),i()}function s(){switch(u.status){case u.OBSOLETE:case u.UNCACHED:o(!1);break;case u.UPDATEREADY:o(!0),new t(e.updateavailable,t.INFINITE),console.warn("boulesprog application cache updated"),window.applicationCache.swapCache();break;case u.IDLE:o(!0);break;case u.CHECKING:break;case u.DOWNLOADING:l||(l=new t(e.updatedownloading,t.INFINITE));break;default:console.error("unhandled appCache status: "+u.status),o(!1)}}var a,u,l,c;return l=void 0,a=function(){if(s(),a.isCached)try{u.update()}catch(e){console.error(e)}},a.prototype={},a.isCached=!1,u=window.applicationCache,u.addEventListener("error",s),u.addEventListener("downloading",s),u.addEventListener("progress",s),u.addEventListener("cached",s),u.addEventListener("noupdate",s),u.addEventListener("updateready",s),s(),n.isDevVersion&&(window.setInterval(a,5e3),u.addEventListener("updateready",function(){window.setTimeout(function(){window.location.reload()},1e3)})),a}),define("background/online",["jquery","ui/strings","ui/update"],function(e,t,n){var i;return i=function(){return navigator.onLine},e(function(e){e(window).on("beforeunload",function(e){var r=t.offlineconfirmexit;if(!i()&&!n.isCached&&"file:"!==document.location.protocol)return e&&(e.returnValue=r),r})}),i}),define("background/print",["jquery"],function(e){var t;return e(function(e){e("#tabs").on("click","button.print",function(){window.print()})}),t}),define("background/reset",["ui/toast","timemachine/timemachine","ui/strings","jquery"],function(e,t,n,i){function r(){return"#reset"===location.hash&&(console.log("clearing localstorage"),window.localStorage&&window.localStorage.clear(),t.updateRoots(),new e(n.reset,e.LONG),window.location.hash="#debug",!0)}var o;return i(window).on("hashchange",function(){r()&&location.reload()}),i(function(e){e("#tabs").on("click","button.reset",function(t){e('#tabs > [data-tab="settings"] .local button.clear').click()})}),r(),o});var saveAs=saveAs||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,c)},h=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){u(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},f=function(t,u,c){c||(t=p(t));var f,m=this,g=t.type,v=g===l,y=function(){h(m,"writestart progress write writeend".split(" "))},w=function(){if((a||v&&s)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=a?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,m.readyState=m.DONE,y()},i.readAsDataURL(t),void(m.readyState=m.INIT)}if(f||(f=n().createObjectURL(t)),v)e.location.href=f;else{var r=e.open(f,"_blank");r||(e.location.href=f)}m.readyState=m.DONE,y(),d(f)};return m.readyState=m.INIT,r?(f=n().createObjectURL(t),void setTimeout(function(){i.href=f,i.download=u,o(i),y(),d(f),m.readyState=m.DONE})):void w()},m=f.prototype,g=function(e,t,n){return new f(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",[],function(){return saveAs}),define("lib/FileSaver",function(e){return function(){var t;return t||e.saveAs}}(this)),define("ui/filesavermodel",["lib/extend","core/model","lib/FileSaver","timemachine/timemachine","presets","lib/Blob"],function(e,t,n,i,r,o){function s(e){s.superconstructor.call(this),this.commit=e}return e(s,t),s.prototype.save=function(){var e,t,s,a,u,l;if(e=this.commit||i.commit.get(),!e)return console.error("FileSaver: There is no commit to save"),!1;if(!e.isValid())return console.error("FileSaver: The commit is not valid"),!1;if(t=e.getTreeName()||r.target,s=t.replace(/(\.json)+$/,"").substr(0,64)+".json",a=e.load(),!a)return console.error("FileSaver: commit contains no data"),!1;try{u=new o([a],{type:"application/json"})}catch(e){return console.error("FileSaver: Blob creation failed"),console.error(e.stack),!1}try{l=n(u,s)}catch(e){return console.error("FileSaver: saveAs failed"),!1}return!!l},s}),define("background/save",["jquery","ui/filesavermodel","ui/toast","ui/strings"],function(e,t,n,i){var r;return e(function(e){e("#tabs").on("click","button.save",function(){var e;e=new t,e.save()||new n(i.savefailed)})}),r}),define("background/statetoasts",["ui/state","core/listener","ui/toast","ui/strings"],function(e,t,n,i){var r;return r={},r.errorListener=t.bind(e,"error",function(e,t,i){new n(i,n.LONG)}),r.clearListener=t.bind(e,"clear",function(e,t,r){void 0!==n.$container&&new n(i.newtournament,n.LONG)}),r}),define("background/tournamenterrortoasts",["ui/state","ui/listcollectormodel","tournament/tournamentmodel","ui/toast","ui/strings"],function(e,t,n,i,r){var o;return o=new t(e.tournaments,n),o.onerror=function(e,t,n){return new i(r.tournamenterrorprefix+": "+n,i.LONG)},o}),define("core/classview",["lib/extend","core/view"],function(e,t){function n(e,t,i,r){n.superconstructor.call(this,e,t),this.onclass=i||void 0,this.offclass=r||void 0,this.update()}return e(n,t),n.prototype.update=function(){this.model.get()?(this.onclass&&this.$view.addClass(this.onclass),this.offclass&&this.$view.removeClass(this.offclass)):(this.onclass&&this.$view.removeClass(this.onclass),this.offclass&&this.$view.addClass(this.offclass))},n.prototype.onupdate=function(){this.update()},n}),define("core/propertyvaluemodel",["lib/extend","core/valuemodel","core/listener"],function(e,t,n){function i(e,t){i.superconstructor.call(this,e.getProperty(t)),this.prop=t,e.registerListener(this),n.bind(this,"update",function(){e.setProperty(t,this.get())},this)}return e(i,t),i.prototype.onupdate=function(e,t,n){n.key===this.prop&&this.set(n.value)},i}),define("core/tabimageview",["lib/extend","core/view"],function(e,t){function n(e,t,i){n.superconstructor.call(this,t,i),this.tabname=e,this.update()}return e(n,t),n.prototype.update=function(){this.$view.attr("data-img",this.tabname+this.model.get())},n.prototype.onupdate=function(){this.update()},n}),define("core/tabmenucontroller",["jquery","lib/extend","core/controller","core/listener"],function(e,t,n,i){function r(t){function n(){o.set(window.location.hash.replace(/^#/,""))}var o,s;r.superconstructor.call(this,t),o=this.model,e(window).on("hashchange",n),s=new i(this.view.tabnames),s.oninsert=n,n()}return t(r,n),r.prototype.focus=function(e){window.location.hash="#"+e},r}),define("core/tabmodel",["lib/extend","core/model","core/valuemodel"],function(e,t,n){function i(){i.superconstructor.call(this),this.visibility=new n(!0),this.accessibility=new n(!0),this.imgParam=new n("")}return e(i,t),i}),define("list/listexclusionlistener",["lib/extend","core/listener"],function(e,t){function n(e,t,i){n.superconstructor.call(this,e),this.trigger=e,this.list=t,this.value=i}return e(n,t),n.prototype.add=function(){var e;e=this.list.indexOf(this.value),e===-1&&this.list.push(this.value)},n.prototype.remove=function(){for(var e;(e=this.list.indexOf(this.value))!==-1;)this.list.remove(e)},n.prototype.onupdate=function(){this.trigger.get()?this.add():this.remove()},n}),define("core/tabmenuview",["jquery","lib/extend","core/view","core/tabmenucontroller","list/listmodel","core/selectionvaluemodel","core/tabmodel","core/classview","core/tabimageview","list/listexclusionlistener"],function(e,t,n,i,r,o,s,a,u,l){function c(e){this.tabnames=new r,c.superconstructor.call(this,new o(void 0,this.tabnames),e),this.keys={},this.$tabs={},this.$tabicons={},this.tabmodels={},this.$menu=void 0,this.tabmodels={},this.initTabs(),this.controller=new i(this)}return t(c,n),c.prototype.initTabs=function(){this.extractTabNames(),this.createTabMenu(),this.createTabModels(),this.readDefaultTab()},c.prototype.extractTabNames=function(){var t,n,i;t=this.tabnames,n=this.$tabs,i=this.keys,this.$view.find("> div").each(function(r){var o,s;o=e(this),s=o.attr("data-tab"),i[s]=o.attr("accesskey"),o.removeAttr("accesskey"),n[s]=o,t.push(s)})},c.prototype.createTabModels=function(){this.tabnames.map(function(e){var t,n;return n=new s,this.tabmodels[e]=n,t=new a(n.visibility,this.$tabicons[e],void 0,"hidden"),t=new u(e,n.imgParam,this.$tabicons[e]),t=new l(n.accessibility,this.tabnames,e)},this)},c.prototype.readDefaultTab=function(){this.model.setDefault(this.tabnames.get(0))},c.prototype.getTabModel=function(e){return this.tabmodels[e]},c.prototype.createTabMenu=function(){this.$menu=e("<span>").addClass("tabmenu"),this.tabnames.map(function(t){var n=e("<a>").attr("tabindex",-1);n.attr("href","#"+t),this.keys[t]&&n.attr("accesskey",this.keys[t]),this.$tabicons[t]=n,this.$menu.append(n)},this),this.$view.before(this.$menu)},c.prototype.update=function(){var e;e=this.model.get(),this.$view.find(">.open").removeClass("open"),this.$menu.find(">.open").removeClass("open"),this.$tabs[e].addClass("open"),this.$tabicons[e].addClass("open")},c.prototype.onupdate=function(){this.update()},c.prototype.focus=function(e){this.controller.focus(e)},c}),define("list/binningreferencelistmodel",["lib/extend","list/listmodel","core/type","list/sortedreferencelistmodel"],function(e,t,n,i){function r(e,n){if(r.superconstructor.call(this),this.makeReadonly(),void 0===e)throw new Error("list argument is missing");if(void 0===n)throw new Error("binning function is missing");this.binningFunction=n,this.bins=new t,this.sortedBins=new i(this.bins,this.binSortFunction,!0),this.refList=e,this.refList.map(function(e,t){r.insertElement(this,t)},this),this.refList.registerListener(this)}return e(r,t),r.prototype.getBinNames=function(){return this.sortedBins},r.prototype.getBin=function(e){var t;if(t=this.sortedBins.indexOf(e),t!==-1)return this.get(t)},r.prototype.createBinWithObject=function(e,n){var i,o;return o=void 0,i=this.sortedBins.indexOf(e),i===-1&&(this.bins.push(e),i=this.sortedBins.indexOf(e),o=new t([n]),r.superclass.insert.call(this,i,o)),o},r.prototype.getBinName=function(e){return this.sortedBins.get(e)},r.prototype.removeEmptyBin=function(e){var t,n;t=this.bins.indexOf(e),n=this.sortedBins.indexOf(e),t!==-1&&n!==-1&&0===this.get(n).length&&(this.bins.remove(t),r.superclass.remove.call(this,n))},r.insertElement=function(e,t){var n,i,o,s;return o=e.refList.get(t),i=e.binningFunction(o),n=e.getBin(i),void 0===n?n=e.createBinWithObject(i,o):(s=r.getNextBinElementIndex(e,t,i),s===-1?s=n.length:(s=n.indexOf(e.refList.get(s)),s===-1&&(s=n.length)),n.insert(s,o)),n},r.getNextBinElementIndex=function(e,t,n){var i;for(i=t+1;i<e.refList.length;i+=1)if(e.binningFunction(e.refList.get(i))===n)return i;return-1},r.removeElement=function(e,t){var n,i,r;i=e.binningFunction(t),n=e.getBin(i),void 0!==n&&(r=n.indexOf(t),r!==-1&&(n.remove(r),0===n.length&&e.removeEmptyBin(i)))},r.prototype.oninsert=function(e,t,n){e===this.refList&&r.insertElement(this,n.id)},r.prototype.onremove=function(e,t,n){e===this.refList&&r.removeElement(this,n.object)},r.prototype.binSortFunction=function(e,t){return n.isNumber(e)&&n.isNumber(t)?e-t:e<t?-1:e>t?1:0},r}),define("list/lengthmodel",["lib/extend","core/valuemodel"],function(e,t){function n(e){n.superconstructor.call(this,e.length),e.registerListener(this)}return e(n,t),n.prototype.onresize=function(e){n.superclass.set.call(this,e.length)},n.prototype.set=void 0,n}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("lib/diff",[],t):"object"==typeof exports?exports.JsDiff=t():e.JsDiff=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.canonicalize=t.convertChangesToXML=t.convertChangesToDMP=t.merge=t.parsePatch=t.applyPatches=t.applyPatch=t.createPatch=t.createTwoFilesPatch=t.structuredPatch=t.diffArrays=t.diffJson=t.diffCss=t.diffSentences=t.diffTrimmedLines=t.diffLines=t.diffWordsWithSpace=t.diffWords=t.diffChars=t.Diff=void 0;var r=n(1),o=i(r),s=n(2),a=n(3),u=n(5),l=n(6),c=n(7),d=n(8),h=n(9),p=n(10),f=n(11),m=n(13),g=n(14),v=n(16),y=n(17);t.Diff=o.default,t.diffChars=s.diffChars,t.diffWords=a.diffWords,t.diffWordsWithSpace=a.diffWordsWithSpace,t.diffLines=u.diffLines,t.diffTrimmedLines=u.diffTrimmedLines,t.diffSentences=l.diffSentences,t.diffCss=c.diffCss,t.diffJson=d.diffJson,t.diffArrays=h.diffArrays,t.structuredPatch=g.structuredPatch,t.createTwoFilesPatch=g.createTwoFilesPatch,t.createPatch=g.createPatch,t.applyPatch=p.applyPatch,t.applyPatches=p.applyPatches,t.parsePatch=f.parsePatch,t.merge=m.merge,t.convertChangesToDMP=v.convertChangesToDMP,t.convertChangesToXML=y.convertChangesToXML,t.canonicalize=d.canonicalize},function(e,t){function n(){}function i(e,t,n,i,r){for(var o=0,s=t.length,a=0,u=0;o<s;o++){var l=t[o];if(l.removed){if(l.value=e.join(i.slice(u,u+l.count)),u+=l.count,o&&t[o-1].added){var c=t[o-1];t[o-1]=t[o],t[o]=c}}else{if(!l.added&&r){var d=n.slice(a,a+l.count);d=d.map(function(e,t){var n=i[u+t];return n.length>e.length?n:e}),l.value=e.join(d)}else l.value=e.join(n.slice(a,a+l.count));a+=l.count,l.added||(u+=l.count)}}var h=t[s-1];return s>1&&(h.added||h.removed)&&e.equals("",h.value)&&(t[s-2].value+=h.value,t.pop()),t}function r(e){return{newPos:e.newPos,components:e.components.slice(0)}}t.__esModule=!0,t.default=n,n.prototype={diff:function(e,t){function n(e){return a?(setTimeout(function(){a(void 0,e)},0),!0):e}function o(){for(var o=-1*d;o<=d;o+=2){var s=void 0,a=p[o-1],h=p[o+1],f=(h?h.newPos:0)-o;a&&(p[o-1]=void 0);var m=a&&a.newPos+1<l,g=h&&0<=f&&f<c;if(m||g){if(!m||g&&a.newPos<h.newPos?(s=r(h),u.pushComponent(s.components,void 0,!0)):(s=a,s.newPos++,u.pushComponent(s.components,!0,void 0)),f=u.extractCommon(s,t,e,o),s.newPos+1>=l&&f+1>=c)return n(i(u,s.components,t,e,u.useLongestToken));p[o]=s}else p[o]=void 0}d++}var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=s.callback;"function"==typeof s&&(a=s,s={}),this.options=s;var u=this;e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,c=e.length,d=1,h=l+c,p=[{newPos:-1,components:[]}],f=this.extractCommon(p[0],t,e,0);if(p[0].newPos+1>=l&&f+1>=c)return n([{value:this.join(t),count:t.length}]);if(a)!function e(){setTimeout(function(){return d>h?a():void(o()||e())},0)}();else for(;d<=h;){var m=o();if(m)return m}},pushComponent:function(e,t,n){var i=e[e.length-1];i&&i.added===t&&i.removed===n?e[e.length-1]={count:i.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,i){for(var r=t.length,o=n.length,s=e.newPos,a=s-i,u=0;s+1<r&&a+1<o&&this.equals(t[s+1],n[a+1]);)s++,a++,u++;return u&&e.components.push({count:u}),e.newPos=s,a},equals:function(e,t){return e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return a.diff(e,t,n)}t.__esModule=!0,t.characterDiff=void 0,t.diffChars=r;var o=n(1),s=i(o),a=t.characterDiff=new s.default},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return n=(0,u.generateOptions)(n,{ignoreWhitespace:!0}),d.diff(e,t,n)}function o(e,t,n){return d.diff(e,t,n)}t.__esModule=!0,t.wordDiff=void 0,t.diffWords=r,t.diffWordsWithSpace=o;var s=n(1),a=i(s),u=n(4),l=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,c=/\S/,d=t.wordDiff=new a.default;d.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!c.test(e)&&!c.test(t)},d.tokenize=function(e){for(var t=e.split(/(\s+|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&l.test(t[n])&&l.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t}},function(e,t){function n(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}t.__esModule=!0,t.generateOptions=n},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return l.diff(e,t,n)}function o(e,t,n){var i=(0,u.generateOptions)(n,{ignoreWhitespace:!0});return l.diff(e,t,i)}t.__esModule=!0,t.lineDiff=void 0,t.diffLines=r,t.diffTrimmedLines=o;var s=n(1),a=i(s),u=n(4),l=t.lineDiff=new a.default;l.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var r=n[i];i%2&&!this.options.newlineIsToken?t[t.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),t.push(r))}return t}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return a.diff(e,t,n)}t.__esModule=!0,t.sentenceDiff=void 0,t.diffSentences=r;var o=n(1),s=i(o),a=t.sentenceDiff=new s.default;a.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return a.diff(e,t,n)}t.__esModule=!0,t.cssDiff=void 0,t.diffCss=r;var o=n(1),s=i(o),a=t.cssDiff=new s.default;a.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return d.diff(e,t,n)}function o(e,t,n){t=t||[],n=n||[];var i=void 0;for(i=0;i<t.length;i+=1)if(t[i]===e)return n[i];var r=void 0;if("[object Array]"===c.call(e)){for(t.push(e),r=new Array(e.length),n.push(r),i=0;i<e.length;i+=1)r[i]=o(e[i],t,n);return t.pop(),n.pop(),r}if(e&&e.toJSON&&(e=e.toJSON()),"object"===("undefined"==typeof e?"undefined":s(e))&&null!==e){t.push(e),r={},n.push(r);var a=[],u=void 0;for(u in e)e.hasOwnProperty(u)&&a.push(u);for(a.sort(),i=0;i<a.length;i+=1)u=a[i],r[u]=o(e[u],t,n);t.pop(),n.pop()}else r=e;return r}t.__esModule=!0,t.jsonDiff=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.diffJson=r,t.canonicalize=o;var a=n(1),u=i(a),l=n(5),c=Object.prototype.toString,d=t.jsonDiff=new u.default;d.useLongestToken=!0,d.tokenize=l.lineDiff.tokenize,d.castInput=function(e){var t=this.options.undefinedReplacement;return"string"==typeof e?e:JSON.stringify(o(e),function(e,n){return"undefined"==typeof n?t:n},"  ")},d.equals=function(e,t){return u.default.prototype.equals.call(d,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return a.diff(e,t,n)}t.__esModule=!0,t.arrayDiff=void 0,t.diffArrays=r;var o=n(1),s=i(o),a=t.arrayDiff=new s.default;a.tokenize=a.join=function(e){return e.slice()}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){function n(e,t){for(var n=0;n<e.lines.length;n++){var i=e.lines[n],o=i[0],s=i.substr(1);if(" "===o||"-"===o){if(!l(t+1,r[t],o,s)&&(c++,c>d))return!1;t++}}return!0}var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if("string"==typeof t&&(t=(0,s.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}for(var r=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=t.hunks,l=i.compareLine||function(e,t,n,i){return t===i},c=0,d=i.fuzzFactor||0,h=0,p=0,f=void 0,m=void 0,g=0;g<a.length;g++){for(var v=a[g],y=r.length-v.oldLines,w=0,b=p+v.oldStart-1,k=(0,u.default)(b,h,y);void 0!==w;w=k())if(n(v,b+w)){v.offset=p+=w;break}if(void 0===w)return!1;h=v.offset+v.oldStart+v.oldLines}for(var x=0,q=0;q<a.length;q++){var E=a[q],T=E.oldStart+E.offset+x-1;x+=E.newLines-E.oldLines;for(var S=0;S<E.lines.length;S++){var N=E.lines[S],D=N[0],C=N.substr(1),M=E.linedelimiters[S];if(" "===D)T++;else if("-"===D)r.splice(T,1),o.splice(T,1);else if("+"===D)r.splice(T,0,C),o.splice(T,0,M),T++;else if("\\"===D){var L=E.lines[S-1]?E.lines[S-1][0]:null;"+"===L?f=!0:"-"===L&&(m=!0)}}}if(f)for(;!r[r.length-1];)r.pop(),o.pop();else m&&(r.push(""),o.push("\n"));for(var $=0;$<r.length-1;$++)r[$]=r[$]+o[$];return r.join("")}function o(e,t){function n(){var o=e[i++];return o?void t.loadFile(o,function(e,i){if(e)return t.complete(e);var s=r(i,o,t);t.patched(o,s,function(e){return e?t.complete(e):void n()})}):t.complete()}"string"==typeof e&&(e=(0,s.parsePatch)(e));var i=0;n()}t.__esModule=!0,t.applyPatch=r,t.applyPatches=o;var s=n(11),a=n(12),u=i(a)},function(e,t){function n(e){function t(){var e={};for(a.push(e);u<o.length;){var t=o[u];if(/^(\-\-\-|\+\+\+|@@)\s/.test(t))break;var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(t);s&&(e.index=s[1]),u++}for(n(e),n(e),e.hunks=[];u<o.length;){var l=o[u];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(l))break;if(/^@@/.test(l))e.hunks.push(i());else{if(l&&r.strict)throw new Error("Unknown line "+(u+1)+" "+JSON.stringify(l));u++}}}function n(e){var t=/^(---|\+\+\+)\s+([\S ]*)(?:\t(.*?)\s*)?$/,n=t.exec(o[u]);if(n){var i="---"===n[1]?"old":"new",r=n[2].replace(/\\\\/g,"\\");/^".*"$/.test(r)&&(r=r.substr(1,r.length-2)),e[i+"FileName"]=r,e[i+"Header"]=n[3],u++}}function i(){for(var e=u,t=o[u++],n=t.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),i={oldStart:+n[1],oldLines:+n[2]||1,newStart:+n[3],newLines:+n[4]||1,lines:[],linedelimiters:[]},a=0,l=0;u<o.length&&!(0===o[u].indexOf("--- ")&&u+2<o.length&&0===o[u+1].indexOf("+++ ")&&0===o[u+2].indexOf("@@"));u++){var c=o[u][0];if("+"!==c&&"-"!==c&&" "!==c&&"\\"!==c)break;i.lines.push(o[u]),
i.linedelimiters.push(s[u]||"\n"),"+"===c?a++:"-"===c?l++:" "===c&&(a++,l++)}if(a||1!==i.newLines||(i.newLines=0),l||1!==i.oldLines||(i.oldLines=0),r.strict){if(a!==i.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(l!==i.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return i}for(var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e.split(/\r\n|[\n\v\f\r\x85]/),s=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=[],u=0;u<o.length;)t();return a}t.__esModule=!0,t.parsePatch=n},function(e,t){t.__esModule=!0,t.default=function(e,t,n){var i=!0,r=!1,o=!1,s=1;return function a(){if(i&&!o){if(r?s++:i=!1,e+s<=n)return s;o=!0}if(!r)return o||(i=!0),t<=e-s?-s++:(r=!0,a())}}},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){var t=!1;e.oldLines=0,e.newLines=0,e.lines.forEach(function(n){return"string"!=typeof n?void(t=!0):("+"!==n[0]&&" "!==n[0]||e.newLines++,void("-"!==n[0]&&" "!==n[0]||e.oldLines++))}),t&&(delete e.oldLines,delete e.newLines)}function o(e,t,n){e=s(e,n),t=s(t,n);var i={};(e.index||t.index)&&(i.index=e.index||t.index),(e.newFileName||t.newFileName)&&(a(e)?a(t)?(i.oldFileName=u(i,e.oldFileName,t.oldFileName),i.newFileName=u(i,e.newFileName,t.newFileName),i.oldHeader=u(i,e.oldHeader,t.oldHeader),i.newHeader=u(i,e.newHeader,t.newHeader)):(i.oldFileName=e.oldFileName,i.newFileName=e.newFileName,i.oldHeader=e.oldHeader,i.newHeader=e.newHeader):(i.oldFileName=t.oldFileName||e.oldFileName,i.newFileName=t.newFileName||e.newFileName,i.oldHeader=t.oldHeader||e.oldHeader,i.newHeader=t.newHeader||e.newHeader)),i.hunks=[];for(var r=0,o=0,h=0,p=0;r<e.hunks.length||o<t.hunks.length;){var f=e.hunks[r]||{oldStart:1/0},m=t.hunks[o]||{oldStart:1/0};if(l(f,m))i.hunks.push(c(f,h)),r++,p+=f.newLines-f.oldLines;else if(l(m,f))i.hunks.push(c(m,p)),o++,h+=m.newLines-m.oldLines;else{var g={oldStart:Math.min(f.oldStart,m.oldStart),oldLines:0,newStart:Math.min(f.newStart+h,m.oldStart+p),newLines:0,lines:[]};d(g,f.oldStart,f.lines,m.oldStart,m.lines),o++,r++,i.hunks.push(g)}}return i}function s(e,t){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,x.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,k.structuredPatch)(void 0,void 0,t,e)}return e}function a(e){return e.newFileName&&e.newFileName!==e.oldFileName}function u(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function l(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function c(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function d(e,t,n,o,s){var a={offset:t,lines:n,index:0},u={offset:o,lines:s,index:0};for(m(e,a,u),m(e,u,a);a.index<a.lines.length&&u.index<u.lines.length;){var l=a.lines[a.index],c=u.lines[u.index];if("-"!==l[0]&&"+"!==l[0]||"-"!==c[0]&&"+"!==c[0])if("+"===l[0]&&" "===c[0]){var d;(d=e.lines).push.apply(d,i(v(a)))}else if("+"===c[0]&&" "===l[0]){var y;(y=e.lines).push.apply(y,i(v(u)))}else"-"===l[0]&&" "===c[0]?p(e,a,u):"-"===c[0]&&" "===l[0]?p(e,u,a,!0):l===c?(e.lines.push(l),a.index++,u.index++):f(e,v(a),v(u));else h(e,a,u)}g(e,a),g(e,u),r(e)}function h(e,t,n){var r=v(t),o=v(n);if(w(r)&&w(o)){if((0,q.arrayStartsWith)(r,o)&&b(n,r,r.length-o.length)){var s;return void(s=e.lines).push.apply(s,i(r))}if((0,q.arrayStartsWith)(o,r)&&b(t,o,o.length-r.length)){var a;return void(a=e.lines).push.apply(a,i(o))}}else if((0,q.arrayEqual)(r,o)){var u;return void(u=e.lines).push.apply(u,i(r))}f(e,r,o)}function p(e,t,n,r){var o=v(t),s=y(n,o);if(s.merged){var a;(a=e.lines).push.apply(a,i(s.merged))}else f(e,r?s:o,r?o:s)}function f(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function m(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var i=t.lines[t.index++];e.lines.push(i),t.offset++}}function g(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function v(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var i=e.lines[e.index];if("-"===n&&"+"===i[0]&&(n="+"),n!==i[0])break;t.push(i),e.index++}return t}function y(e,t){for(var n=[],i=[],r=0,o=!1,s=!1;r<t.length&&e.index<e.lines.length;){var a=e.lines[e.index],u=t[r];if("+"===u[0])break;if(o=o||" "!==a[0],i.push(u),r++,"+"===a[0])for(s=!0;"+"===a[0];)n.push(a),a=e.lines[++e.index];u.substr(1)===a.substr(1)?(n.push(a),e.index++):s=!0}if("+"===(t[r]||"")[0]&&o&&(s=!0),s)return n;for(;r<t.length;)i.push(t[r++]);return{merged:i,changes:n}}function w(e){return e.reduce(function(e,t){return e&&"-"===t[0]},!0)}function b(e,t,n){for(var i=0;i<n;i++){var r=t[t.length-n+i].substr(1);if(e.lines[e.index+i]!==" "+r)return!1}return e.index+=n,!0}t.__esModule=!0,t.calcLineCount=r,t.merge=o;var k=n(14),x=n(11),q=n(15)},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n,r,o,s,u){function l(e){return e.map(function(e){return" "+e})}u||(u={}),"undefined"==typeof u.context&&(u.context=4);var c=(0,a.diffLines)(n,r,u);c.push({value:"",lines:[]});for(var d=[],h=0,p=0,f=[],m=1,g=1,v=function(e){var t=c[e],o=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=o,t.added||t.removed){var s;if(!h){var a=c[e-1];h=m,p=g,a&&(f=u.context>0?l(a.lines.slice(-u.context)):[],h-=f.length,p-=f.length)}(s=f).push.apply(s,i(o.map(function(e){return(t.added?"+":"-")+e}))),t.added?g+=o.length:m+=o.length}else{if(h)if(o.length<=2*u.context&&e<c.length-2){var v;(v=f).push.apply(v,i(l(o)))}else{var y,w=Math.min(o.length,u.context);(y=f).push.apply(y,i(l(o.slice(0,w))));var b={oldStart:h,oldLines:m-h+w,newStart:p,newLines:g-p+w,lines:f};if(e>=c.length-2&&o.length<=u.context){var k=/\n$/.test(n),x=/\n$/.test(r);0!=o.length||k?k&&x||f.push("\\ No newline at end of file"):f.splice(b.oldLines,0,"\\ No newline at end of file")}d.push(b),h=0,p=0,f=[]}m+=o.length,g+=o.length}},y=0;y<c.length;y++)v(y);return{oldFileName:e,newFileName:t,oldHeader:o,newHeader:s,hunks:d}}function o(e,t,n,i,o,s,a){var u=r(e,t,n,i,o,s,a),l=[];e==t&&l.push("Index: "+e),l.push("==================================================================="),l.push("--- "+u.oldFileName+("undefined"==typeof u.oldHeader?"":"\t"+u.oldHeader)),l.push("+++ "+u.newFileName+("undefined"==typeof u.newHeader?"":"\t"+u.newHeader));for(var c=0;c<u.hunks.length;c++){var d=u.hunks[c];l.push("@@ -"+d.oldStart+","+d.oldLines+" +"+d.newStart+","+d.newLines+" @@"),l.push.apply(l,d.lines)}return l.join("\n")+"\n"}function s(e,t,n,i,r,s){return o(e,e,t,n,i,r,s)}t.__esModule=!0,t.structuredPatch=r,t.createTwoFilesPatch=o,t.createPatch=s;var a=n(5)},function(e,t){function n(e,t){return e.length===t.length&&i(e,t)}function i(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}t.__esModule=!0,t.arrayEqual=n,t.arrayStartsWith=i},function(e,t){function n(e){for(var t=[],n=void 0,i=void 0,r=0;r<e.length;r++)n=e[r],i=n.added?1:n.removed?-1:0,t.push([i,n.value]);return t}t.__esModule=!0,t.convertChangesToDMP=n},function(e,t){function n(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.added?t.push("<ins>"):r.removed&&t.push("<del>"),t.push(i(r.value)),r.added?t.push("</ins>"):r.removed&&t.push("</del>")}return t.join("")}function i(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}t.__esModule=!0,t.convertChangesToXML=n}])}),define("list/orderlistmodel",["lib/extend","list/listmodel","lib/diff"],function(e,t,n){function i(e,t){var i;return e=e.join("\n"),e.length>0&&(e+="\n"),t=t.join("\n"),t.length>0&&(t+="\n"),i=n.diffLines(e,t),i.forEach(function(e){e.value=e.value.replace(/\n$/,"").split("\n").map(Number)}),i}function r(){r.superconstructor.call(this),this.makeReadonly()}return e(r,t),r.prototype.enforceOrder=function(e){var t,n;n=i(this.list,e),t=0,n.forEach(function(e){e.value.forEach(function(n){e.added?r.superclass.insert.call(this,t,n):e.removed&&(r.superclass.remove.call(this,t),t-=1),t+=1},this)},this)},r}),define("math/absolutematrix",["lib/extend","math/delegatematrix"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.get=function(e,t){var n=this.superget(e,t);return n<0?-n:n},n}),define("math/antisymmetricmatrixmodel",["lib/extend","math/matrixmodel"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.get=function(e,t){return e<t?-n.superclass.get.call(this,t,e):n.superclass.get.call(this,e,t)},n.prototype.set=function(e,t,i){return e<t?n.superclass.set.call(this,t,e,-i):n.superclass.set.call(this,e,t,i)},n}),define("math/positivematrix",["lib/extend","math/delegatematrix"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.get=function(e,t){var n=this.superget(e,t);return n<0?0:n},n}),define("math/symmetricmatrixmodel",["lib/extend","math/matrixmodel"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.get=function(e,t){return e<t?n.superclass.get.call(this,t,e):n.superclass.get.call(this,e,t)},n.prototype.set=function(e,t,i){return e<t?n.superclass.set.call(this,t,e,i):n.superclass.set.call(this,e,t,i)},n}),define("math/transposedifferencematrix",["lib/extend","math/delegatematrix"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.get=function(e,t){var n,i;if(n=this.superget(e,t),i=this.superget(t,e),void 0!==n&&void 0!==i)return n-i},n}),define("math/trianglematrixmodel",["lib/extend","math/matrixmodel"],function(e,t){function n(e){n.superconstructor.call(this,e)}return e(n,t),n.prototype.get=function(e,t){return e<t?0:n.superclass.get.call(this,e,t)},n.prototype.set=function(e,t,i){if(!(e<t))return n.superclass.set.call(this,e,t,i)},n}),define("ui/attributevalueview",["lib/extend","core/view"],function(e,t){function n(e,t,i){n.superconstructor.call(this,e,t),this.attribute=i,this.update()}return e(n,t),n.prototype.update=function(){this.$view.attr(this.attribute,this.model.get())},n.prototype.onupdate=function(){this.update()},n}),define("ui/autocompletionmodel",["lib/extend","core/model","jquery","core/type","ui/toast","presets","ui/strings"],function(e,t,n,i,r,o,s){function a(){a.superconstructor.call(this),this.names=[]}return e(a,t),a.prototype.EVENTS={clear:!0,update:!0},a.prototype.download=function(e){var t=this;e&&n.get(e,void 0,function(e,n,i){t.parse(e)},"text").fail(function(){console.error("could not read "+o.names.playernameurl+". Is this a local installation?"),new r(s.autocompletereloadfailed,r.LONG)})},a.prototype.parse=function(e){var t;if(0===e.length)new r(s.fileempty);else try{t=JSON.parse(e),this.set(t),new r(s.autocompleteloaded)}catch(e){console.error(e.stack),this.clear(),new r(s.autocompletereloadfailed,r.LONG)}},a.prototype.set=function(e){if(!i.isArray(e))throw new Error("names is not an array");this.clear(),this.names=e.map(function(e){return e.trim()}),this.emit("update")},a.prototype.clear=function(){this.names=[],this.emit("clear")},a.prototype.save=function(){var e=a.superclass.save.call(this);return e.names=this.names.slice(),e},a.prototype.restore=function(e){return!!a.superclass.restore.call(this,e)&&(this.set(e.names.slice()),this.emit("update"),!0)},a.prototype.SAVEFORMAT=Object.create(a.superclass.SAVEFORMAT),a.prototype.SAVEFORMAT.names=[String],a}),!function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,r){return!!(i=n.call(null,r,e,t))&&void 0}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,r){return!(i=n.call(null,r,e,t))&&void 0}),!!i):i},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,r;return function(){var o,s,a=this,u=arguments;return o=function(){i=null,n||(r=e.apply(a,u))},s=n&&!i,clearTimeout(i),i=setTimeout(o,t),s&&(r=e.apply(a,u)),r}},throttle:function(e,t){var n,i,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=e.apply(n,i)},function(){var u=new Date,l=t-(u-s);return n=this,i=arguments,0>=l?(clearTimeout(r),r=null,s=u,o=e.apply(n,i)):r||(r=setTimeout(a,l)),o}},noop:function(){}}}(),n="0.10.5",i=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function(){var n=[].slice.call(arguments,0);return function(i){var r=[];return t.each(n,function(n){r=r.concat(e(t.toStr(i[n])))}),r}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),r=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function r(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new r(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];return t?(this.list.moveToFront(t),t.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),o=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function r(e){return JSON.parse(e)}var o,s;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(e){o=null}return s=o&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),r(o.getItem(this._prefix(e)))},set:function(e,r,s){return t.isNumber(s)?o.setItem(this._ttlKey(e),i(n()+s)):o.removeItem(this._ttlKey(e)),o.setItem(this._prefix(e),i(r))},remove:function(e){return o.removeItem(this._ttlKey(e)),o.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],i=o.length;for(e=0;i>e;e++)(t=o.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var i=r(o.getItem(this._ttlKey(e)));return!!(t.isNumber(i)&&n()>i)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,s),e}(),s=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?i(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=t.cache===!1?new r(0):u}function i(n){return function(i,r){function o(e){t.defer(function(){a.resolve(e)})}function s(e){t.defer(function(){a.reject(e)})}var a=e.Deferred();return n(i,r,o,s),a}}var o=0,s={},a=6,u=new r(10);return n.setMaxPendingRequests=function(e){a=e},n.resetCache=function(){u.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),c._cache.set(e,t)}function r(){n&&n(!0)}function u(){o--,delete s[e],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var l,c=this;this.cancelled||e!==this.lastUrl||((l=s[e])?l.done(i).fail(r):a>o?(o++,s[e]=this._send(e,t).done(i).fail(r).always(u)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,i){var r;return t.isFunction(n)&&(i=n,n={}),this.cancelled=!1,this.lastUrl=e,(r=this._cache.get(e))?t.defer(function(){i&&i(null,r)}):this._get(e,n,i),!!r},cancel:function(){this.cancelled=!0}}),n}(),a=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function r(){return{ids:[],children:{}}}function o(e){for(var t={},n=[],i=0,r=e.length;r>i;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function s(e,t){function n(e,t){return e-t}var i=0,r=0,o=[];e=e.sort(n),t=t.sort(n);for(var s=e.length,a=t.length;s>i&&a>r;)e[i]<t[r]?i++:e[i]>t[r]?r++:(o.push(e[i]),i++,r++);return o}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var o,s;o=n.datums.push(e)-1,s=i(n.datumTokenizer(e)),t.each(s,function(e){var t,i,s;for(t=n.trie,i=e.split("");s=i.shift();)t=t.children[s]||(t.children[s]=r()),t.ids.push(o)})})},get:function(e){var n,r,a=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,o;if(r&&0===r.length)return!1;for(t=a.trie,n=e.split("");t&&(i=n.shift());)t=t.children[i];return t&&0===n.length?(o=t.ids.slice(0),void(r=r?s(r,o):o)):(r=[],!1)}),r?t.map(o(r),function(e){return a.datums[e]}):[]},reset:function(){this.datums=[],this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),u=function(){"use strict";function i(e){return e.local||null}function r(i){var r,o;return o={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(r=i.prefetch||null)&&(r=t.isString(r)?{url:r}:r,r=t.mixin(o,r),r.thumbprint=n+r.thumbprint,r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",!r.url&&e.error("prefetch requires url to be set")),r}function o(n){function i(e){return function(n){return t.debounce(n,e)}}function r(e){return function(n){return t.throttle(n,e)}}var o,s;return s={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(o=n.remote||null)&&(o=t.isString(o)?{url:o}:o,o=t.mixin(s,o),o.rateLimiter=/^throttle$/i.test(o.rateLimitBy)?r(o.rateLimitWait):i(o.rateLimitWait),o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",delete o.rateLimitBy,delete o.rateLimitWait,!o.url&&e.error("remote requires url to be set")),o}return{local:i,prefetch:r,remote:o}}();!function(n){"use strict";function r(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=l(t.sorter),this.dupDetector=t.dupDetector||c,this.local=u.local(t),this.prefetch=u.prefetch(t),this.remote=u.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new a({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new o(this.cacheKey):null}function l(e){function n(t){return t.sort(e)}function i(e){return e}return t.isFunction(e)?n:i}function c(){return!1}var d,h;return d=n.Bloodhound,h={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=r,r.noConflict=function(){return n.Bloodhound=d,r},r.tokenizers=i,t.mixin(r.prototype,{_loadPrefetch:function(t){function n(e){o.clear(),o.add(t.filter?t.filter(e):e),o._saveToStorage(o.index.serialize(),t.thumbprint,t.ttl)}var i,r,o=this;return(i=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(i),r=e.Deferred().resolve()):r=e.ajax(t.url,t.ajax).done(n),r},_getFromRemote:function(e,t){function n(e,n){t(e?[]:o.remote.filter?o.remote.filter(n):n)}var i,r,o=this;if(this.transport)return e=e||"",r=encodeURIComponent(e),i=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(i,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(h.data,e,n),this.storage.set(h.protocol,location.protocol,n),this.storage.set(h.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(h.data),n.protocol=this.storage.get(h.protocol),n.thumbprint=this.storage.get(h.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){r.add(t.isFunction(o)?o():o)}var i,r=this,o=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),o&&i.done(n),this.transport=this.remote?new s(this.remote):null,this.initPromise=i.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function i(e){var i=o.slice(0);t.each(e,function(e){var n;return n=t.some(i,function(t){return r.dupDetector(e,t)}),!n&&i.push(e),i.length<r.limit}),n&&n(r.sorter(i))}var r=this,o=[],s=!1;o=this.index.get(e),o=this.sorter(o).slice(0,this.limit),o.length<this.limit?s=this._getFromRemote(e,i):this._cancelLastRemoteRequest(),s||(o.length>0||!this.transport)&&n&&n(o)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&s.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),r}(this);var l=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),c=function(){"use strict";var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),d=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i="typeahead:";return t.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(i+e,t)}}),n}(),h=function(){"use strict";function e(e,t,n,i){var r;if(!n)return this;for(t=t.split(u),n=i?a(n,i):n,this._callbacks=this._callbacks||{};r=t.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(u);t=e.shift();)delete this._callbacks[t];return this}function r(e){var t,n,i,r,s;if(!this._callbacks)return this;for(e=e.split(u),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)r=o(n.sync,this,[t].concat(i)),s=o(n.async,this,[t].concat(i)),r()&&l(s);return this}function o(e,t,n){function i(){for(var i,r=0,o=e.length;!i&&o>r;r+=1)i=e[r].apply(t,n)===!1;return!i}return i}function s(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function a(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var u=/\s+/,l=s();return{onSync:n,onAsync:t,off:i,trigger:r}}(),p=function(e){"use strict";function n(e,n,i){for(var r,o=[],s=0,a=e.length;a>s;s++)o.push(t.escapeRegExChars(e[s]));return r=i?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function o(t){var n,i,o;return(n=a.exec(t.data))&&(o=e.createElement(r.tagName),r.className&&(o.className=r.className),i=t.splitText(n.index),i.splitText(n[0].length),o.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(o,i)),!!n}function s(e,t){for(var n,i=3,r=0;r<e.childNodes.length;r++)n=e.childNodes[r],n.nodeType===i?r+=t(n)?1:0:s(n,t)}var a;r=t.mixin({},i,r),r.node&&r.pattern&&(r.pattern=t.isArray(r.pattern)?r.pattern:[r.pattern],a=n(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,o))}}(window.document),f=function(){"use strict";function n(n){var r,o,a,u,l=this;n=n||{},n.input||e.error("input is missing"),r=t.bind(this._onBlur,this),o=t.bind(this._onFocus,this),a=t.bind(this._onKeydown,this),u=t.bind(this._onInput,this),this.$hint=e(n.hint),this.$input=e(n.input).on("blur.tt",r).on("focus.tt",o).on("keydown.tt",a),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){s[e.which||e.keyCode]||t.defer(t.bind(l._onInput,l,e))}):this.$input.on("input.tt",u),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function r(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function o(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,h,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=s[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,i,r;switch(e){case"tab":i=this.getHint(),r=this.getInputValue(),n=i&&i!==r&&!o(t);break;case"up":case"down":n=!o(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!o(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;e=this.getInputValue(),t=r(e,this.query),n=!!t&&this.query.length!==e.length,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),i=""!==e&&n&&!this.hasOverflow(),!i&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),m=function(){"use strict";function n(n){n=n||{},n.templates=n.templates||{},n.source||e.error("missing source"),n.name&&!o(n.name)&&e.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||t.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=r(n.templates,this.displayFn),this.$el=e(l.dataset.replace("%CLASS%",this.name))}function i(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function r(e,n){function i(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function o(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var s="ttDataset",a="ttValue",u="ttDatum";return n.extractDatasetName=function(t){return e(t).data(s)},n.extractValue=function(t){return e(t).data(a)},n.extractDatum=function(t){return e(t).data(u)},t.mixin(n.prototype,h,{_render:function(n,i){function r(){return m.templates.empty({query:n,isEmpty:!0})}function o(){function r(t){var n;return n=e(l.suggestion).append(m.templates.suggestion(t)).data(s,m.name).data(a,m.displayFn(t)).data(u,t),n.children().each(function(){e(this).css(c.suggestionChild)}),n}var o,d;return o=e(l.suggestions).css(c.suggestions),d=t.map(i,r),o.append.apply(o,d),m.highlight&&p({className:"tt-highlight",node:o[0],pattern:n}),o}function d(){return m.templates.header({query:n,isEmpty:!f})}function h(){return m.templates.footer({query:n,isEmpty:!f})}if(this.$el){var f,m=this;this.$el.empty(),f=i&&i.length,!f&&this.templates.empty?this.$el.html(r()).prepend(m.templates.header?d():null).append(m.templates.footer?h():null):f&&this.$el.html(o()).prepend(m.templates.header?d():null).append(m.templates.footer?h():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),g=function(){"use strict";function n(n){var r,o,s,a=this;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),r=t.bind(this._onSuggestionClick,this),o=t.bind(this._onSuggestionMouseEnter,this),s=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",r).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",s),t.each(this.datasets,function(e){a.$menu.append(e.getRoot()),e.onSync("rendered",a._onRendered,a)})}function i(e){return new m(e)}return t.mixin(n.prototype,h,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion");
},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,n,i,r;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),i=t.index(n)+e,i=(i+1)%(t.length+1)-1,-1===i)return void this.trigger("cursorRemoved");-1>i&&(i=t.length-1),this._setCursor(r=t.eq(i)),this._ensureVisible(r)}},_ensureVisible:function(e){var t,n,i,r;t=e.position().top,n=t+e.outerHeight(!0),i=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>t?this.$menu.scrollTop(i+t):n>r&&this.$menu.scrollTop(i+(n-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:m.extractDatum(e),value:m.extractValue(e),datasetName:m.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),n}(),v=function(){"use strict";function n(n){var r,o,s;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),r=this.$node.find(".tt-dropdown-menu"),o=this.$node.find(".tt-input"),s=this.$node.find(".tt-hint"),o.on("blur.tt",function(e){var n,i,s;n=document.activeElement,i=r.is(n),s=r.has(n).length>0,t.isMsie()&&(i||s)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){o.focus()}))}),r.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new d({el:o}),this.dropdown=new g({menu:r,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new f({input:o,hint:s}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(t,n){var i,o,a,u;i=e(t),o=e(l.wrapper).css(c.wrapper),a=e(l.dropdown).css(c.dropdown),u=i.clone().css(c.hint).css(r(i)),u.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),i.data(s,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?c.input:c.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(e){}return i.wrap(o).parent().prepend(n?u:null).append(a)}function r(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function o(e){var n=e.find(".tt-input");t.each(n.data(s),function(e,i){t.isUndefined(e)?n.removeAttr(i):n.attr(i,e)}),n.detach().removeData(s).removeClass("tt-input").insertAfter(e),e.remove()}var s="ttAttrs";return t.mixin(n.prototype,{_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&i&&(this._select(i),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,n,i,r,o,s;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=f.normalizeQuery(n),r=t.escapeRegExChars(i),o=new RegExp("^(?:"+r+")(.+$)","i"),s=o.exec(e.value),s?this.input.setHint(n+s[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,i,r;t=this.input.getHint(),n=this.input.getQuery(),i=e||this.input.isCursorAtEnd(),t&&n!==t&&i&&(r=this.dropdown.getDatumForTopSuggestion(),r&&this.input.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.raw,r.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),o(this.$node),this.$node=null}}),n}();!function(){"use strict";var n,i,r;n=e.fn.typeahead,i="ttTypeahead",r={initialize:function(n,r){function o(){var o,s,a=e(this);t.each(r,function(e){e.highlight=!!n.highlight}),s=new v({input:a,eventBus:o=new d({el:a}),withHint:!!t.isUndefined(n.hint)||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:r}),a.data(i,s)}return r=t.isArray(r)?r:[].slice.call(arguments,1),n=n||{},this.each(o)},open:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.close()}return this.each(t)},val:function(t){function n(){var n,r=e(this);(n=r.data(i))&&n.setVal(t)}function r(e){var t,n;return(t=e.data(i))&&(n=t.getVal()),n}return arguments.length?this.each(n):r(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(i))&&(t.destroy(),n.removeData(i))}return this.each(t)}},e.fn.typeahead=function(t){var n;return r[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(i)}),r[t].apply(n,[].slice.call(arguments,1))):r.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()}(window.jQuery),define("lib/typeahead",["jquery"],function(){}),define("ui/autocompletionview",["lib/extend","core/view","lib/typeahead"],function(e,t,n){function i(e,t){i.superconstructor.call(this,e,t),this.update()}return e(i,t),i.prototype.update=function(){var e;this.reset(),this.$view.typeahead&&0!==this.model.names.length&&(e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("val"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:this.model.names.map(this.stringToBloodhoundObject)}),e.initialize(),this.$view.typeahead({hint:!0,highlight:!0,minLength:1},{name:"names",displayKey:"val",source:e.ttAdapter()}))},i.prototype.onupdate=function(){this.update()},i.prototype.onclear=function(){this.$view.typeahead&&this.$view.typeahead("val","")},i.prototype.reset=function(){this.$view.typeahead&&this.$view.typeahead("destroy")},i.prototype.stringToBloodhoundObject=function(e){return{val:e}},i.prototype.destroy=function(){i.superclass.destroy.call(this),this.reset()},i}),define("ui/binarytreemodel",["lib/extend","list/indexedmodel","core/type"],function(e,t,n){function i(e){i.superconstructor.call(this),n.isNumber(e)?this.id=e:this.id=1}return e(i,t),i.prototype.getParentID=function(){return this.id>>1},i.prototype.getSiblingID=function(){return this.id>1?1^this.id:this.id},i.prototype.getLeftChildID=function(){return this.id>0?this.id<<1:0===this.id?1:0},i.prototype.getRightChildID=function(){return this.getLeftChildID()+(this.id<=0?0:1)},i.prototype.getDepth=function(){return this.id>=1?Math.floor(Math.log(this.id)/Math.LN2):0},i}),define("ui/browser",["background/online","ui/update"],function(e,t){var n;return n={name:void 0,version:void 0,online:void 0,cached:void 0,local:void 0,secure:void 0,legit:void 0,inithash:window.location.hash.replace(/^#/,"")},n.update=function(){var i=function(){var e,t,n,i;return e=navigator.userAgent,i=/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i,n=e.match(i)||[],/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE "+(t[1]||"")):"Chrome"===n[1]&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),null!==t)?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}();return n.name=i.match(/^\S+/)[0],"undefined"===n.name&&(n.name=void 0),n.version=i.match(/\S+$/)[0],"undefined"===n.version?n.version=void 0:n.version=Number(n.version),n.online=e(),n.cached=t.isCached,n.local="file:"===document.location.protocol,n.secure="https:"===document.location.protocol,n.legit=/(^|\.)tuvero\.de$/.test(document.location.host),n},n.update(),n}),define("ui/browserinfocontroller",["lib/extend","core/controller"],function(e,t){function n(e){var t;n.superconstructor.call(this,e),this.$updateButton=this.view.$view.find("button.update"),t=this.model,this.$updateButton.click(function(){t.emit("update")})}return e(n,t),n}),define("ui/browserinfoview",["lib/extend","core/view","ui/browser","ui/toast","ui/browserinfocontroller","ui/update"],function(e,t,n,i,r,o){function s(e){s.superconstructor.call(this,void 0,e),this.$name=this.$view.find(".name"),this.$version=this.$view.find(".version"),this.$online=this.$view.find(".online"),this.$local=this.$view.find(".local"),this.$cached=this.$view.find(".cached"),this.controller=new r(this),this.update()}return e(s,t),s.prototype.update=function(){n.update(),this.$name.text(n.name),this.$version.text(n.version),this.$online.text(n.online),this.$local.text(n.local),this.$cached.text(n.cached)},s.prototype.onupdate=function(){this.update(),o(),new i("update")},s}),define("ui/checkboxcontroller",["jquery","lib/extend","core/controller"],function(e,t,n){function i(t){var n,r,o;i.superconstructor.call(this,t),n=this.model,r=this.view.$view,o=r.parent().filter("span"),o.click(function(t){"SPAN"===e(t.target).prop("tagName")&&r.click()}),r.change(function(){var e,t;e=r.prop("checked"),t=n.get(),e!==t&&n.set(e)})}return t(i,n),i}),define("ui/checkboxview",["lib/extend","core/view","core/valuemodel","ui/checkboxcontroller"],function(e,t,n,i){function r(e,t){r.superconstructor.call(this,e||new n,t),this.model.get()!==!0&&this.model.get()!==!1&&this.model.set(this.$view.prop("checked")),this.controller=new i(this),this.update()}return e(r,t),r.prototype.update=function(){var e,t;e=this.$view.prop("checked"),t=this.model.get(),e!==t&&this.$view.prop("checked",t)},r.prototype.onupdate=function(){this.update()},r}),define("ui/closedtournamentcollapselistener",["lib/extend","core/listener"],function(e,t){function n(e){var t=e.model;n.superconstructor.call(this,t.closedTournaments),this.tournaments=t,this.tournamentlistview=e}return e(n,t),n.prototype.collapse=function(e){var t,n;t=this.tournamentlistview.getSubview(e),n=t.boxview,n.$view.hasClass("collapsed")||n.model.emit("toggle")},n.prototype.oninsert=function(e,t,n){var i=this;window.setTimeout(function(){i.collapse(n.object)},1)},n}),define("ui/renamecontroller",["jquery","lib/extend","core/controller","timemachine/timemachine","ui/stateloader","ui/strings","ui/toast","ui/filesavermodel"],function(e,t,n,i,r,o,s,a){function u(e,t){var n;u.superconstructor.call(this,e),this.$anchor=void 0,this.$rename=void 0,this.mouseSupport=!!t,n="click"+(this.mouseSupport?" mouseenter":""),this.view.$view.on(n,".rename",this.startRename.bind(this)),this.view.$view.filter(".rename").on(n,this.startRename.bind(this))}return t(u,n),u.prototype.setName=function(e){return console.error("setName() needs to be overloaded"),!1},u.prototype.getName=function(){return console.error("getName() needs to be overloaded"),"overload RenameController.prototype.getName()!"},u.prototype.initRenameInput=function(){this.$rename||(this.$rename=e("<input>").addClass("rename"),this.$rename.on("blur"+(this.mouseSupport?" mouseleave":""),this.endRename.bind(this)),this.$rename.keydown(this.renameKeyDown.bind(this)))},u.prototype.startRename=function(t){var n;if(!this.$anchor&&(this.$anchor=e(t.target),this.$anchor))return n=this.getName(),void 0===n?void(this.$anchor=void 0):(this.initRenameInput(),this.$anchor.before(this.$rename),this.$anchor.addClass("hidden"),this.$rename.val(n),this.$rename.focus(),t.preventDefault(),!1)},u.prototype.endRename=function(e){var t;if(this.$anchor)return t=this.$rename.val().trim(),this.setName(t)&&(this.$anchor.removeClass("hidden"),this.$anchor=void 0,this.$rename.detach()),e.preventDefault(),!1},u.prototype.renameKeyDown=function(e){if(e&&this.$rename)switch(e.which){case 27:return this.$rename.val(this.getName()),this.endRename(e);case 13:return this.endRename(e)}},u.prototype.destroy=function(){this.$rename&&this.$rename.remove(),u.superclass.destroy.call(this)},u}),define("ui/teamcontroller",["lib/extend","ui/renamecontroller","ui/toast","ui/strings"],function(e,t,n,i){function r(e,t){r.superconstructor.call(this,e)}return e(r,t),r.prototype.getPlayer=function(e){var t,n;return n=this.view.$view.find(".name"),0===n.length&&(n=this.view.$view.filter(".name")),t=n.index(e),this.model.getPlayer(t)},r.prototype.getName=function(){var e;return this.$anchor?(e=this.getPlayer(this.$anchor),e.getName()):""},r.prototype.setName=function(e){var t;return!(!this.$anchor||!e)&&(t=this.getPlayer(this.$anchor),t.setName(e),!0)},r}),define("ui/teamview",["lib/extend","core/view","core/type","ui/teamcontroller"],function(e,t,n,i){function r(e,t,o){n.isNumber(e)&&void 0!==o&&(e=o.get(e)),r.superconstructor.call(this,e,t),this.teamController=new i(this),this.update()}return e(r,t),r.prototype.update=function(){var e,t,i,r,o,s;for(r=this.$view.find(".teamno"),0===r.length&&(r=this.$view.filter(".teamno")),s=this.model.getID(),n.isNumber(s)&&(s+=1),r.text(s),e=this.$view.find(".name"),0===e.length&&(e=this.$view.filter(".name")),t=0;t<3;t+=1)i=e.eq(t),o=this.model.getPlayer(t),o?i.text(o.getName()):i.remove()},r.prototype.onupdate=function(){this.update()},r.bindTeamList=function(t){function n(e,i){n.superconstructor.call(this,t.get(e),i)}return e(n,r),n},r.destroy=function(){this.teamController.destroy(),r.superclass.destroy.call(this)},r}),define("ui/matchcontroller",["jquery","lib/extend","core/controller","options"],function(e,t,n,i){function r(e,t){r.superconstructor.call(this,e),this.$form=t,this.$acceptbutton=this.$form.find("button.accept"),this.$cancelbutton=this.$form.find("button.cancel"),this.$scores=this.$form.find(".score"),this.$scores.val(i.defaultscore||0),this.$acceptbutton.click(this.accept.bind(this)),this.$cancelbutton.click(this.cancel.bind(this)),this.initKeyListeners(),this.initNumberValidation(),this.updateButtonStatus()}return t(r,n),r.prototype.initKeyListeners=function(){var t,n;t=this,this.$form.keydown(function(i){switch(i.which){case 27:t.cancel();break;case 13:t.accept();break;case 9:if(i.shiftKey)return;if(0!==t.$acceptbutton.filter(":not(.hidden)").length)return;if(n=t.$scores.eq(t.$scores.length-1),n.data()!==e(i.target).data())return;if(t.accept())break;return;default:return}return i.preventDefault(),!1})},r.prototype.initNumberValidation=function(){var t=this;this.$scores.click(function(){e(this).select()}),this.$scores.on("change keyup",function(){var n,r,o;o=!0,n=e(this),r=n.val(),0===r.length?o=!1:(r=Number(r),isNaN(r)?o=!1:r<i.minpoints?o=!1:r>i.maxpoints&&(o=!1)),o?n.removeClass("invalid"):n.addClass("invalid"),t.updateButtonStatus()}).attr("min",i.minpoints).attr("max",i.maxpoints)},r.prototype.updateButtonStatus=function(){this.$acceptbutton.prop("disabled",!this.validateScore())},r.prototype.validateScore=function(){var t,n,r,o;return t=0===this.$scores.filter(".invalid").length,t&&(i.tiesforbidden||i.maxpointtiesforbidden)&&(n=!0,r=void 0,this.$scores.each(function(){var t=Number(e(this).val());void 0===r&&(r=t),t!==r&&(n=!1)}),n&&i.tiesforbidden&&(t=!1),o=Number(this.$scores.eq(0).val())===i.maxpoints,n&&o&&i.maxpointtiesforbidden&&(t=!1)),t},r.prototype.accept=function(){var t;return!!this.validateScore()&&(t=[],this.$scores.each(function(n){t[n]=Number(e(this).val())}),this.model.finish(t),!0)},r.prototype.cancel=function(){},r}),define("ui/matchview",["lib/extend","jquery","core/view","ui/teamview","ui/matchcontroller","ui/playermodel","ui/teammodel","ui/strings","core/type"],function(e,t,n,i,r,o,s,a,u){function l(e){var t,n;for(t=[];t.length<e;)t.push(f);return n=new s(t),n.setID(a.byeid),n}function c(e){var t,n;for(t=[];t.length<e;)t.push(p);return n=new s(t),n.setID(""),n}function d(e){var n,i,r,o;for(n=void 0,i=[],r=0;r<=e.length;r+=1)o=e.eq(r),(r===e.length||o.hasClass("teamno"))&&(n&&i.push(t(n)),n=void 0),o&&(n||(n=[]),n.push(o[0]));return i}function h(e,t,n){h.superconstructor.call(this,e,t),this.teamviews=[],n?this.teamlist=n:this.teamlist||(this.teamlist=void 0),this.$finishform=this.$view.find(".finish"),this.model.isRunningMatch()?this.controller=new r(this,this.$finishform):(this.$finishform.remove(),this.$finishform=void 0),this.update()}var p,f;return f=new o(a.byename),p=new o(""),p.name="",p.setName=function(){},e(h,n),h.prototype.destroyTeamViews=function(){this.teamviews.forEach(function(e){e.destroy()}),this.teamviews.splice(0)},h.prototype.update=function(){var e,n,r,o,s,h,p;for(e=this.$view.find(".team"),0===e.length&&(e=d(this.$view.find(">.teamno , >.name"))),0===e.length&&(e=d(this.$view.filter(".teamno,.name"))),p=void 0,this.destroyTeamViews(),s=this.model.isBye&&this.model.isBye(),n=0;n<e.length;n+=1)r=t(e[n]),o=this.model.getTeamID(n%this.model.length),this.teamlist?(void 0!==o?(h=this.teamlist.get(o),p=h.length,s&&n%this.model.length!==0&&(h=l(h.length))):(void 0===p&&(p=this.teamlist.get(0)&&this.teamlist.get(0).length),h=c(p)),this.teamviews.push(new i(h,r))):(h=s?a.byename:u.isNumber(o)?o+1:void 0===o?"":o,r.text(h))},h.prototype.onupdate=function(e,t,n){this.update()},h.bindTeamList=function(t){function n(){n.superconstructor.apply(this,arguments)}return e(n,h),n.prototype.teamlist=t,n},h}),define("ui/matchresultcontroller",["lib/extend","ui/matchcontroller","ui/strings","ui/toast","options"],function(e,t,n,i,r){function o(e,t,n){return o.superconstructor.call(this,e,t),2!==this.model.length?void console.error("corrections corrently only works with two teams."):(this.tournament=n,this.$match=this.$form.parents(".match").eq(0),this.$result=this.view.$result,this.$result.click(this.enableCorrection.bind(this)),void this.updateScore())}return e(o,t),o.prototype.updateScore=function(){this.$scores.eq(0).val(this.model.score[0]),this.$scores.eq(1).val(this.model.score[1]),this.$scores.attr("max",r.maxpoints),this.$scores.attr("min",r.minpoints)},o.prototype.enableCorrection=function(){this.updateScore(),this.$match.addClass("correcting"),this.$scores.eq(0).click()},o.prototype.disableCorrection=function(){this.$match.removeClass("correcting")},o.prototype.cancel=function(){new i(n.pointchangeaborted),this.disableCorrection()},o.prototype.accept=function(){var e;e=[],e.push(Number(this.$scores.eq(0).val())),e.push(Number(this.$scores.eq(1).val())),isNaN(e[0])||isNaN(e[1])||e[0]<r.minpoints||e[1]<r.minpoints||e[0]>r.maxpoints||e[1]>r.maxpoints||e[0]===this.model.score[0]&&e[1]===this.model.score[1]||(this.tournament.correct(this.model,e),new i(n.pointchangeapplied),this.disableCorrection())},o}),define("ui/matchresultview",["lib/extend","ui/matchview","ui/matchresultcontroller"],function(e,t,n){function i(e,t,r,o){i.superconstructor.call(this,e,t,r),this.$result=this.$view.find(".result"),this.$scores=this.$result.find(".score"),this.$correctionform=this.$view.find(".correct"),this.model.isResult()?this.model.isBye()?(this.$correctionform.remove(),this.$correctionform=void 0):o&&(this.controller=new n(this,this.$correctionform,o)):(this.$result.remove(),this.$result=void 0,this.$scores=void 0,this.$correctionform.remove(),this.$correctionform=void 0),this.updateScore()}return e(i,t),i.prototype.updateScore=function(){this.model.isResult()&&this.model.score.forEach(function(e,t){this.$scores.eq(t).text(e)},this)},i}),define("ui/correctionview",["lib/extend","core/view","ui/matchresultview"],function(e,t,n){function i(e,t){i.superconstructor.call(this,e,t),this.$before=this.$view.find(".before"),this.$after=this.$view.find(".after"),this.beforeview=new n(e.before,this.$before),this.afterview=new n(e.after,this.$after)}return e(i,t),i}),define("ui/csvexportcontroller",["jquery","lib/extend","core/controller","ui/state","presets","lib/FileSaver","lib/Blob","ui/toast","ui/strings","timemachine/timemachine"],function(e,t,n,i,r,o,s,a,u,l){function c(t){var n;c.superconstructor.call(this,t),n=this,this.$buttons=this.view.$view.find("button"),this.$buttons.click(function(){var t,i;t=e(this),i=t.attr("class").split(" ").filter(function(e){return d.indexOf(e)!==-1}),n.saveCSV(i)})}var d=["teams","ranking","history"];return t(c,n),c.prototype.saveCSV=function(e){var t,n,i,c;if(!l.isInitialized())return void new a(u.notournament,a.LONG);c=l.commit.get().getTreeName()||r.target,i=c.substr(0,64)+"_"+e.join("_")+".csv",t=this.generateCSV(e);try{n=new s([t],{type:"text/csv"})}catch(e){console.log(e.stack),new a(u.exportfailed,a.LONG)}o(n,i)||(console.error("saveAs failed!"),new a(u.exportfailed,a.LONG))},c.prototype.generateCSV=function(e){var t=e.filter(function(e){return d.indexOf(e)!==-1}).map(function(e){return this[e+"ToCSV"]?this[e+"ToCSV"]():(i.emit("error","missing CSV export function: "+e),"CSV export failed for "+e)},this);return t.join("\r\n\r\n")},c.prototype.teamsToCSV=function(){var e;return e=i.teams.map(function(e){var t,n;for(n=[e.getID()+1],t=0;t<e.length;t+=1)n.push(this.escape(e.getPlayer(t).getName()));return n.join(",")},this),e.unshift(u.csvheader_teams),e.join("\r\n")},c.prototype.rankingToCSV=function(){var e=i.tournaments.map(function(e){var t,n;return n=e.getRanking().get(),t=n.displayOrder.map(function(e){var t,i;return t=n.ids[e],i=[n.ranks[e]+1,t+1],n.components.map(function(t){i.push(n[t][e])}),i.join(",")}),t.unshift(u.csvheader_ranking+","+n.components.join(",")),t.unshift(this.escape(e.getName().get())),t.join("\r\n")},this);return e.join("\r\n\r\n")},c.prototype.historyToCSV=function(){var e;return e=i.tournaments.map(function(e){var t=[this.escape(e.getName().get()),u.csvheader_history];return e.getHistory().map(function(e){var n,i;if(n=[],n.push(e.getGroup()+1),n.push(e.getID()+1),e.isResult()){for(i=0;i<e.length;i+=1)i>0&&e.isBye()?n.push(u.byeid):n.push(e.getTeamID(i)+1);for(i=0;i<e.length;i+=1)n.push(e.score[i]);t.push(n.join(","))}},this),t.join("\r\n")},this),e.join("\r\n\r\n")},c.prototype.escape=function(e){return e=""+e,/[",]|\s/.test(e)&&(e=e.replace(/"/g,'""'),e='"'+e+'"'),e},c}),define("ui/storage",["lib/extend","core/type","core/model","core/valuemodel","core/listener"],function(e,t,n,i,r){function o(){}return o.available=function(){return!!window.localStorage||(console.error("Storage is not available"),!1)},o.values={},o.register=function(s,a){var u,l;if(s=s||void 0,a=a||n,!s||!t.isString(s))return console.error("Storage.getModel(): Key is not a String: "),void console.error(s);if(!e.isSubclass(a,n)&&a!==n)return console.error("Storage.register(): Not a model: "),void console.error(a);if(o.available()){if(l=o.values[s])return l instanceof a?l:(console.error("Storage.register(): stored instance does not match Implementation:"),console.error(l),void console.error(a));if(l=new a,t.isFunction(l.save))r.bind(l,"update",function(){window.localStorage.setItem(s,JSON.stringify(l.save()))});else{if(!(l instanceof i))return console.error("Storage.register(): instance cannot save/restore"),void console.error(l);r.bind(l,"update",function(){window.localStorage.setItem(s,JSON.stringify(l.get()))})}return u=window.localStorage.getItem(s),t.isString(u)&&(u=JSON.parse(u),t.isFunction(l.restore)?l.restore(u):l instanceof i&&l.set(u)),o.values[s]=l,l}},o.clear=function(e){o.available()&&(void 0===e?Object.keys(o.values).forEach(o.clear.bind(o)):(o.values[e]&&o.values[e].destroy(),window.localStorage.removeItem(e)))},o}),define("ui/loadedimagesview",["lib/extend","core/view","jquery"],function(e,t,n){function i(e){i.superconstructor.call(this,void 0,e),this.appendImages(n(document.body))}return e(i,t),i.imageList=function(e){var t,i;return t=e.find("[data-img]"),i={},t.each(function(){i[n(this).attr("data-img")]=!0}),delete i.sprite,Object.keys(i).sort()},i.prototype.appendImages=function(e){var t;t=i.imageList(e),t.forEach(function(e){var t=n("<div>").attr("data-img",e);this.$view.append(t)},this)},i}),define("ui/registerteamscontroller",["lib/extend","core/controller","core/view","ui/state","ui/teammodel","ui/playermodel","core/random","ui/statesaver"],function(e,t,n,i,r,o,s,a){function u(e,t){u.superconstructor.call(this,new n(void 0,e)),this.$button=e,this.$numteams=t,e.click(this.registerTeams.bind(this)),this.$numteams.keydown(function(e){13===e.which&&this.registerTeams()}.bind(this))}var l;return l=new s,e(u,t),u.prototype.registerTeams=function(){var e;if(e=Number(this.$numteams.val()),!isNaN(e))for(a.canSave()||a.createNewEmptyTree("Tuvero Test-Turnier");e>0;e-=1)i.teams.push(u.createTeam())},u.createTeam=function(){var e,t;for(e=[];e.length<i.teamsize.get();)e.push(new o(u.randomName()));return t=new r(e)},u.randomName=function(){var e,t,n,i,r,o;for(r=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","ä","ö","ü","ß"],o=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Ä","Ö","Ü"],n=l.nextInt(6)+3,e="",e+=l.pick(o),i=0;i<n;i++)e+=l.pick(r);for(n=l.nextInt(6)+3,t="",t+=l.pick(o),i=0;i<n;i++)t+=l.pick(r);return e+" "+t},u}),define("ui/registeridscontroller",["lib/extend","core/controller","core/view","ui/state","ui/teammodel","ui/playermodel","core/random","ui/statesaver"],function(e,t,n,i,r,o,s,a){function u(e,t){u.superconstructor.call(this,new n(void 0,e)),this.$button=e,this.$numteams=t,e.click(this.registerTeams.bind(this))}var l;return l=new s,e(u,t),u.prototype.registerTeams=function(){var e,t;if(e=Number(this.$numteams.val()),!isNaN(e))for(a.canSave()||a.createNewEmptyTree("Tuvero Test-Turnier"),t=0;t<e;t+=1)i.teams.push(u.createTeam(t+1))},u.createTeam=function(e){var t,n;for(t=[];t.length<i.teamsize.get();)t.push(new o(""+e));return n=new r(t)},u}),define("ui/requiremodsshortcut",["lib/extend","core/model"],function(e,t){function n(){n.superconstructor.call(this),window.setTimeout(this.createModsObject.bind(this),1)}return e(n,t),n.prototype.createModsObject=function(){var e,t;if(void 0===window.mods){if(e=require.s.contexts._.defined,!e)return void console.error("require.s.contexts._.defined is undefined");t=window.mods={},Object.keys(e).forEach(function(n){var i,r;i=n.split("/"),r=t,i.forEach(function(t,o){o>=i.length-1?r[t]=e[n]:(void 0===r[t]&&(r[t]={}),r=r[t])})})}},n}),define("ui/finishroundcontroller",["lib/extend","core/controller","core/view","ui/state","options"],function(e,t,n,i,r){function o(e){o.superconstructor.call(this,new n(void 0,e)),this.view.$view.click(this.finishRound.bind(this))}return e(o,t),o.prototype.finishRound=function(){i.tournaments.map(function(e){var t,n;t=e.getMatches();do n=!0,t.map(function(e){e.isRunningMatch()&&(e.finish(this.getScore(e.length)),n=!1)},this);while(!n)},this)},o.prototype.getScore=function(){return[r.maxpoints,0]},o}),define("ui/tabshandle",["core/tabmenuview","jquery"],function(e,t){var n,i;return n={getTabModel:function(){}},t(function(){1===t("#tabs").length&&0===t("#testmain").length&&(n=new e(t("#tabs"))),n.getTabModel("lanes")&&n.getTabModel("lanes").visibility.set(!1)}),i={hide:function(e){var t=n.getTabModel(e);t&&(t.visibility.set(!1),t.accessibility.set(!1))},show:function(e){var t=n.getTabModel(e);t&&(t.visibility.set(!0),t.accessibility.set(!0))},secret:function(e){var t=n.getTabModel(e);t&&(t.visibility.set(!1),t.accessibility.set(!0))},focus:function(e){n.focus(e)},bindTabOpts:function(e,t){var i=n.getTabModel(e);i&&i.imgParam.bind(t)}}}),define("ui/debugtab",["lib/extend","jquery","core/view","ui/storage","ui/strings","ui/toast","ui/loadedimagesview","ui/browserinfoview","ui/registerteamscontroller","ui/registeridscontroller","ui/requiremodsshortcut","ui/finishroundcontroller","ui/debug","ui/tabshandle","ui/statesaver"],function(e,t,n,i,r,o,s,a,u,l,c,d,h,p,f){function m(e){m.superconstructor.call(this,void 0,e),this.init()}return e(m,n),m.prototype.init=function(){var e,t;h.isDevVersion||p.secret("debug"),e=this.$view.find(".browser"),this.browserNameView=new a(e),e=this.$view.find(".register .delete"),e.click(function(){f.removeEverything(),i.clear(),window.localStorage&&window.localStorage.clear(),new o(r.reset)}),e=this.$view.find(".allimages"),this.allImages=new s(e),t=this.$view.find("button.registerteams"),e=this.$view.find("input.numteams"),this.registerTeamsController=new u(t,e),t=this.$view.find("button.registerids"),e=this.$view.find("input.numteams"),this.registerIDsController=new l(t,e),this.mods=new c,t=this.$view.find("button.finishround"),this.finishRound=new d(t)},t(function(e){
var t;if(t=e('#tabs > [data-tab="debug"]'),t.length&&0===e("#testmain").length)return new m(t)}),m}),define("ui/deleteallteamscontroller",["lib/extend","core/controller","ui/state","ui/strings"],function(e,t,n,i){function r(e){r.superconstructor.call(this,e),this.view.$view.click(this.confirmDeletion.bind(this))}return e(r,t),r.prototype.confirmDeletion=function(){0!==n.tournaments.length&&console.error("cannot delete all teams: there are tournaments"),window.confirm(i.deleteallteamsconfirmation)&&this.performDeletion()},r.prototype.performDeletion=function(){n.teams.clear()},r}),define("ui/fontsizecontroller",["jquery","lib/extend","core/controller"],function(e,t,n){function i(t){var n;i.superconstructor.call(this,t),n=this.model,this.view.$view.on("click","> button",function(){n.setFontSize(e(this).attr("class").replace(/.*fontsize([a-z]+).*/,"$1"))})}return t(i,n),i}),define("ui/fontsizemodel",["lib/extend","core/model"],function(e,t){function n(){n.superconstructor.call(this),this.fontsize=n.DEFAULT}return e(n,t),n.SIZES=["tiny","small","normal","large","huge"],n.DEFAULT=n.SIZES[2],n.prototype.getFontSize=function(){return this.fontsize},n.prototype.setFontSize=function(e){if(n.SIZES.indexOf(e)===-1)throw"invalid font size";this.fontsize=e,this.emit("update")},n}),define("ui/fontsizeview",["jquery","lib/extend","core/view","ui/fontsizecontroller","ui/fontsizemodel"],function(e,t,n,i,r){function o(t,n){n=n||e("body"),o.superconstructor.call(this,o.getModelOfContainer(n),t),this.$container=n,this.update(),this.controller=new i(this)}var s;return s="fontsize",t(o,n),o.prototype.reset=function(){r.SIZES.map(function(e){this.$container.removeClass(s+e),this.$view.removeClass(s+e)},this)},o.prototype.update=function(){this.reset(),this.$container.addClass(s+this.model.getFontSize()),this.$view.addClass(s+this.model.getFontSize())},o.prototype.onupdate=function(){this.update()},o.getModelOfContainer=function(e){return e.data("FontSizeModel")||e.data("FontSizeModel",new r),e.data("FontSizeModel")},o}),define("ui/templateview",["lib/extend","core/view"],function(e,t){function n(e,t,i){n.superconstructor.call(this,e,t),this.$template=i.detach().removeClass("template")}return e(n,t),n}),define("ui/textview",["lib/extend","core/view"],function(e,t){function n(e,t){n.superconstructor.call(this,void 0,t),this.setText(e)}return e(n,t),n.prototype.setText=function(e){void 0===e?this.model.text="undefined":this.model.text=e,this.model.emit("update")},n.prototype.reset=function(){this.setText("")},n.prototype.update=function(){this.$view.text(this.model.text)},n.prototype.onupdate=function(){this.update()},n}),define("ui/listview",["lib/extend","ui/templateview","ui/textview"],function(e,t,n){function i(e,t,r,o){var s;for(i.superconstructor.call(this,e,t,r),this.SubView=o||n,this.optArgs=[],this.subviews=[],s=4;s<arguments.length;s+=1)this.optArgs.push(arguments[s]);this.update()}return e(i,t),i.prototype.reset=function(){for(;this.subviews.length>0;)this.removeItem(0)},i.prototype.update=function(){var e;for(this.reset(),e=0;e<this.model.length;e+=1)this.insertItem(e)},i.prototype.insertItem=function(e){var t,n,i,r,o;if(t=this.$template.clone(),i=this.model.get(e),o=this.optArgs.slice(0),o.splice(0,0,null,i,t),n=new(Function.prototype.bind.apply(this.SubView,o)),n.$view!==t)throw console.error("$subview != subview.$view"),new Error("$subview != subview.$view");e===this.subviews.length?this.insertBeforeView?this.$view.before(n.$view):this.$view.append(n.$view):(r=this.subviews[e].$view,r.eq(0).before(n.$view)),this.subviews.splice(e,0,n)},i.prototype.indexOf=function(e){var t,n,i;switch(t=e.parents(),n=t.index(this.$view)){case-1:return console.warn("listview.indexOf: $view is not a descendant of this.$view"),-1;case 0:break;default:if("TBODY"!==this.$template.prop("tagName")&&"TBODY"===t.eq(n-1).prop("tagName")&&(n-=1,0===n))break;e=t.eq(n-1)}return i=void 0,this.subviews.some(function(t,n){return t.$view.data()===e.data()&&(i=n,!0)}),void 0===i?-1:i},i.prototype.getSubview=function(e){return this.subviews[e]},i.prototype.removeItem=function(e){var t;t=this.subviews[e],t&&(t.destroy(),this.subviews.splice(e,1))},i.prototype.oninsert=function(e,t,n){this.insertItem(n.id)},i.prototype.onremove=function(e,t,n){this.removeItem(n.id)},i.prototype.onreset=function(){this.reset()},i}),define("ui/popoutcontroller",["jquery","lib/extend","core/controller","ui/toast","ui/strings","core/classview","ui/state","core/listener","timemachine/timemachine","ui/fontsizeview"],function(e,t,n,i,r,o,s,a,u,l){function c(){return p&&p.document}function d(){c()&&(m.destroy(),p.close()),p=void 0}function h(e,t){h.superconstructor.call(this,e),this.cloneFunction=t,this.view.$popout&&this.view.$popout.click(this.popout.bind(this)),this.view.$close&&this.view.$close.click(this.close.bind(this)),this.view.$pageBreak&&this.view.$pageBreak.click(this.togglePageBreak.bind(this))}var p,f,m,g;return p=void 0,g=a.bind(u,"unload",d),e(function(e){e(window).on("beforeunload",d)}),t(h,n),h.prototype.popout=function(t){var n,a,u,h,g;return n=this.view.$popoutTemplate.clone(),c()?console.log("main popout already exists and is open"):(console.log("opening new popout"),p=window.open("","","location=0"),e(p).on("beforeunload",d),u=e("style"),0===u.length?(a=window.location.href.replace(/index.html[?#].*/,"style/main.css"),u=e('<link rel="stylesheet" href="'+a+'">')):u=u.clone(),h=e("title").clone(),e(p.document.head).append(u).append(h),g=e(p.document.body),g.attr("id","app").addClass("popoutContainer"),g.data({maxWidthView:new o(s.tabOptions.nameMaxWidth,g,"maxwidth","nomaxwidth"),hideNamesView:new o(s.tabOptions.showNames,g,void 0,"hidenames"),showtableClassView:new o(s.tabOptions.showMatchTables,g,"showmatchtable","showtable"),hidefinishedClassView:new o(s.tabOptions.hideFinishedGroups,g,"hidefinished")}),f||(f=e(".fontsizeview").eq(1)),m=new l(f,g)),n.addClass("primaryPopout"),e(p.document.body).append(n),this.cloneFunction.call(p,n),window.setTimeout(function(){c()||new i(r.popout_adblocked)},500),t.preventDefault(!0),!1},h.prototype.close=function(e){return console.log("close"),this.view.destroy(),e.preventDefault(!0),!1},h.prototype.togglePageBreak=function(e){return this.view.pageBreakModel.set(!this.view.pageBreakModel.get()),e.preventDefault(!0),!1},h}),define("ui/popoutboxview",["jquery","lib/extend","ui/boxview","ui/popoutcontroller","core/valuemodel","core/classview"],function(e,t,n,i,r,o){function s(e,t,n){s.superconstructor.call(this,e),this.$popoutTemplate=t,this.$view.hasClass("primaryPopout")?(this.addCloseIcon(),this.addPageBreakIcon()):this.addPopoutIcon(),this.popoutController=new i(this,n)}var a,u,l,c;return a=e("<div>").addClass("icon").addClass("noprint"),u=a.clone().addClass("popout").text("↗"),l=a.clone().addClass("close").text("x"),c=a.clone().addClass("pagebreak").text("⏎"),t(s,n),s.prototype.addPopoutIcon=function(){this.$popout=u.clone(),this.$view.find(">h3:first-child").append(this.$popout)},s.prototype.addCloseIcon=function(){this.$close=l.clone(),this.$view.find(">h3:first-child").append(this.$close)},s.prototype.addPageBreakIcon=function(){this.$pageBreak=c.clone(),this.pageBreakModel=new r(!1),this.pageBreakView=new o(this.pageBreakModel,this.$view,"pagebreak"),this.$view.find(">h3:first-child").append(this.$pageBreak)},s.prototype.destroy=function(){this.pageBreakModel&&this.pageBreakModel.destroy(),this.pageBreakView&&this.pageBreakView.destroy(),s.superclass.destroy.bind(this)},s}),define("ui/teamtableview",["jquery","lib/extend","core/view"],function(e,t,n){function i(e,t){i.superconstructor.call(this,t,e.$view),this.teamlist=e.model,this.teamlist.registerListener(this),this.$names=this.$view.find("tr>th"),this.updatePlayerColumns()}return t(i,n),i.prototype.updatePlayerColumns=function(){var t,n;t=this.model.get(),n=0,this.$names.each(function(i,r){var o;o=e(r),o.hasClass("playercol")?(n<t?o.removeClass("hidden"):o.addClass("hidden"),n+=1):n=0})},i.prototype.onupdate=function(){this.updatePlayerColumns()},i}),define("ui/matchtableview",["lib/extend","ui/templateview","ui/listview","core/listener","ui/matchresultview","ui/teamtableview"],function(e,t,n,i,r,o){function s(e,t,a,u,l){var c;s.superconstructor.call(this,e,t,t.find(".match")),c=this.$view.children("table"),this.listView=new n(this.model,c,this.$template,r,a,u),this.teamTableView=new o(this.listView,l),this.$round=this.$view.find(".round"),this.updateRunningState(),this.updateGroupNumber();var d=this;this.groupListener=new i(this.model),this.groupListener.oninsert=function(e,t,n){1===d.model.length&&d.updateGroupNumber()}}return e(s,t),s.prototype.updateGroupNumber=function(){this.model.length>0&&this.$round.text(Number(this.model.get(0).getGroup())+1)},s.prototype.updateRunningState=function(){var e,t;for(t=!1,e=0;e<this.model.length;e+=1)if(!this.model.get(e).isResult()){t=!0;break}t?(this.$view.addClass("running"),this.$view.removeClass("finished")):(this.$view.addClass("finished"),this.$view.removeClass("running"))},s.prototype.onresize=function(e,t,n){this.updateRunningState()},s.prototype.destroy=function(){s.superclass.destroy.call(this),this.listView.destroy(),this.groupListener.destroy()},s}),define("ui/tournamentrenamecontroller",["lib/extend","ui/renamecontroller"],function(e,t){function n(e){n.superconstructor.call(this,e,!1)}return e(n,t),n.prototype.setName=function(e){return!!e&&(this.model.getName().set(e),!0)},n.prototype.getName=function(){return this.model.getName().get()},n}),define("ui/tournamentmatchesview",["lib/extend","core/view","ui/templateview","ui/listview","ui/popoutboxview","ui/teamview","core/listener","ui/matchtableview","ui/tournamentrenamecontroller"],function(e,t,n,i,r,o,s,a,u){function l(e,n,i,o){var a=n.clone();l.superconstructor.call(this,e,n,n.find(".template.voteview")),this.renameController=new u(new t(e,this.$view.find(".tournamentname.rename"))),this.boxview=new r(this.$view,a,function(t){return new l(e,t,i,o)}),this.$names=this.$view.find(".tournamentname"),this.teamlist=i,this.teamsize=o,this.initMatches(),this.initVotes(),s.bind(this.model.getName(),"update",this.updateNames.bind(this)),this.updateNames()}return e(l,n),l.prototype.initMatches=function(){this.$matchtable=this.$view.find(".matchtable"),this.matchtable=new a(this.model.getMatches(),this.$matchtable,this.teamlist,this.model,this.teamsize),s.bind(this.model.getMatches(),"resize",this.updateVisibility.bind(this)),this.updateVisibility()},l.prototype.updateVisibility=function(){0===this.model.getMatches().length?this.$view.addClass("hidden"):this.$view.removeClass("hidden")},l.prototype.initVotes=function(){var e;this.$view.find(".votelist").hide(),e=this.$template,this.votelistmodels=this.model.VOTES.map(function(t){var n,r;if(n=this.$view.find(".votelist."+t),0!==n.length)return r=this.model.getVotes(t),s.bind(r,"resize",function(e,t,i){0===e.length?n.hide():n.show()}),0!==r.length&&n.show(),new i(r,n,e,o,this.teamlist)},this)},l.prototype.updateNames=function(){this.$names.text(this.model.getName().get())},l}),define("ui/gamestab",["lib/extend","jquery","core/view","ui/listview","ui/state","ui/checkboxview","core/classview","ui/tournamentmatchesview","ui/tabshandle"],function(e,t,n,i,r,o,s,a,u){function l(e){l.superconstructor.call(this,void 0,e),this.init(),this.update(),r.tournaments.registerListener(this)}return e(l,n),l.prototype.init=function(){var e,t,n;t=this.$view.find(".tournamentlist"),e=t.find(".tournament.template"),this.tournamentList=new i(r.tournaments,t,e,a,r.teams,r.teamsize),n=r.tabOptions.nameMaxWidth,t=this.$view.find(">.options input.maxwidth"),this.maxwidthCheckBoxView=new o(n,t),this.maxwidthClassView=new s(n,this.$view,"maxwidth","nomaxwidth"),n=r.tabOptions.showNames,t=this.$view.find(">.options input.shownames"),this.maxwidthCheckBoxView=new o(n,t),this.maxwidthClassView=new s(n,this.$view,void 0,"hidenames")},l.prototype.update=function(){var e,t;for(t=!1,e=0;!t&&e<r.tournaments.length;e+=1)t="running"===r.tournaments.get(e).getState().get();t?u.show("games"):u.hide("games")},l.prototype.onupdate=function(e,t,n){e!==r.tournaments&&this.update()},l.prototype.oninsert=function(e,t,n){n.object.getState().registerListener(this),this.update()},l.prototype.onremove=function(e,t,n){n.object.getState().unregisterListener(this),this.update()},t(function(e){var t;if(t=e('#tabs > [data-tab="games"]'),t.length&&0===e("#testmain").length)return new l(t)}),l}),define("ui/inlinelistview",["lib/extend","ui/listview"],function(e,t){function n(e,t,i,r){this.insertBeforeView=!0,n.superconstructor.apply(this,arguments)}return e(n,t),n}),define("ui/progressrowview",["lib/extend","ui/templateview","ui/teamview","ui/listview","list/listmodel","ui/inlinelistview","core/listener","ui/matchresultview"],function(e,t,n,i,r,o,s,a){function u(e,t,l,c){var d=e.get(0).getTeamID(0);u.superconstructor.call(this,l.get(d),t,t.find(".template")),this.ranking=c.getRanking(),this.$separator=this.$view.find(".hidden.separator"),this.rankingList=new r,this.teamView=new n(this.model,t),this.updatePending=!1,s.bind(this.ranking,"update",function(){this.updatePending||(window.setTimeout(this.updateRank.bind(this),1),this.updatePending=!0)},this),this.matches=new o(e,this.$separator,this.$template.filter(".match"),a,l,c),this.ranks=new i(this.rankingList,this.$view,this.$template.filter(".rankingcomponent")),this.updateRank()}return e(u,t),u.prototype.updateRank=function(){var e,t,n;e=this.ranking.get(),t=e.ids.indexOf(this.model.getID()),n=e.components.slice(0),n.push("ranks"),n.forEach(function(n,i){var r=e[n][t];"ranks"===n&&(r+=1),this.rankingList.length===i?this.rankingList.push(r):this.rankingList.get(i)!==r&&this.rankingList.set(i,r)},this),this.updatePending=!1},u}),define("ui/reversematchreferencemodel",["lib/extend","core/matchreferencemodel"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t),this.teams.reverse()}return e(n,t),n.prototype.hasReversedTeams=!0,n.prototype.finish=function(e){return e=e.slice(),e.reverse(),n.superclass.finish.call(this,e)},n}),define("ui/reverseresultreferencemodel",["lib/extend","core/resultreferencemodel"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t),this.isBye()||(this.teams.reverse(),this.score.reverse())}return e(n,t),n.prototype.hasReversedTeams=!0,n}),define("ui/progresslistmodel",["lib/extend","list/binningreferencelistmodel","list/sortedreferencelistmodel","list/combinedreferencelistmodel","list/referencelistmodel","ui/reversematchreferencemodel","ui/reverseresultreferencemodel"],function(e,t,n,i,r,o,s){function a(e){a.superconstructor.call(this,this.createSortedList(e),this.binningFunction)}return e(a,t),a.prototype.createCombinedList=function(e){var t,n,a,u;return t=e.getMatches(),n=new r(t,void 0,o),a=e.getHistory(),u=new r(a,void 0,s),new i(t,n,a,u)},a.prototype.createSortedList=function(e){return new n(this.createCombinedList(e),this.sortFunction,!0)},a.prototype.sortFunction=function(e,t){return e.getTeamID(0)-t.getTeamID(0)||e.getGroup()-t.getGroup()},a.prototype.binningFunction=function(e){return e.getTeamID(0)},a}),define("ui/progressroundview",["lib/extend","core/view"],function(e,t,n){function i(e,t){i.superconstructor.call(this,void 0,t),this.round=e,this.$round=this.$view.find(".round"),this.updateRound()}return e(i,t),i.prototype.updateRound=function(){this.$round.text(this.round+1)},i.prototype.onstate=function(){this.updateRound()},i}),define("ui/progresstableview",["lib/extend","ui/templateview","ui/listview","ui/inlinelistview","ui/teamtableview","ui/progressrowview","ui/progresslistmodel","ui/strings","list/listmodel","ui/progressroundview","core/listener"],function(e,t,n,i,r,o,s,a,u,l,c){function d(e,t,a,h,p){this.$table=t.find(".progresstable"),d.superconstructor.call(this,new s(e),t,this.$table.find("tr.template,th.template")),this.$separator=this.$table.find("th.hidden.separator"),this.listView=new n(this.model,this.$table,this.$template.filter(".progressrow"),o,h,e),this.teamTableView=new r(this.listView,p),this.roundHeaderView=new i(a.getBinNames(),this.$separator,this.$template.filter(".roundcol"),l),this.rankingComponents=new u,this.$headerRow=this.$table.find(".headerrow"),this.rankingComponentHeaderView=new n(this.rankingComponents,this.$headerRow,this.$template.filter(".rankcol")),this.ranking=e.getRanking(),c.bind(this.ranking,"update",this.updateRankingComponents.bind(this)),this.updateRankingComponents()}return e(d,t),d.prototype.updateRankingComponents=function(){var e=this.ranking.get().components.slice();for(e.push("ranks"),e.forEach(function(e,t){var n=a["ranking_medium_"+e];this.rankingComponents.length===t?this.rankingComponents.push(n):this.rankingComponents.get(t)!==n&&this.rankingComponents.set(t,n)},this);this.rankingComponents.length>e.length;)this.rankingComponents.pop()},d}),define("ui/kolistmodel",["lib/extend","list/binningreferencelistmodel"],function(e,t){function n(e){n.superconstructor.call(this,e.getCombinedHistory(),this.binningFunction)}return e(n,t),n.prototype.binningFunction=function(e){return e.getGroup(0)&-2},n}),define("ui/kotreeposition",["tournament/kotournamentmodel"],function(e){function t(t,n,i,r){this.id=t,this.group=n,this.numTeams=i,this.showNames=r,this.round=e.roundOfMatchID(this.id),this.isThirdPlace=1===(1&this.group),this.firstid=e.firstMatchIDOfRound(this.round),this.firstRound=Math.min(e.initialRoundForTeams(this.numTeams),e.roundsInGroup(this.group&-2)-1),this.x=this.calcXPosition(),this.y=this.calcYPosition()}var n,i,r,o,s;return r=17,s=7,o=4,i=-2,n=1,t.prototype.calcXPosition=function(){return n+(this.firstRound-this.round)*this.getWidth()},t.prototype.getWidth=function(){return t.getWidth(this.showNames)},t.prototype.calcYPosition=function(){var e,t;return t=Math.pow(2,this.firstRound-this.round-1),e=i,e+=o*t,e+=2*o*t*(this.id-this.firstid),this.isThirdPlace&&(e+=1.5*o),e},t.prototype.getFollowingPosition=function(){var n=e.nextRoundMatchID(this.id);return new t(n,this.group,this.numTeams,this.showNames)},t.getWidth=function(e){return e?r:s},t.HEIGHT=o,t.TOPPADDING=i,t.LEFTPADDING=n,t}),define("ui/komatchresultview",["lib/extend","ui/matchresultview","ui/kotreeposition"],function(e,t,n){function i(e,t,n,r,o){i.superconstructor.call(this,e,t,n,r),this.tournament=r,this.showNames=o,this.reposition(),o.registerListener(this)}return e(i,t),i.prototype.reposition=function(){var e=new n(this.model.getID(),this.model.getGroup(),this.tournament.getTeams().length,this.showNames.get());this.x=e.x,this.y=e.y,this.$view.css("left",this.x+"em"),this.$view.css("top",this.y+"em")},i.prototype.onupdate=function(){this.reposition()},i}),define("ui/koline",["ui/strings"],function(e){function t(e,t,n){return[e[0],e[1],t,n[0],n[1]].join(":")}function n(e){var t,n;n=[];for(t in e)e.hasOwnProperty(t)&&n.push([t,e[t]].join(": "));return n.join("; ")}function i(e,t,i,r){var o,a;return a={position:"absolute",width:e+"em",height:t+"em",left:i+"em",top:r+"em",overflow:"visible"},o=document.createElementNS(s.SVGNS,"svg"),o.setAttributeNS(null,"style",n(a)),o}function r(e,t){var n;return n=document.createElementNS(s.SVGNS,"line"),n.setAttributeNS(null,"x1",e[0]+"em"),n.setAttributeNS(null,"y1",e[1]+"em"),n.setAttributeNS(null,"x2",t[0]+"em"),n.setAttributeNS(null,"y2",t[1]+"em"),n}function o(e,n){var i,o,a,u,l;return i=(e[0]+n[0])/2,l=t(e,i,n),s.pathCache[l]?u=s.pathCache[l].cloneNode(!0):(o=[i,e[1]],a=[i,n[1]],u=document.createElementNS(s.SVGNS,"g"),u.setAttributeNS(null,"stroke","black"),u.setAttributeNS(null,"stroke-width","2"),u.setAttributeNS(null,"stroke-linecap","round"),u.appendChild(r(e,o)),u.appendChild(r(o,a)),u.appendChild(r(a,n)),s.pathCache[l]=u.cloneNode(!0)),u}function s(e,t){var n,r,s,a,u,l;return s=Math.min(e[0],t[0]),a=Math.max(e[0],t[0]),u=Math.min(e[1],t[1]),l=Math.max(e[1],t[1]),n=a-s+1,r=l-u+1,e=[e[0]-s,e[1]-u],t=[t[0]-s,t[1]-u],this.svg=i(n,r,s,u),this.svg.appendChild(o(e,t)),this}return s.SVGNS=e.svgns,s.pathCache={},s}),define("ui/kolineview",["lib/extend","core/view","jquery","ui/koline","ui/kotreeposition"],function(e,t,n,i,r){function o(e,t,n,i){o.superconstructor.call(this,e,t),this.numTeams=n,this.showNames=i,this.render(),i.registerListener(this)}return e(o,t),o.prototype.clear=function(){this.$line&&(this.$line.remove(),this.$line=void 0)},o.prototype.render=function(){this.clear(),this.model.getID()>1&&(this.$line=this.createLine(),this.$view.append(this.$line))},o.prototype.createLine=function(){var e,t,o,s;return s=new r(this.model.getID(),this.model.getGroup(),this.numTeams,this.showNames.get()),this.x=s.x,this.y=s.y,s=s.getFollowingPosition(),t=[this.x+r.getWidth(this.showNames.get())-1,this.y+2],o=[s.x+.4,s.y+2],e=new i(t,o),n(e.svg).addClass(".koline")},o.prototype.onupdate=function(e,t,n){this.render()},o}),define("ui/kotreeview",["lib/extend","ui/templateview","ui/listview","ui/inlinelistview","ui/komatchresultview","tournament/kotournamentmodel","ui/kotreeposition","ui/kolineview","ui/boxview"],function(e,t,n,i,r,o,s,a,u){function l(e,t,o,s,c,d){l.superconstructor.call(this,e,t,t.find(".komatchresult.template")),this.group=this.model.get(0).getGroup()&-2,this.boxView=new u(this.$view),this.showNames=d,this.tournament=s,this.$forest=this.$view.find(".forest"),this.$kolineanchor=this.$forest.find(".kolineanchor"),this.$bestrank=this.$view.find(".bestrank"),this.lines=new i(this.model,this.$kolineanchor,this.$kolineanchor.clone(),a,s.getTeams().length,d),this.matches=new n(this.model,this.$forest,this.$template,r,o,s,d),this.updateGroupInformation(),this.setSize(),d.registerListener(this)}return e(l,t),l.prototype.updateGroupInformation=function(){var e=2*this.group+1;this.$bestrank.text(e)},l.prototype.setSize=function(){var e,t,n,i,r,a,u,l;e=this.tournament.getTeams().length,n=new s(1,this.group+1,e,this.showNames.get()),l=o.firstMatchIDOfRound(n.firstRound+1)-1,i=new s(l,this.group,e,this.showNames.get()),t=0===this.group?o.initialRoundForTeams(e)+1:o.roundsInGroup(this.group),u=o.numMatchesInRound(t)===e,r=n.x,a=Math.max(i.y,n.y),r+=s.getWidth(this.showNames.get()),a+=s.HEIGHT,this.$forest.css("width",r+"em"),this.$forest.css("height",a+"em"),this.$forest.css("margin-top",u?"0em":"-2.5em")},l.prototype.onupdate=function(e,t,n){this.setSize()},l}),define("ui/kohistoryview",["lib/extend","ui/templateview","ui/listview","ui/kolistmodel","ui/kotreeview"],function(e,t,n,i,r){function o(e,t,s,a,u,l){o.superconstructor.call(this,new i(e),t,t.find(".progressrow.template")),this.$kotree=this.$view.find(".kotree").detach(),this.kotrees=new n(this.model,this.$view,this.$kotree,r,a,e,u,l)}return e(o,t),o}),define("ui/generictournamenthistoryview",["lib/extend","core/view","ui/progresstableview","ui/kohistoryview"],function(e,t,n,i){function r(e,n,i,s,a,u){var l,c,d;r.superconstructor.call(this,void 0,n),this.tournament=e,d=o[e.SYSTEM],e&&d?(c=this.$view.find(d.selector),c.removeClass("hidden"),n.addClass("hastable"),l=d.constructor,this.view=new l(e,n,i,s,a,u),this.showlists=!!d.showlists):(this.view=new t(void 0,n),this.showlists=!0)}var o;return o={swiss:{constructor:n,selector:".progresstable",showlists:!0},round:{constructor:n,selector:".progresstable",showlists:!0},ko:{constructor:i,selector:".kotree",showlists:!1}},e(r,t),r.prototype.destroy=function(){this.view.destroy(),r.superclass.destroy.call(this)},r}),define("ui/stateclassview",["lib/extend","core/view"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t),this.currentClass=void 0,this.update()}return e(n,t),n.prototype.update=function(){var e;e=this.model.get(),e!==this.currentClass&&(this.$view.removeClass(this.currentClass),this.$view.addClass(e),this.currentClass=e)},n.prototype.onupdate=function(){this.update()},n}),define("ui/tournamentcontroller",["lib/extend","ui/renamecontroller","ui/toast","ui/strings"],function(e,t,n,i){function r(e,t){var s,a;r.superconstructor.call(this,e,!1),s=this.model.tournament,a=this.model.rankingOrder,this.toast=void 0,this.$runbutton=this.view.$view.find("button.runtournament"),this.$closebutton=this.view.$view.find("button.closetournament"),this.$runbutton.click(function(){if("initial"===s.getState().get()){if(a.length<1)return void s.emit("error","not enough ranking components");if(!s.setRankingOrder(a.asArray()))return}s.run()}),this.$closebutton.click(function(){s.finish()?(t.closeTournament(s.getID()),new n(i.tournamentfinished)):new n(i.gamesstillrunning,n.LONG)}),o===this.model.tournament&&(this.view.$view.find(".rename").eq(0).click(),window.setTimeout(this.$rename.focus.bind(this.$rename),1),window.setTimeout(this.$rename.select.bind(this.$rename),1))}var o;return o=void 0,e(r,t),r.prototype.getName=function(){return this.model.tournament.getName().get()},r.prototype.setName=function(e){return!!e&&(this.model.tournament.getName().set(e),o=void 0,!0)},r.initiateNameChange=function(e){o=e},r.prototype.destroy=function(){},r}),define("ui/rankingcomponentview",["lib/extend","ui/textview","ui/strings"],function(e,t,n){function i(e){return n["ranking_"+e]||e}function r(e,t){r.superconstructor.call(this,e,t)}return e(r,t),r.prototype.update=function(){this.$view.val(this.model.text),this.$view.text(i(this.model.text))},r}),define("ui/rankingordercontroller",["jquery","lib/extend","core/controller"],function(e,t,n){function i(t){var n,r;i.superconstructor.call(this,t),n=this.view.selected,r=this.view.allComponents,this.view.$selectedList.on("click",".component",function(){n.remove(e(this).index())}),this.view.$availableList.on("click",".component",function(){n.push(r.get(e(this).index()))})}return t(i,n),i}),define("ui/rankingorderview",["jquery","lib/extend","ui/templateview","ui/rankingcomponentview","ui/listview","ui/rankingordercontroller"],function(e,t,n,i,r,o){function s(e,t,n){s.superconstructor.call(this,e,t,t.find(".template")),this.selected=e,this.allComponents=n,this.$availableList=this.$view.find(".available"),this.$selectedList=this.$view.find(".selected"),this.selectedListView=new r(e,this.$selectedList,this.$template,i),this.availableListView=new r(n,this.$availableList,this.$template,i),this.controller=new o(this),this.update()}return t(s,n),s.prototype.update=function(){var t=this.model;this.$availableList.find(".component").each(function(n){var i=e(this);t.indexOf(i.val())===-1?i.removeClass("hidden"):i.addClass("hidden")})},s.prototype.oninsert=function(){this.update()},s.prototype.onremove=function(){this.update()},s}),define("ui/tournamentview",["jquery","lib/extend","core/view","ui/stateclassview","core/listener","ui/tournamentcontroller","list/listmodel","ui/boxview","presets","ui/rankingorderview","ui/strings"],function(e,t,n,i,r,o,s,a,u,l,c){function d(t,n,u){var l;d.superconstructor.call(this,void 0,n),this.$view.attr("rowspan",t.getTeams().length),this.model.tournament=t,this.model.rankingOrder=new s(this.model.tournament.ranking.componentnames),this.stateClassView=new i(t.getState(),n),this.$name=this.$view.find(".tournamentname"),this.$round=this.$view.find(".round"),this.$nextround=this.$view.find(".nextround"),this.$initial=this.$view.find(".initial"),this.$running=this.$view.find(".running"),this.$idle=this.$view.find(".idle"),this.$finished=this.$view.find(".finished"),this.$advancedOptions=this.$view.find(".tournamentoptions.boxview"),this.$advancedOptions.length>0&&(this.advancedOptions=l=[],this.$advancedOptions.each(function(){l.push(new a(e(this)))})),this.initRankingOrderView(),r.bind(this.model.tournament.getName(),"update",this.updateNames.bind(this)),this.updateNames(),this.updateRound(),this.controller=new o(this,u)}return t(d,n),d.prototype.initRankingOrderView=function(){var e;this.$rankingOrderView=this.$view.find(".rankingorderview"),this.$rankingOrderView.length>0&&(e=u.ranking.components.slice(0),this.model.tournament.getRanking().get().components.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e.sort(function(e,t){return e=c["ranking_"+e]||e,t=c["ranking_"+t]||t,e.localeCompare(t)}),this.rankingOrderView=new l(this.model.rankingOrder,this.$rankingOrderView.eq(0),new s(e)))},d.prototype.updateNames=function(){this.$name.text(this.model.tournament.getName().get())},d.prototype.updateRound=function(){this.model.tournament.getRound&&(this.$round.text(this.model.tournament.getRound()+1),this.$nextround.text(this.model.tournament.getRound()+2))},d.prototype.onstate=function(){this.updateRound()},d.prototype.destroy=function(){this.controller.destroy(),this.subcontroller&&this.subcontroller.destroy&&this.subcontroller.destroy(),this.rankingOrderView&&this.rankingOrderView.destroy(),this.stateClassView.destroy(),d.superclass.destroy.call(this)},d}),define("ui/roundtournamentview",["lib/extend","ui/tournamentview"],function(e,t){function n(e,t,i){n.superconstructor.call(this,e,t,i),this.subcontroller=void 0,this.updateRound()}return e(n,t),n}),define("ui/swisstournamentcontroller",["jquery","lib/extend","core/controller","core/listener","core/propertyvaluemodel"],function(e,t,n,i,r){function o(t){var n,r,s,a;o.superconstructor.call(this,t),s=this.model.tournament,a=this.model.noshuffle,this.$options=this.view.$view.find(".tournamentoptions"),n=this.$options.find("select.mode"),r=this.$options.find("input.noshuffle"),n.change(function(){s.setProperty("swissmode",e(this).val()),n.val(e(this).val()),s.setProperty("swisstranspose","halves"===s.getProperty("swissmode"))}),i.bind(a,"update",function(){s.setProperty("swissshuffle",!a.get())}),this.initSpecialWinsProperties()}return t(o,n),o.prototype.initSpecialWinsProperties=function(){var e,t,n;e=new r(this.model.tournament,"swissmode"),t=new r(this.model.tournament,"enableupdown"),n=new r(this.model.tournament,"byeafterbye"),i.bind(e,"update",function(){t.set("wins"===e.get()),t.get()||n.set(!1)})},o}),define("ui/swissvotepropcontroller",["lib/extend","core/controller"],function(e,t){function n(e){n.superconstructor.call(this,e),this.view.$view.click(this.toggleValue.bind(this))}return e(n,t),n.prototype.toggleValue=function(){this.model.set(!this.model.get())},n}),define("ui/swissvotepropview",["lib/extend","core/classview","ui/swissvotepropcontroller"],function(e,t,n){function i(e,t){i.superconstructor.call(this,e,t,void 0,"forbidden"),this.controller=new n(this)}return e(i,t),i}),define("ui/swissvotesview",["jquery","lib/extend","core/view","ui/boxview","ui/swissvotepropview","core/propertyvaluemodel","core/classview"],function(e,t,n,i,r,o,s){function a(e,t){a.superconstructor.call(this,e,t),this.boxview=new i(this.$view.find(".boxview")),this.votesenabled=new o(this.model,"enableupdown"),this.hiddenclassview=new s(this.votesenabled,this.$view,void 0,"hidden"),this.initProps()}return t(a,n),a.prototype.initProps=function(){var t,n;t=this.model,n=/^(\S*\s)*(\S+after\S+)(\s\S*)*$/,this.$view.find(".prop").each(function(){var i,s;return s=e(this),i=s.attr("class").replace(n,"$2"),new r(new o(t,i),s)})},a}),define("ui/valueview",["lib/extend","core/view"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t),this.update()}return e(n,t),n.prototype.update=function(){var e=this.model.get();void 0===e?this.$view.text("undefined"):this.$view.text(e)},n.prototype.onupdate=function(){this.update()},n}),define("ui/swissmaxroundview",["lib/extend","core/view","core/valuemodel","ui/valueview","core/propertyvaluemodel","core/listener","tournament/swisstournamentmodel"],function(e,t,n,i,r,o,s){function a(e,t){a.superconstructor.call(this,e,t),this.maxrounds=new n(0),this.maxroundsview=new i(this.maxrounds,this.$view.find(".maxrounds")),this.teams=this.model.getTeams(),this.$view.find(".numteams").text(this.teams.length),this.mode=new r(this.model,"swissmode"),this.modeListener=o.bind(this.mode,"update",this.update.bind(this)),this.update()}return e(a,t),a.prototype.update=function(){switch(this.mode.get()){case s.MODES.wins:this.maxrounds.set(Math.ceil(Math.log(this.teams.length)/Math.log(2)));break;default:this.maxrounds.set(this.teams.length-1)}},a.prototype.destroy=function(){this.modeListener.destroy(),
this.mode.destroy(),this.maxroundsview.destroy(),this.maxrounds.destroy(),a.superclass.destroy.call(this)},a}),define("ui/swisstournamentview",["lib/extend","ui/tournamentview","ui/swisstournamentcontroller","core/valuemodel","ui/checkboxview","ui/swissvotesview","ui/swissmaxroundview"],function(e,t,n,i,r,o,s){function a(e,t,u){a.superconstructor.call(this,e,t,u),this.model.noshuffle=new i(!this.model.tournament.getProperty("swissshuffle")),this.noshufflecheckboxview={initial:new r(this.model.noshuffle,this.$view.find(".initial .tournamentoptions .option input.noshuffle")),idle:new r(this.model.noshuffle,this.$view.find(".idle .tournamentoptions .option input.noshuffle"))},this.maxroundview=new s(this.model.tournament,t.find(".swissmaxroundview")),this.$view.find(".tournamentoptions .option select.mode").val(this.model.tournament.getProperty("swissmode")),this.swissvotes=new o(this.model.tournament,this.$view.find(".option.swissvotes")),this.subcontroller=new n(this)}return e(a,t),a}),define("ui/kotournamentcontroller",["jquery","lib/extend","core/controller","core/listener"],function(e,t,n,i){function r(t){var n,o,s,a;r.superconstructor.call(this,t),s=this.model.tournament,a=this.model.initialByes,this.$options=this.view.$view.find(".tournamentoptions"),n=this.$options.find("select.mode"),o=this.$options.find("input.initialbyes"),n.change(function(){s.setProperty("komode",e(this).val()),n.val(e(this).val())}),i.bind(a,"update",function(){s.setProperty("initialbyes",a.get())})}return t(r,n),r}),define("ui/kotournamentview",["lib/extend","ui/tournamentview","core/valuemodel","ui/checkboxview","ui/kotournamentcontroller"],function(e,t,n,i,r){function o(e,t,s){o.superconstructor.call(this,e,t,s),this.model.initialByes=new n(this.model.tournament.getProperty("initialbyes")),this.initialbyescheckboxview=new i(this.model.initialByes,this.$view.find(".initial .tournamentoptions .option input.initialbyes")),this.$view.find(".tournamentoptions .option select.mode").val(this.model.tournament.getProperty("komode")),this.subcontroller=new r(this)}return e(o,t),o}),define("ui/generictournamentview",["lib/extend","core/view","ui/tournamentview","ui/roundtournamentview","ui/swisstournamentview","ui/kotournamentview"],function(e,t,n,i,r,o){function s(e,n,i){var r;s.superconstructor.call(this,void 0,n),this.tournament=e,e?(r=a[e.SYSTEM]||u,this.view=new r(e,n,i)):this.view=new t(void 0,n),this.destroy=s.destroy}var a,u;return a={swiss:r,round:i,ko:o},u=n,e(s,t),s.destroy=function(){this.view.destroy(),s.superclass.destroy.call(this)},s}),define("ui/tournamenthistoryview",["lib/extend","core/view","ui/listview","ui/popoutboxview","core/listener","list/binningreferencelistmodel","ui/matchtableview","ui/generictournamenthistoryview","ui/tournamentrenamecontroller"],function(e,t,n,i,r,o,s,a,u){function l(e,n,s,a,c){var d=n.clone();l.superconstructor.call(this,e,n),this.renameController=new u(new t(e,this.$view.find(".tournamentname.rename"))),this.boxview=new i(this.$view,d,function(t){return new l(e,t,s,a,c)}),this.$names=this.$view.find(".tournamentname"),this.teamlist=s,this.teamsize=a,this.showNames=c,this.groups=new o(this.model.getCombinedHistory(),l.groupFilter),this.initGenericView(),this.initMatches(),r.bind(this.model.getName(),"update",this.updateNames.bind(this)),r.bind(this.model.getCombinedHistory(),"resize",this.updateVisibility.bind(this)),this.updateVisibility(),this.updateNames()}return e(l,t),l.groupFilter=function(e){return e.getGroup()},l.prototype.initMatches=function(){this.$matchtable=this.$view.find(".matchtable"),this.genericView.showlists?(this.matchtable=new n(this.groups,this.$view,this.$matchtable,s,this.teamlist,this.model,this.teamsize),this.$view.addClass("haslists")):(this.$matchtable.remove(),this.matchtable=void 0)},l.prototype.initGenericView=function(){this.genericView=new a(this.model,this.$view,this.groups,this.teamlist,this.teamsize,this.showNames)},l.prototype.updateVisibility=function(){0===this.model.getCombinedHistory().length?this.$view.addClass("hidden"):this.$view.removeClass("hidden")},l.prototype.updateNames=function(){this.$names.text(this.model.getName().get())},l}),define("ui/historytab",["lib/extend","jquery","core/view","ui/listview","ui/state","ui/checkboxview","core/classview","ui/tournamenthistoryview","ui/closedtournamentcollapselistener","ui/tabshandle"],function(e,t,n,i,r,o,s,a,u,l){function c(e){c.superconstructor.call(this,void 0,e),this.init(),this.update(),r.tournaments.registerListener(this)}return e(c,n),c.prototype.init=function(){var e,t,n;t=this.$view.find(".tournamentlist"),e=t.find(".tournament.template"),this.tournamentList=new i(r.tournaments,t,e,a,r.teams,r.teamsize,r.tabOptions.showNames),this.collapseListener=new u(this.tournamentList),n=r.tabOptions.nameMaxWidth,t=this.$view.find(">.options input.maxwidth"),this.maxwidthCheckBoxView=new o(n,t),this.maxwidthClassView=new s(n,this.$view,"maxwidth","nomaxwidth"),n=r.tabOptions.showNames,t=this.$view.find(">.options input.shownames"),this.maxwidthCheckBoxView=new o(n,t),this.maxwidthClassView=new s(n,this.$view,void 0,"hidenames"),n=r.tabOptions.showMatchTables,t=this.$view.find(">.options input.showtable"),this.showtableCheckBoxView=new o(n,t),this.showtableClassView=new s(n,this.$view,"showmatchtable","showtable"),n=r.tabOptions.hideFinishedGroups,t=this.$view.find(">.options input.hidefinished"),this.hidefinishedCheckBoxView=new o(n,t),this.hidefinishedClassView=new s(n,this.$view,"hidefinished")},c.prototype.update=function(){var e,t;for(t=!1,e=0;!t&&e<r.tournaments.length&&!(t=r.tournaments.get(e).getCombinedHistory().length>0);e+=1);t?l.show("history"):l.hide("history")},c.prototype.onresize=function(e,t,n){this.update()},c.prototype.oninsert=function(e,t,n){e===r.tournaments&&n.object.getCombinedHistory().registerListener(this),this.update()},c.prototype.onremove=function(e,t,n){e===r.tournaments&&n.object.getHistory().unregisterListener(this),this.update()},t(function(e){var t;if(t=e('#tabs > [data-tab="history"]'),t.length&&0===e("#testmain").length)return new c(t)}),c}),define("ui/timemachinecommitcontroller",["lib/extend","ui/renamecontroller","timemachine/timemachine","ui/stateloader","ui/strings","ui/toast","ui/filesavermodel"],function(e,t,n,i,r,o,s){function a(e){a.superconstructor.call(this,e,!1),this.view.$view.find("button.removecommit").click(this.remove.bind(this)),this.view.$view.find("button.loaddescendant").click(this.load.bind(this)),this.view.$view.find("button.cleanuptree").click(this.cleanup.bind(this)),this.view.$view.find("button.download").click(this.download.bind(this))}return e(a,t),a.prototype.remove=function(){var e,t,o;e=n.isRelatedToActive(this.model),o=this.model.getTreeName()||"noname",t=e?r.confirmactivetreeremoval:r.confirmtreeremoval,window.confirm(t.replace("%s",o))&&(this.model.remove(),e&&i.unload())},a.prototype.cleanup=function(){n.cleanup(this.model,0)},a.prototype.load=function(){i.loadCommit(this.model.getYoungestDescendant()||this.model)},a.prototype.download=function(){var e;e=new s(this.model.getYoungestDescendant()||this.model),e.save()||new o(r.savefailed)},a.prototype.getName=function(e){return this.model.getTreeName()},a.prototype.setName=function(e){return!!e&&(this.model.setTreeName(e),!0)},a}),define("ui/timemachinecommitview",["lib/extend","core/view","timemachine/timemachine","core/valuemodel","ui/valueview","core/classview","ui/timemachinecommitcontroller","ui/boxview"],function(e,t,n,i,r,o,s,a){function u(e,t){u.superconstructor.call(this,e,t),this.boxView=new a(this.$view),this.nameView=new r(new i,this.$view.find(".name")),this.startDateView=new r(new i,this.$view.find(".startdate")),this.saveDateView=new r(new i,this.$view.find(".savedate")),this.sizeView=new r(new i,this.$view.find(".size")),this.activeView=new o(new i(!1),this.$view,"activetree"),this.updateName(),this.updateStartDate(),this.updateSaveDate(),this.updateSize(),this.updateActive(),this.controller=new s(this),n.registerListener(this)}return e(u,t),u.prototype.updateName=function(){this.nameView.model.set(this.model.getTreeName())},u.prototype.updateStartDate=function(){var e=new Date(this.model.key.startDate);this.startDateView.model.set(e.toLocaleString())},u.prototype.updateSaveDate=function(){var e,t;e=this.model.getYoungestDescendant()||this.model,t=new Date(e.key.saveDate),this.saveDateView.model.set(t.toLocaleString())},u.prototype.updateSize=function(){var e=n.usedRelatedStorage(this.model);e=Math.round(e/102.4)/10,this.sizeView.model.set(e+"kB")},u.prototype.updateActive=function(){this.activeView.model.set(n.isRelatedToActive(this.model))},u.prototype.onsave=function(e,t,n){n.key.isRelated(this.model.key)&&(this.updateSaveDate(),this.updateSize())},u.prototype.onremove=function(e,t,n){n&&!n.isRoot()&&(this.updateSaveDate(),this.updateSize())},u.prototype.oninit=function(e,t,n){this.updateActive()},u.prototype.onload=function(e,t,n){this.updateActive()},u.prototype.oncleanup=function(e,t,n){this.updateSize()},u.prototype.onrename=function(e,t,n){this.updateName()},u.prototype.destroy=function(){this.nameView.destroy(),this.startDateView.destroy(),this.saveDateView.destroy(),this.sizeView.destroy(),this.nameView.model.destroy(),this.startDateView.model.destroy(),this.saveDateView.model.destroy(),this.sizeView.model.destroy(),this.boxView.destroy(),u.superclass.destroy.call(this)},u}),define("ui/timemachinenewtreecontroller",["lib/extend","core/controller","ui/statesaver"],function(e,t,n){function i(e){i.superconstructor.call(this,e),this.$input=this.view.$view.find("input.treename"),this.$button=this.view.$view.find("button.createroot"),this.$input.keydown(this.inputKey.bind(this)),this.$button.click(this.create.bind(this))}return e(i,t),i.prototype.create=function(){var e;return(e=this.$input.val())?(n.createNewEmptyTree(e)&&this.$input.val(""),!0):void this.$input.focus()},i.prototype.inputKey=function(e){return 13!==e.which||(this.$button.click(),e.preventDefault(),!1)},i}),define("ui/timemachineview",["lib/extend","core/view","ui/timemachinecommitview","ui/listview","timemachine/timemachine","ui/timemachinenewtreecontroller"],function(e,t,n,i,r,o){function s(e){s.superconstructor.call(this,void 0,e),this.init()}return e(s,t),s.prototype.init=function(){var e,s;e=this.$view.find(".rootcommits"),s=e.find(".timemachinecommitview.template"),this.initCommits=new i(r.roots,e,s,n),e=this.$view.find(".newcommittree"),this.newcommitTreeController=new o(new t(void 0,e))},s}),define("ui/statefileloadcontroller",["lib/extend","ui/fileloadcontroller","ui/statesaver","ui/stateloader","ui/toast","ui/strings"],function(e,t,n,i,r,o){function s(e){s.superconstructor.call(this,e)}return e(s,t),s.prototype.readFile=function(e){r.closeTemporaryToasts();try{n.newTree(this.file.name.replace(/(\.(json|txt|csv))+$/,"")),i.loadString(e)?(n.saveState(),r.closeTemporaryToasts(),new r(o.loaded,r.LONG)):new r(o.loadfailed,r.LONG)}catch(e){new r(o.loadfailed,r.LONG)}},s.prototype.unreadFile=function(){i.unload()},s}),define("ui/messagemodel",["jquery","lib/extend","core/model","core/valuemodel"],function(e,t,n,i){function r(e,t,n){r.superconstructor.call(this),this.server=e,this.apipath=t,this.data=n,this.status=new i("unsent"),this.result=new i(void 0),this.registerListener(this)}return t(r,n),r.prototype.send=function(){var t=this.server;return!(this.server.tokenvalid.get()===!1||!this.server.token.get())&&("sent"!==this.status.get()&&(this.result.set(void 0),this.server.registerMessage(),e.ajax({method:"POST",url:"https://api.tuvero.de/"+this.apipath,data:this.data,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t.token.get())},xhrFields:{withCredentials:!0},dataType:"json",timeout:1e4,success:function(e){this.result.set(e),!e||e.error?(this.status.set("error"),this.emit("error",e)):(this.status.set("done"),this.emit("receive",e))}.bind(this),error:function(e){this.result.set(e),this.status.set("error"),this.emit("error",e)}.bind(this),complete:function(e){this.server.unregisterMessage(),this.emit("complete",e)}.bind(this)}),this.status.set("sent"),this.emit("send",this.data),!0))},r.prototype.onsend=function(e,t,n){},r.prototype.onreceive=function(e,t,n){},r.prototype.onerror=function(e,t,n){},r.prototype.oncomplete=function(e,t,n){},r.prototype.EVENTS={error:!0,send:!0,receive:!0,complete:!0},r}),define("ui/servermodel",["jquery","lib/extend","core/model","core/valuemodel","core/statevaluemodel","background/online","ui/messagemodel","ui/browser"],function(e,t,n,i,r,o,s,a){function u(e){u.superconstructor.call(this),this.token=new i(e||void 0),this.tokenvalid=new i(void 0),this.openTransactions=new i(0),this.token.registerListener(this),this.validateToken()}return t(u,n),u.prototype.EVENTS={error:!0,authenticate:!0,login:!0,logout:!0,update:!0},u.prototype.validateToken=function(){var e;this.tokenvalid.set(void 0),this.token.get()&&(e=this.message("/"),e.onreceive=function(){this.tokenvalid.set(!0),this.emit("login")}.bind(this),e.onerror=function(){this.tokenvalid.set(!1),this.emit("error")}.bind(this),e.send())},u.prototype.setToken=function(e){this.invalidateToken(),this.token.set(e),this.validateToken()},u.prototype.createToken=function(t){this.invalidateToken(),this.registerMessage(),e.ajax({method:"POST",url:"https://turniere.tuvero.de/profile/token/new/json",timeout:5e3,xhrFields:{withCredentials:!0},success:function(e){e?e.error?this.emit("authenticate"):this.setToken(e.fulltoken):this.emit("error")}.bind(this),error:this.emit.bind(this,"error"),complete:function(){this.unregisterMessage()}.bind(this)})},u.prototype.invalidateToken=function(){var e;return this.token.get()?(e=this.message("/token/delete"),e&&e.send(),this.token.set(void 0),this.tokenvalid.set(void 0),void this.emit("logout")):void this.tokenvalid.set(!1)},u.prototype.message=function(e,t){if(this.tokenvalid.get()!==!1&&this.token.get())return new s(this,e,t)},u.prototype.registerMessage=function(){this.openTransactions.set(this.openTransactions.get()+1)},u.prototype.unregisterMessage=function(){this.openTransactions.set(this.openTransactions.get()-1)},u.prototype.communicationStatus=function(){var e={https:a.secure,tuvero:a.legit,online:o(),validtoken:this.token.get()&&this.tokenvalid.get()};return e.all=Object.keys(e).every(function(t){return e[t]===!0}),e},u.prototype.onupdate=function(){this.emit("update")},u.prototype.save=function(){var e=u.superclass.save.call(this);return e.token=this.token.get()||"",e},u.prototype.restore=function(e){return!!u.superclass.restore.call(this,e)&&(this.setToken(e.token||void 0),!0)},u.prototype.SAVEFORMAT=Object.create(u.superclass.SAVEFORMAT),u.prototype.SAVEFORMAT.token=String,u}),define("ui/logincontroller",["lib/extend","core/controller"],function(e,t){function n(e){n.superconstructor.call(this,e),this.view.$view.find(".login").click(this.model.createToken.bind(this.model)),this.view.$view.find(".logout").click(this.model.invalidateToken.bind(this.model))}return e(n,t),n}),define("ui/imageview",["lib/extend","ui/attributevalueview"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t,"src")}return e(n,t),n}),define("ui/loginview",["lib/extend","core/view","ui/valueview","ui/logincontroller","jquery","core/valuemodel","core/classview","ui/imageview"],function(e,t,n,i,r,o,s,a){function u(e,t){u.superconstructor.call(this,e,t),this.username=new o(void 0),this.avatar=new o(void 0),this.popupBlocked=new o(!1),this.errorModel=new o(!1),this.online=new o(this.model.communicationStatus().online),this.errorModel.registerListener(this.online),this.online.onupdate=function(){this.set(e.communicationStatus().online)},this.$userinfo=this.$view.find(".userinfo"),this.$username=this.$view.find(".username"),this.$avatar=this.$view.find("img.avatar"),this.$loginbutton=this.$view.find("button.login"),this.$logoutbutton=this.$view.find("button.logout"),this.$busy=this.$view.find(".busy"),this.$domainnotice=this.$view.find(".domainnotice"),this.$online=this.$view.find(".online"),this.$offline=this.$view.find(".offline"),this.userinfovisibility=new s(this.model.tokenvalid,this.$userinfo,void 0,"hidden"),this.avatarvisibility=new s(this.avatar,this.$avatar,void 0,"hidden"),this.usernamevisibility=new s(this.username,this.$username,void 0,"hidden"),this.loginbuttonvisibility=new s(this.model.tokenvalid,this.$loginbutton,"hidden",void 0),this.logoutbuttonvisibility=new s(this.model.tokenvalid,this.$logoutbutton,void 0,"hidden"),this.busyvisibility=new s(this.model.openTransactions,this.$busy,void 0,"hidden"),this.onlineVisibility=new s(this.online,this.$online,void 0,"hidden"),this.offlineVisibility=new s(this.online,this.$offline,"hidden"),this.model.communicationStatus().tuvero&&this.$domainnotice.addClass("hidden"),this.usernameView=new n(this.username,this.$username),this.avatarView=new a(this.avatar,this.$avatar),this.loginWindow=void 0,this.loginPollingTimeout=void 0,this.loginWindowSuppressed=new o(!1),this.popupBlockedView=new s(this.popupBlocked,this.$view.find(".popupnotice"),void 0,"hidden"),this.errorView=new s(this.errorModel,this.$view.find(".errornotice"),void 0,"hidden"),r(window).on("beforeunload",function(e){this.closeLoginWindow()}.bind(this)),this.controller=new i(this)}return e(u,t),u.prototype.openLoginWindow=function(){return this.closeLoginWindow(),this.loginWindowSuppressed.get()?(this.loginWindowSuppressed.set(!1),this.loginWindow&&(this.onerror(),this.loginWindow=void 0),!1):(this.loginWindow=window.open("https://turniere.tuvero.de/login"),this.isLoginWindowOpen()?(this.popupBlocked.set(!1),this.loginWindowSuppressed.set(!0)):(this.closeLoginWindow(),this.popupBlocked.set(!0)),this.isLoginWindowOpen())},u.prototype.loginPolling=function(){var e;this.loginPollingTimeout||(e=this.loginPollingTimeout=window.setTimeout(function(){this.loginPollingTimeout===e&&(this.loginPollingTimeout=void 0,this.model.createToken())}.bind(this),500))},u.prototype.closeLoginWindow=function(){console.log("closeLoginWindow"),this.isLoginWindowOpen()&&(this.loginWindow&&this.loginWindow.close(),void 0!==this.loginPollingTimeout&&(window.clearInterval(this.loginPollingTimeout),this.loginPollingInterval=void 0),this.loginWindow=void 0,this.loginWindowSuppressed.set(!1))},u.prototype.isLoginWindowOpen=function(){return!!this.loginWindow&&!!this.loginWindow.parent},u.prototype.updateProfile=function(){if(!this.model.communicationStatus().all)return console.error("LoginModel.communicationStatus().all isn't true"),this.username.set(void 0),void this.avatar.set(void 0);this.errorModel.set(!1);var e=this.model.message("/profile");e.onreceive=function(e,t,n){this.username.set(n.displayname),this.avatar.set(n.avatar_url)}.bind(this),e.onerror=function(){this.errorModel.set(!0),this.username.set(void 0),this.avatar.set(void 0)}.bind(this),e.send()},u.prototype.onlogin=function(){this.errorModel.set(!1),this.suppressLoginWindow=!1,this.updateProfile(),this.popupBlocked.set(!1),this.closeLoginWindow()},u.prototype.onlogout=function(){this.errorModel.set(!1),this.suppressLoginWindow=!1,this.updateProfile()},u.prototype.onerror=function(){this.errorModel.set(!0),this.suppressLoginWindow=!1,this.updateProfile()},u.prototype.onauthenticate=function(e,t){this.errorModel.set(!1),(this.isLoginWindowOpen()||this.openLoginWindow())&&this.loginPolling()},u}),define("ui/servertournamentmodel",["lib/extend","core/model"],function(e,t){function n(e,t){n.superconstructor.call(this),this.id=t.id||void 0,this.name=t.name,this.place=t.place,this.creator=t.creator_name,this.teamsize=t.teamsize,this.variant=t.target,this.url_www=t.url_www,this.registrations=t.registrations||[],this.server=e,this.server.registerListener(this)}return e(n,t),n.prototype.EVENTS={error:!0,ready:!0},n.prototype.readRegistrations=function(){var e=this.server.message("t/"+this.id);e.onreceive=function(e,t,n){n.registrations?(this.registrations=n.registrations,this.emit("ready")):this.emit("error")}.bind(this),e.onerror=function(){this.emit("error")}.bind(this),e.send()},n}),define("ui/servertournamentlistmodel",["lib/extend","list/listmodel","ui/servertournamentmodel","presets"],function(e,t,n,i){function r(e){r.superconstructor.call(this),this.server=e,this.server.registerListener(this)}return e(r,t),r.prototype.parseResult=function(e){this.clear(),Object.keys(e.tournaments).forEach(function(t){var r,o;o=e.tournaments[t],o.target===i.target&&(r=new n(this.server,o),this.push(r))},this)},r.prototype.update=function(){var e=this.server.message("t",{publiconly:!1,showarchive:!0});e.onreceive=function(e,t,n){this.parseResult(n)}.bind(this),e.onerror=this.clear.bind(this),e.send()},r.prototype.onlogin=function(){this.update()},r.prototype.onlogout=function(){this.clear()},r.prototype.onerror=function(){this.clear()},r}),define("ui/servertournamentloader",["ui/statesaver","ui/state","ui/playermodel","ui/teammodel"],function(e,t,n,i){function r(){r.superconstructor.call(this)}return r.prototype.loadTournament=function(r){e.createNewEmptyTree(r.name),t.teamsize.set(r.teamsize),r.registrations.forEach(function(e){for(var r;e.length>t.teamsize.get();)e.pop();for(;e.length<t.teamsize.get();)e.push("N.N.");r=e.map(function(e){var t=new n(e);if(t.getName()!==n.NONAME)return t}),r.indexOf(void 0)===-1&&t.teams.push(new i(r))},this)},r.loadTournament=r.prototype.loadTournament,r}),define("ui/servertournamentcontroller",["lib/extend","core/controller","core/listener","ui/servertournamentloader"],function(e,t,n,i){function r(e){r.superconstructor.call(this,e),this.view.$view.find("button.play").click(this.model.readRegistrations.bind(this.model)),n.bind(this.model,"ready",function(){i.loadTournament(this.model)},this)}return e(r,t),r}),define("ui/servertournamentview",["lib/extend","core/view","ui/servertournamentcontroller"],function(e,t,n){function i(e,t){i.superconstructor.call(this,e,t),this.$view.find(".name").text(e.name),this.$view.find(".place").text(e.place),this.$view.find(".creator").text(e.creator),this.$view.find(".teamsize").text(e.teamsize),this.$view.find(".url").text(e.url_www),this.$view.find("a.url_href").attr("href",e.url_www),this.controller=new n(this)}return e(i,t),i}),define("ui/serverautoloadmodel",["lib/extend","core/model","ui/browser","ui/servertournamentmodel","ui/servertournamentloader","presets"],function(e,t,n,i,r,o){function s(e){s.superconstructor.call(this),this.server=e,this.tournamentID=this.readTournamentID(),this.server.registerListener(this)}return e(s,t),s.prototype.readTournamentID=function(){var e;if(n.inithash&&(e=n.inithash.match(/^\/?t\/([0-9a-f]+)$/),e&&e[0]&&e[1]))return e[1]},s.prototype.onlogin=function(){var e;this.tournamentID&&(e=this.server.message("t/"+this.tournamentID),e.onreceive=function(e,t,s){if(s&&s.registrations&&s.target===o.target){var a=new i(this.server,s);r.loadTournament(a),window.location.hash.replace(/^#/,"")===n.inithash&&(window.location.hash="")}}.bind(this),e.send())},s}),define("ui/hometab",["lib/extend","jquery","core/view","ui/state","ui/strings","ui/toast","ui/browser","ui/timemachineview","ui/statesaver","ui/statefileloadcontroller","core/valuemodel","core/classview","ui/servermodel","ui/loginview","ui/storage","presets","ui/servertournamentlistmodel","ui/servertournamentview","ui/listview","ui/serverautoloadmodel"],function(e,t,n,i,r,o,s,a,u,l,c,d,h,p,f,m,g,v,y,w){function b(e){b.superconstructor.call(this,void 0,e),this.init()}return e(b,n),b.prototype.init=function(){var e,t,n,i;e=this.$view.find("button.reset"),e.click(function(){window.confirm(r.clearstorage)&&u.removeEverything()}),t=this.$view.find("a.errorlink"),t.attr("href",t.attr("href")+"&browser="+s.name+" "+s.version),n=this.$view.find(".timemachineview"),this.timeMachineView=new a(n),e=this.$view.find("button.load"),this.fileLoadController=new l(e),n=this.$view.find(".chromerecommendation"),this.chromeRecommendationClassView=new d(new c("Chrome"===s.name),n,"hidden"),this.serverModel=f.register(m.names.apitoken,h),this.serverAutoloadModel=new w(this.serverModel),this.serverTournamentListModel=new g(this.serverModel),n=this.$view.find(".servertournaments"),i=n.find(".template"),this.serverTournamentListView=new y(this.serverTournamentListModel,n,i,v),n=this.$view.find(".loginview"),this.loginView=new p(this.serverModel,n),this.serverModel.token.get()||(this.loginView.loginWindowSuppressed.set(!0),this.serverModel.createToken())},t(function(e){var t;if(t=e('#tabs > [data-tab="home"]'),t.length&&0===e("#testmain").length)return new b(t)}),b}),define("ui/lengthview",["lib/extend","core/view"],function(e,t){function n(e,t,i){n.superconstructor.call(this,e,t),this.offset=i||0,this.update()}return e(n,t),n.prototype.update=function(){this.$view.text(this.model.length+this.offset)},n.prototype.onresize=function(){this.update()},n}),define("ui/listclickcontroller",["jquery","lib/extend","core/controller","core/valuemodel"],function(e,t,n,i){function r(t,n,o){var s,a;r.superconstructor.call(this,t),o=o||{},o.active=o.active||new i(!0),o.callbackthis=o.callbackthis||window,o.event=o.event||"click","TABLE"===this.view.$view.prop("tagName")?o.selector=o.selector||"> tbody >":o.selector=o.selector||">",s=this.view,a=this.model,this.view.$view.on(o.event,o.selector,function(t){var i,r;if(o.active.get()&&(i=e(this),r=s.indexOf(i),r!==-1))return n.call(o.callbackthis,a,r),t.preventDefault(),!1})}return t(r,n),r}),define("ui/newtournamentcontroller",["jquery","lib/extend","core/controller","tournament/tournamentindex","ui/strings","ui/tournamentcontroller","presets"],function(e,t,n,i,r,o,s){function a(t){var n;a.superconstructor.call(this,t),n=this,this.$tournamentsize=this.view.$view.find("input.tournamentsize"),this.$buttons=this.view.$view.find("button[data-system]"),this.$tournamentsize.attr("max",this.model.numTeams),this.$tournamentsize.val(this.model.numTeams),n.updateViewHeight(),this.$tournamentsize.on("change keypress mousewheel",function(){n.updateViewHeight(),window.setTimeout(n.updateViewHeight.bind(n),1)}),this.$buttons.click(function(t){var i,r,o;i=e(this),r=i.attr("data-system"),o=Number(n.$tournamentsize.val()),n.createTournament(r,o)})}return t(a,n),a.prototype.validateSize=function(e){return e>=2&&e<=this.model.numTeams},a.prototype.updateViewHeight=function(){var e;e=Number(this.$tournamentsize.val()),this.validateSize(e)&&this.view.$view.attr("rowspan",e)},a.prototype.createTournament=function(e,t){var n,a,u,l,c;if(this.validateSize(t)){for(c=["wins"],s.systems[e]&&s.systems[e].ranking&&(c=s.systems[e].ranking.slice(0)),n=i.createTournament(e,c),n.getName().set(r["defaultname"+n.SYSTEM]),a=this.model.tournaments.getGlobalRanking(this.model.teams.length),l=Math.min(this.model.firstTeamID+t,a.displayOrder.length),u=this.model.firstTeamID;u<l;u+=1)n.addTeam(a.displayOrder[u]);n&&this.model.tournaments.push(n,this.model.firstTeamID),o.initiateNameChange(n)}},a}),define("ui/newtournamentview",["jquery","lib/extend","core/view","ui/newtournamentcontroller","presets"],function(e,t,n,i,r){function o(t,n,s,a,u){o.superconstructor.call(this,void 0,s),this.$view.addClass("newsystem"),n<2&&this.$view.addClass("notenoughteams"),this.model.firstTeamID=t,this.model.numTeams=n,this.model.tournaments=a,this.model.teams=u,this.$view.find("button").each(function(){var t,n;t=e(this),n=t.attr("data-system"),n&&!r.systems[n]&&t.hide()}),this.controller=new i(this)}return t(o,n),o}),define("ui/teamdeletecontroller",["lib/extend","core/controller","ui/state","ui/strings"],function(e,t,n,i){function r(e){r.superconstructor.call(this,e),this.view.$view.find("button.delete").click(this.confirmDeletion.bind(this))}return e(r,t),r.prototype.confirmDeletion=function(){var e=this.model.getID();e===-1?console.error("Cannot delete team: It has not been assigned to a list, hence its ID is -1"):n.teams.get(e)!==this.model?console.error("Cannot delete team: ID mismatch. Has the team already been removed from the list?"):window.confirm(i.deleteteamconfirmation.replace("%1",this.model.getID()+1).replace("%2",this.model.getNames().join("/")))&&this.performDeletion()},r.prototype.performDeletion=function(){var e=this.model.getID();e===-1?console.error("Cannot delete team: It has not been assigned to a list, hence its ID is -1"):n.teams.get(e)!==this.model?console.error("Cannot delete team: ID mismatch. Has the team already been removed from the list?"):n.teams.remove(e)},r}),define("ui/systemtablerowview",["jquery","lib/extend","core/view","ui/teamview","ui/newtournamentview","ui/generictournamentview","ui/teamdeletecontroller"],function(e,t,n,i,r,o,s){function a(e,t,n,r,o,u){a.superconstructor.call(this,n.get(e),t),this.teamID=e,this.teams=n,this.tournaments=r,this.teamView=new i(this.model,this.$view),this.teamDeleteController=new s(this),this.tournamentRank=-1,this.globalRank=-1,this.updatepending=void 0,this.$tournamentrank=this.$view.find(".tournamentrank"),this.$globalrank=this.$view.find(".rank"),this.tournamentView=void 0,this.viewPopulator=o,this.updateEverything(),this.teams.registerListener(this),this.tournaments.registerListener(this)}return t(a,n),a.prototype.updateRankTexts=function(){var e,t,n;e=this.tournaments.getGlobalRanking(this.teams.length),t=e.globalRanks[this.teamID],n=e.tournamentRanks[this.teamID],this.globalRank!==t&&(this.$globalrank.text(t+1),this.globalRank=t),this.tournamentRank!==n&&(this.$tournamentrank.text(n+1),this.tournamentRank=n)},a.prototype.updateLastRowClass=function(){var e,t,n,i,r;return r=this.tournaments.getGlobalRanking(this.teams.length),e=r.tournamentIDs[this.teamID],t=r.displayOrder.indexOf(this.teamID),t+1===this.teams.length?void this.$view.addClass("lastrow"):(n=r.displayOrder[t+1],i=r.tournamentIDs[n],void(e!==i?this.$view.addClass("lastrow"):this.$view.removeClass("lastrow")))},a.prototype.updateSystem=function(){var t,n,i,s,a,u,l,c,d,h,p;if(t=this.tournaments.getGlobalRanking(this.teams.length),n=t.displayOrder.indexOf(this.teamID),i=t.tournamentIDs[this.teamID],s=!1,0===n?s=!0:(a=t.displayOrder[n-1],t.tournamentIDs[a]!==i&&(s=!0)),this.tournamentView&&(this.tournamentView.destroy(),this.tournamentView=void 0,this.$view.removeClass("firstrow")),s){for(u=t.displayOrder.length,l=n+1;l<u&&(c=t.displayOrder[l],t.tournamentIDs[c]===i);l+=1);d=l-n,p=e("<td>").addClass("system"),h=this.tournaments.get(i),this.viewPopulator.populate(h,p),h?this.tournamentView=new o(h,p,this.tournaments):this.tournamentView=new r(n,d,p,this.tournaments,this.teams),this.$view.append(p),this.$view.addClass("firstrow")}},a.prototype.updateEverything=function(){this.updateRankTexts(),this.updateLastRowClass(),this.updateSystem()},a.prototype.onupdate=function(e,t,n){var i=this;e===this.tournaments&&void 0===this.updatepending&&(this.updatepending=!0,window.setTimeout(function(){i.updateEverything(),i.updatepending=void 0},1))},a.prototype.oninsert=function(e,t,n){e===this.teams&&this.updateEverything()},a.prototype.onremove=function(e,t,n){e===this.teams&&this.updateEverything()},a.prototype.destroy=function(){this.tournamentView&&this.tournamentView.destroy(),a.superclass.destroy.call(this)},a}),define("ui/systemlistview",["lib/extend","ui/listview","ui/teamtableview","list/orderlistmodel","core/listener","ui/systemtablerowview"],function(e,t,n,i,r,o){function s(e,t,a,u,l){var c,d,h;c=new i,s.superconstructor.call(this,c,t,t.find(".team.template"),o,e,a,l),this.teams=e,this.tournaments=a,d=void 0,r.bind(a,"update",function(e,t,n){var i=this;void 0===d&&window.setTimeout(function(){i.updateOrder(),d=void 0},1)},this),r.bind(e,"insert,remove",function(e,t,n){var i=this;"remove"===t&&i.removeAfter(n.id),void 0===d&&window.setTimeout(function(){i.updateOrder(),d=void 0},1)},this),this.updateOrder(),h=new n(this,u)}return e(s,t),s.prototype.updateOrder=function(){var e,t;this.teams.length>0&&(e=this.tournaments.getGlobalRanking(this.teams.length),t=e.displayOrder,this.model.enforceOrder(t))},s.prototype.removeAfter=function(e){var t=this.model.map(function(e){return e}).filter(function(t){
return t<e});this.model.enforceOrder(t)},s}),define("ui/tournamentviewpopulator",["jquery","lib/extend","core/view","ui/generictournamentview"],function(e,t,n,i){function r(t){var n={};t.each(function(){var t,i;t=e(this),i=t.attr("data-system"),n[i]=t}),this.$templates=n}return t(i,n),r.prototype.populate=function(e,t){var n;n=e&&e.SYSTEM,void 0===this.$templates[n]?console.error("system template has not been loaded: "+n):t.append(this.$templates[n].children().clone())},r}),define("ui/newtab",["lib/extend","jquery","core/view","ui/state","ui/systemlistview","ui/tournamentviewpopulator","ui/checkboxview","core/classview","ui/tabshandle"],function(e,t,n,i,r,o,s,a,u){function l(e){l.superconstructor.call(this,void 0,e),this.init(),this.update(),i.teams.registerListener(this)}return e(l,n),l.prototype.init=function(){var e,t,n,s;n=this.$view.find(".template[data-system]").detach(),t=new o(n),e=this.$view.find(".systemtable"),s=new r(i.teams,e,i.tournaments,i.teamsize,t),this.$view.find(".boxview.system.template").detach()},t(function(e){var t;if(t=e('#tabs > [data-tab="teams"]'),t.length&&0===e("#testmain").length)return new l(t)}),l}),define("ui/newteamcontroller",["jquery","lib/extend","core/controller","ui/playermodel","ui/teammodel"],function(e,t,n,i,r){function o(e){var t;o.superconstructor.call(this,e),t=this,this.$players=this.view.$players,this.view.$players.keydown(function(e){if(13===e.which)return t.createNewTeam(),e.preventDefault(),!1}),this.view.$button.click(this.createNewTeam.bind(this))}return t(o,n),o.prototype.readPlayerNames=function(){var t;for(t=this.$players.map(function(t,n){var i;if(i=e(n),!i.prop("disabled"))return i.val()}).get();t.length>0&&void 0===t[t.length-1];)t.pop();return t},o.prototype.createNewTeam=function(){var e,t;return e=this.readPlayerNames(),0===e.length?void console.error("NewTeamController: all input fields disabled?"):(t=e.map(function(e){var t;if(t=new i(e),t.getName()!==i.NONAME)return t}),t.indexOf(void 0)===-1&&(this.model.push(new r(t)),this.view.resetNames()),void this.view.focusEmpty())},o}),define("ui/newteamview",["jquery","lib/extend","core/view","ui/newteamcontroller"],function(e,t,n,i){function r(e,t,n){r.superconstructor.call(this,e,t),this.$players=this.$view.find("input.playername"),this.$lines=this.$view.find(".newteamline"),this.$button=this.$view.find("button.register"),n&&(this.teamsize=n,this.teamsize.registerListener(this),this.updateTeamSize()),this.controller=new i(this)}return t(r,n),r.prototype.resetNames=function(){this.$players.val(""),this.$players.typeahead&&this.$players.typeahead("val","")},r.prototype.focusEmpty=function(){this.$players.each(function(){var t;if(t=e(this),!t.attr("disabled")&&/^\s*$/.test(t.val()))return e(this).focus(),!1})},r.prototype.updateTeamSize=function(){var t;return this.teamsize?(t=this.teamsize.get(),this.$players.each(function(n){n<t?e(this).prop("disabled",!1):e(this).prop("disabled",!0)}),void this.$lines.each(function(n){n<t?e(this).show():e(this).hide()})):void console.error("NewTeamView.updateTeamSize called without a valid teamsize model")},r.prototype.onreset=function(){this.resetNames()},r.prototype.onupdate=function(e){e===this.teamsize&&this.updateTeamSize()},r}),define("ui/noregmodel",["lib/extend","core/valuemodel","tournament/tournamentmodel"],function(e,t,n){function i(e){this.tournaments=e,i.superconstructor.call(this,this.isClosed()),this.tournaments.registerListener(this),this.tournaments.closedTournaments.registerListener(this)}return e(i,t),i.prototype.isClosed=function(){var e;for(e=0;e<this.tournaments.length;e+=1)if("initial"!==this.tournaments.get(e).state.get()||!this.tournaments.closedTournaments.includes(e))return!0;return!1},i.prototype.onupdate=function(){i.superclass.set.call(this,this.isClosed())},i.prototype.set=void 0,i}),define("ui/preregcloserview",["lib/extend","core/view"],function(e,t){function n(e,t){n.superconstructor.call(this,e,t),this.updateStatus()}return e(n,t),n.prototype.updateStatus=function(){0===this.model.length?this.$view.removeClass("noprereg"):this.$view.addClass("noprereg")},n.prototype.onresize=function(){this.updateStatus()},n}),define("ui/rankingview",["lib/extend","ui/templateview","ui/strings","ui/teamview"],function(e,t,n,i){function r(e,t,n,i){r.superconstructor.call(this,e,t,t.find(".rankingrow.template")),this.$rankingheader=this.$view.find(".rankingheader"),this.$headercomponenttemplate=this.$rankingheader.find(".component"),this.$headercomponenttemplate.detach(),this.$headernametemplate=this.$rankingheader.find(".name"),this.$headernametemplate.detach(),this.$componenttemplate=this.$template.find(".component").detach(),this.teamList=n,this.teamViews=[],this.abbreviate=i,this.updateTimeout=void 0,this.onupdate(this.model,"update"),this.abbreviate.registerListener(this)}return e(r,t),r.prototype.reset=function(){this.$view.find(".rankingrow").remove(),this.teamViews.forEach(function(e){e.destroy()}),this.teamViews=[]},r.prototype.update=function(){var e,t,r;if(e=this.model.get(),!e)return!1;for(this.reset(),t=0,e.displayOrder.forEach(function(e){var n=this.teamList.get(e)&&this.teamList.get(e).length||0;t<n&&(t=n)},this),this.$view.find(".rankingheader .name").remove(),r=0;r<t;r+=1)this.$rankingheader.append(this.$headernametemplate.clone());this.$view.find(".rankingheader .component").remove(),e.components.forEach(function(e){var t;t=this.useAbbreviations()?n["ranking_short_"+e]:n["ranking_medium_"+e],this.$rankingheader.append(this.$headercomponenttemplate.clone().text(t))},this),e.displayOrder.forEach(function(t,n){var r,o;o=this.teamList.get(e.ids[t]),r=this.$template.clone(),r.find(".rank").text(e.ranks[t]+1),this.teamViews.push(new i(o,r)),e.components.forEach(function(n){r.append(this.$componenttemplate.clone().text(e[n][t]))},this),this.$view.append(r)},this)},r.prototype.onupdate=function(e,t,n){var i=this;void 0===this.updateTimeout&&(this.updateTimeout=window.setTimeout(function(){i.update(),i.updateTimeout=void 0},1))},r.prototype.useAbbreviations=function(){return this.abbreviate.get()},r.prototype.destroy=function(){this.reset(),r.superclass.destroy.call(this)},r}),define("ui/tournamentrankingview",["lib/extend","core/view","ui/rankingview","ui/listview","ui/popoutboxview","ui/correctionview","ui/teamtableview","core/valuemodel","core/listener","ui/tournamentrenamecontroller"],function(e,t,n,i,r,o,s,a,u,l){function c(e,d,h,p){var f=d.clone();c.superconstructor.call(this,e,d),this.renameController=new l(new t(e,this.$view.find(".tournamentname.rename"))),this.boxview=new r(this.$view,f,function(t){return new c(e,t,h,p)}),this.$ranking=this.$view.find(".rankingview"),this.rankingview=new n(this.model.getRanking(),this.$ranking,h,p),this.$corrections=this.$view.find(".correctiontable"),this.$correctionrow=this.$corrections.find(".correctionrow.template").detach(),this.corrections=new i(this.model.getCorrections(),this.$corrections,this.$correctionrow,o),this.correctionTeamHideListener=new s(this.corrections,new a(3)),this.$names=this.$view.find(".tournamentname"),u.bind(this.model.getName(),"update",this.updateNames.bind(this)),u.bind(this.model.getState(),"update",this.updateVisibility.bind(this)),this.updateNames(),this.updateVisibility()}return e(c,t),c.prototype.updateNames=function(){this.$names.text(this.model.getName().get())},c.prototype.updateVisibility=function(){"initial"===this.model.getState().get()?this.$view.addClass("hidden"):this.$view.removeClass("hidden")},c}),define("ui/rankingtab",["lib/extend","jquery","core/view","ui/listview","ui/state","ui/checkboxview","core/classview","ui/tournamentrankingview","ui/tabshandle","ui/closedtournamentcollapselistener"],function(e,t,n,i,r,o,s,a,u,l){function c(e){c.superconstructor.call(this,void 0,e),this.init(),this.update(),r.tournaments.registerListener(this)}return e(c,n),c.prototype.init=function(){var e,t,n;n=r.tabOptions.nameMaxWidth,t=this.$view.find(">.options input.maxwidth"),this.maxwidthCheckBoxView=new o(n,t),this.maxwidthClassView=new s(n,this.$view,"maxwidth","nomaxwidth"),n=r.tabOptions.showNames,t=this.$view.find(">.options input.shownames"),this.maxwidthCheckBoxView=new o(n,t),this.maxwidthClassView=new s(n,this.$view,void 0,"hidenames"),this.rankingabbreviations=r.tabOptions.rankingAbbreviations,t=this.$view.find(">.options input.abbreviate"),this.abbreviateCheckBoxView=new o(this.rankingabbreviations,t),t=this.$view.find(".tournamentlist"),e=t.find(".tournament.template"),this.tournamentList=new i(r.tournaments,t,e,a,r.teams,this.rankingabbreviations),this.collapseListener=new l(this.tournamentList)},c.prototype.update=function(){var e,t;for(t=!1,e=0;!t&&e<r.tournaments.length;e+=1)t="initial"!==r.tournaments.get(e).getState().get();t?u.show("ranking"):u.hide("ranking")},c.prototype.onupdate=function(e,t,n){e!==r.tournaments&&this.update()},c.prototype.oninsert=function(e,t,n){n.object.getState().registerListener(this),this.update()},c.prototype.onremove=function(e,t,n){n.object.getState().unregisterListener(this),this.update()},t(function(e){var t;if(t=e('#tabs > [data-tab="ranking"]'),t.length&&0===e("#testmain").length)return new c(t)}),c}),define("ui/settingstab",["lib/extend","jquery","core/view","ui/csvexportcontroller","ui/fontsizeview"],function(e,t,n,i,r){function o(e){o.superconstructor.call(this,void 0,e),this.init()}return e(o,n),o.prototype.init=function(){var e;this.$fontsizeview=this.$view.find(".fontsizeview").eq(0),this.fontsizeview=new r(this.$fontsizeview,t("body")),e=this.$view.find(".csv"),this.csvExportController=new i(new n(void 0,e))},t(function(e){var t;if(t=e('#tabs > [data-tab="settings"]'),t.length&&0===e("#testmain").length)return new o(t)}),o}),define("ui/splash",["jquery","ui/browser"],function(e,t){var n;return n={hide:function(){console.error("Splash.hide() called before pageload")},loading:function(){console.error("Splash.loading() called before pageload")}},e(function(e){function i(e){r.removeClass(),r.addClass(e)}var r;return r=e("#splash"),"MSIE"===t.name&&t.version<9?void i("oldinternetexplorer"):(i("starting"),n.valid=!0,n.loading=function(){i("restoring")},n.update=function(){i("update"),e("#tabs").show()},n.hide=function(){i("ready"),e("body").removeClass("splash"),setTimeout(function(){r.addClass("hidden")},1e3)},void(n.error=function(){i("error")}))}),n}),define("ui/teamformatdownloadcontroller",["lib/extend","core/controller","lib/FileSaver","lib/Blob","ui/toast","ui/strings","presets","ui/state"],function(e,t,n,i,r,o,s,a){function u(e){u.superconstructor.call(this,e),this.view.$view.click(this.save.bind(this))}var l;return l=[],l[1]="Teilnehmer 1\nTeilnehmer 2\nTeilnehmer 3\nTeilnehmer 4\n\n# Hinweis: Tete-a-tete -> ein Name pro Zeile\n",l[2]='Erik E. Lorenz, Fabian "Fabe" Böttcher\nSpieler 3, Spieler 4\nSpieler 5, Spieler 6\nSpieler 7, Spieler 8\n\n# Hinweis: Doublette -> Zwei Namen pro Zeile, mit Komma getrennt\n',l[3]='Erik E. Lorenz, Fabian "Fabe" Böttcher, Spieler 3\nSpieler 4, Spieler 5, Spieler 6\nSpieler 7, Spieler 8, Spieler 9\n\n# Hinweis: Triplette -> Drei Namen pro Zeile, mit Komma getrennt\n',e(u,t),u.prototype.save=function(){var e;try{e=new i([l[a.teamsize.get()]||l[2]]),n(e,s.names.teamsfile)}catch(e){console.error(e.stack),new r(o.savefailed)}},u}),define("ui/teamsizecontroller",["jquery","lib/extend","core/controller"],function(e,t,n){function i(t){var n,r;i.superconstructor.call(this,t),n=this.view.$buttons,r=this.model,n.click(function(){var t;t=n.index(e(this))+1,t>0&&r.set(t)})}return t(i,n),i}),define("ui/teamsizeview",["lib/extend","core/view","ui/teamsizecontroller"],function(e,t,n){function i(e,t){i.superconstructor.call(this,e,t),this.$buttons=this.$view.find(">button"),this.update(),this.controller=new n(this)}return e(i,t),i.prototype.update=function(){var e;e=this.model.get(),this.$buttons.removeClass("selected"),this.$buttons.eq(e-1).addClass("selected")},i.prototype.onupdate=function(){this.update()},i}),define("ui/teamstab",["jquery","lib/extend","core/view","ui/listview","ui/teamview","ui/state","ui/newteamview","ui/lengthview","ui/teamsizeview","ui/preregcloserview","ui/checkboxview","core/classview","ui/tabshandle","ui/teamtableview","ui/inputview","ui/teamsfileloadcontroller","presets","ui/noregmodel","ui/deleteallteamscontroller","ui/autocompletionmodel","ui/autocompletionview","ui/teamformatdownloadcontroller","timemachine/timemachine","ui/storage"],function(e,t,n,i,r,o,s,a,u,l,c,d,h,p,f,m,g,v,y,w,b,k,x,q){function E(e){E.superconstructor.call(this,void 0,e),this.init(),this.update(),x.commit.registerListener(this)}return t(E,n),E.prototype.init=function(){var e,t,i;o.teamsize.get()<g.registration.minteamsize&&o.teamsize.set(g.registration.minteamsize),o.teamsize.get()>g.registration.maxteamsize&&o.teamsize.set(g.registration.maxteamsize),e=this.$view.find(".newteamview"),this.newTeamView=new s(o.teams,e,o.teamsize),e=this.$view.find(".nextteamnumber"),this.lengthView=new a(o.teams,e,1),e=this.$view.find("> .teamsizeview"),0!==e.length&&(this.teamSizeView=new u(o.teamsize,e)),this.teamSizeCloserView=new l(o.teams,this.$view),this.regVisibilityView=new d(new v(o.tournaments),this.$view,"noreg"),i=o.tabOptions.nameMaxWidth,e=this.$view.find(">.options input.maxwidth"),this.maxwidthCheckBoxView=new c(i,e),this.maxwidthClassView=new d(i,this.$view,"maxwidth","nomaxwidth"),g.registration.teamsizeicon&&h.bindTabOpts("teams",o.teamsize),e=this.$view.find("button.deleteall"),this.deleteAllTeamsController=new y(new n(void 0,e)),t=this.$view.find(">button.fileloadteams"),this.teamsFileLoadController=new m(t),this.autocompletionModel=q.register(g.names.dbplayername,w),this.autocompletionModel.download(g.names.playernameurl),e=this.$view.find("input.playername"),this.autocompletionView=new b(this.autocompletionModel,e)},E.prototype.onupdate=function(){this.update()},E.prototype.update=function(){x.commit.get()?h.show("teams"):h.hide("teams")},e(function(e){var t;if(t=e('#tabs > [data-tab="teams"]'),t.length&&0===e("#testmain").length)return new E(t)}),E}),define("ui/teamtoastslistener",["lib/extend","core/listener","ui/state","ui/listcollectormodel","ui/teammodel","ui/toast","ui/strings"],function(e,t,n,i,r,o,s){function a(e){a.superconstructor.call(this,e)}return e(a,t),a.prototype.onupdate=function(e,t,n){var i,r,a;if(r=n.source,r&&(a=r.getPlayer(n.id)))return i=a.getName(),new o(s.namechanged.replace("%s",i))},a.prototype.oninsert=function(e,t,n){var i;return i=n.id,new o(s.teamadded.replace("%s",i+1))},a.prototype.onremove=function(e,t,n){var i;return i=n.id,new o(s.teamdeleted.replace("%s",i+1))},a.listeners={},a.init=function(){a.listeners.teams=new a(n.teams),a.listeners.namechange=new a(new i(n.teams,r))},a}),define("core/common",["background/autosave","background/dropstyle","background/featuredetect","background/fonthotkeys","background/initboxviews","background/matchtoasts","background/online","background/print","background/reset","background/save","background/statetoasts","background/tournamenterrortoasts","core/byeresult","core/classview","core/controller","core/correctionmodel","core/correctionreferencemodel","core/emitter","core/listener","core/matchmodel","core/matchreferencemodel","core/matchresult","core/model","core/propertymodel","core/propertyvaluemodel","core/random","core/resultreferencemodel","core/rle","core/selectionvaluemodel","core/statevaluemodel","core/tabimageview","core/tabmenucontroller","core/tabmenuview","core/tabmodel","core/type","core/uniquelistmodel","core/valuemodel","core/view","list/binningreferencelistmodel","list/combinedreferencelistmodel","list/indexedlistmodel","list/indexedmodel","list/lengthmodel","list/listexclusionlistener","list/listmodel","list/listupdatelistener","list/maplistmodel","list/orderlistmodel","list/readonlylistmodel","list/referencelistmodel","list/sortedreferencelistmodel","math/absolutematrix","math/antisymmetricmatrixmodel","math/delegatematrix","math/matrixmodel","math/positivematrix","math/symmetricmatrixmodel","math/transposedifferencematrix","math/transposesummatrix","math/trianglematrixmodel","math/vectormodel","timemachine/commitmodel","timemachine/keymodel","timemachine/query","timemachine/reflog","timemachine/timemachine","ranking/rankingbuchholzcomponent","ranking/rankingbuchholzlistener","ranking/rankingbyelistener","ranking/rankingcomponent","ranking/rankingcomponentindex","ranking/rankingdatalistener","ranking/rankingdatalistenerindex","ranking/rankingdownvoteslistener","ranking/rankingfinebuchholzcomponent","ranking/rankingfinebuchholzlistener","ranking/rankinggamematrixlistener","ranking/rankingheadtoheadcomponent","ranking/rankingheadtoheadlistener","ranking/rankingidcomponent","ranking/rankingkocomponent","ranking/rankingkolistener","ranking/rankinglostpointscomponent","ranking/rankinglostpointslistener","ranking/rankingmapper","ranking/rankingmodel","ranking/rankingnumgamescomponent","ranking/rankingnumgameslistener","ranking/rankingpointscomponent","ranking/rankingpointslistener","ranking/rankingsaldocomponent","ranking/rankingsaldolistener","ranking/rankingsonneborncomponent","ranking/rankingsonnebornlistener","ranking/rankingtaccomponent","ranking/rankingtaclistener","ranking/rankingupvoteslistener","ranking/rankingvotescomponent","ranking/rankingvoteslistener","ranking/rankingwinscomponent","ranking/rankingwinslistener","ranking/rankingwinsmatrixlistener","tournament/kotournamentmodel","tournament/roundtournamentmodel","tournament/swisstournamentmodel","tournament/tournamentindex","tournament/tournamentlistmodel","tournament/tournamentmodel","ui/attributevalueview","ui/autocompletionmodel","ui/autocompletionview","ui/binarytreemodel","ui/boxcontroller","ui/boxview","ui/browser","ui/browserinfocontroller","ui/browserinfoview","ui/checkboxcontroller","ui/checkboxview","ui/closedtournamentcollapselistener","ui/correctionview","ui/csvexportcontroller","ui/debug","ui/debugtab","ui/deleteallteamscontroller","ui/fileloadcontroller","ui/filesavermodel","ui/finishroundcontroller","ui/fontsizecontroller","ui/fontsizemodel","ui/fontsizeview","ui/gamestab","ui/generictournamenthistoryview","ui/generictournamentview","ui/historytab","ui/hometab","ui/imageview","ui/inlinelistview","ui/inputview","ui/kohistoryview","ui/koline","ui/kolineview","ui/kolistmodel","ui/komatchresultview","ui/kotournamentcontroller","ui/kotournamentview","ui/kotreeposition","ui/kotreeview","ui/legacyloadermodel","ui/legacystoragekeyconverter","ui/lengthview","ui/listcleanuplistener","ui/listclickcontroller","ui/listcollectormodel","ui/listview","ui/loadedimagesview","ui/logincontroller","ui/loginview","ui/matchcontroller","ui/matchresultcontroller","ui/matchresultview","ui/matchtableview","ui/matchview","ui/messagemodel","ui/newtab","ui/newteamcontroller","ui/newteamview","ui/newtournamentcontroller","ui/newtournamentview","ui/noregmodel","ui/optionstemplate","ui/playermodel","ui/popoutboxview","ui/popoutcontroller","ui/preregcloserview","ui/progresslistmodel","ui/progressroundview","ui/progressrowview","ui/progresstableview","ui/rankingcomponentview","ui/rankingordercontroller","ui/rankingorderview","ui/rankingtab","ui/rankingview","ui/registeridscontroller","ui/registerteamscontroller","ui/renamecontroller","ui/requiremodsshortcut","ui/reversematchreferencemodel","ui/reverseresultreferencemodel","ui/roundtournamentview","ui/serverautoloadmodel","ui/servermodel","ui/servertournamentcontroller","ui/servertournamentlistmodel","ui/servertournamentloader","ui/servertournamentmodel","ui/servertournamentview","ui/settingstab","ui/splash","ui/state","ui/stateclassview","ui/statefileloadcontroller","ui/stateloader","ui/statemodel","ui/statesaver","ui/storage","ui/strings","ui/swissmaxroundview","ui/swisstournamentcontroller","ui/swisstournamentview","ui/swissvotepropcontroller","ui/swissvotepropview","ui/swissvotesview","ui/systemlistview","ui/systemtablerowview","ui/tabshandle","ui/teamcontroller","ui/teamdeletecontroller","ui/teamformatdownloadcontroller","ui/teammodel","ui/teamsfileloadcontroller","ui/teamsizecontroller","ui/teamsizeview","ui/teamstab","ui/teamtableview","ui/teamtoastslistener","ui/teamview","ui/templateview","ui/textview","ui/timemachinecommitcontroller","ui/timemachinecommitview","ui/timemachinenewtreecontroller","ui/timemachineview","ui/toast","ui/tournamentcontroller","ui/tournamenthistoryview","ui/tournamentmatchesview","ui/tournamentrankingview","ui/tournamentrenamecontroller","ui/tournamentview","ui/tournamentviewpopulator","ui/unicodehelper","ui/update","ui/valueview"],function(){var e=function(e){var t=require.s.contexts._.defined[e];if(!t)throw new Error("module '"+e+"' is undefined, not loaded or equals 0 in some way => "+t);return t};return e}),function(e){"use strict";function t(e,t){var n,i,r=e.slice();for(n=0;n<r.length;n++)for(i=0;i<t.length;i++)if(r[n]===t[i]){r.splice(n,1),n--;break}return r}function n(e,t){return t.indexOf(e)!==-1}function i(e){var t,n,r=s("array",e)?[]:{};for(t in e)oe.call(e,t)&&(n=e[t],r[t]=n===Object(n)?i(n):n);return r}function r(e,t,n){for(var i in t)oe.call(t,i)&&(void 0===t[i]?delete e[i]:n&&"undefined"!=typeof e[i]||(e[i]=t[i]));return e}function o(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";var t=re.call(e).match(/^\[object\s(.*)\]$/),n=t&&t[1];switch(n){case"Number":return isNaN(e)?"nan":"number";case"String":case"Boolean":case"Array":case"Set":case"Map":case"Date":case"RegExp":case"Function":case"Symbol":return n.toLowerCase();default:return"undefined"==typeof e?"undefined":ee(e)}}function s(e,t){return o(t)===e}function a(e,t){for(var n=e+""+t,i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;var o=(4294967296+i).toString(16);return o.length<8&&(o="0000000"+o),o.slice(-8)}function u(e,t){if("string"!==o(e))throw new TypeError("eventName must be a string when emitting an event");for(var n=he[e],i=n?[].concat(ie(n)):[],r=0;r<i.length;r++)i[r](t)}function l(e,t){if("string"!==o(e))throw new TypeError("eventName must be a string when registering a listener");if(!n(e,pe)){var i=pe.join(", ");throw new Error('"'+e+'" is not a valid event; must be one of: '+i+".")}if("function"!==o(t))throw new TypeError("callback must be a function when registering a listener");he[e]||(he[e]=[]),n(t,he[e])||he[e].push(t)}function c(e){function t(e){var t=function(t){if("function"!==o(t))throw new Error("QUnit logging methods require a callback function as their first parameters.");le.callbacks[e].push(t)};return t}var n,i,r,s=["begin","done","log","testStart","testDone","moduleStart","moduleDone"];for(n=0,i=s.length;n<i;n++)r=s[n],"undefined"===o(le.callbacks[r])&&(le.callbacks[r]=[]),e[r]=t(r)}function d(e,t){var n,i,r;for(r=le.callbacks[e],n=0,i=r.length;n<i;n++)r[n](t)}function h(e,t){t=void 0===t?4:t;var n,i,r;if(e&&e.stack){if(n=e.stack.split("\n"),/^error$/i.test(n[0])&&n.shift(),fe){for(i=[],r=t;r<n.length&&n[r].indexOf(fe)===-1;r++)i.push(n[r]);if(i.length)return i.join("\n")}return n[t]}}function p(e){var t=new Error;if(!t.stack)try{throw t}catch(e){t=e}return h(t,e)}function f(){var e=se();for(le.depth=(le.depth||0)+1;le.queue.length&&!le.blocking;){var t=se()-e;if(!(!ae.setTimeout||le.updateRate<=0||t<le.updateRate)){Y(f,13);break}me>0&&me--,le.queue.shift()()}le.depth--,le.blocking||le.queue.length||0!==le.depth||y()}function m(e){if("array"!==o(e))le.queue.unshift(e),me++;else for(;e.length;)m(e.pop())}function g(e,t,n){if(t)le.queue.splice(me++,0,e);else if(n){ge||(ge=v(n));var i=Math.floor(ge()*(le.queue.length-me+1));le.queue.splice(me+i,0,e)}else le.queue.push(e)}function v(e){var t=parseInt(a(e),16)||-1;return function(){return t^=t<<13,t^=t>>>17,t^=t<<5,t<0&&(t+=4294967296),t/4294967296}}function y(){var e=le.storage;ve.finished=!0;var t=se()-le.started,n=le.stats.all-le.stats.bad;if(u("runEnd",Te.end(!0)),d("done",{passed:n,failed:le.stats.bad,total:le.stats.all,runtime:t}),e&&0===le.stats.bad)for(var i=e.length-1;i>=0;i--){var r=e.key(i);0===r.indexOf("qunit-test-")&&e.removeItem(r)}}function w(e){var t,n;for(++w.count,this.expected=null,this.assertions=[],this.semaphore=0,this.module=le.currentModule,this.stack=p(3),this.steps=[],this.timeout=void 0,this.module.skip?(e.skip=!0,e.todo=!1):this.module.todo&&!e.skip&&(e.todo=!0),r(this,e),this.testReport=new ye(e.testName,this.module.suiteReport,{todo:e.todo,skip:e.skip,valid:this.valid()}),t=0,n=this.module.tests;t<n.length;t++)this.module.tests[t].name===this.testName&&(this.testName+=" ");this.testId=a(this.module.name,this.testName),this.module.tests.push({name:this.testName,testId:this.testId,skip:!!e.skip}),e.skip?(this.callback=function(){},this.async=!1,this.expected=0):this.assert=new ke(this)}function b(e){for(var t=e,n=[];t&&0===t.testsRun;)n.push(t),t=t.parentModule;return n}function k(){if(!le.current)throw new Error("pushFailure() assertion outside test context, in "+p(2));var e=le.current;return e.pushFailure.apply(e,arguments)}function x(){if(le.pollution=[],le.noglobals)for(var t in e)if(oe.call(e,t)){if(/^qunit-test-output/.test(t))continue;le.pollution.push(t)}}function q(){var e,n,i=le.pollution;x(),e=t(le.pollution,i),e.length>0&&k("Introduced global variable(s): "+e.join(", ")),n=t(i,le.pollution),n.length>0&&k("Deleted global variable(s): "+n.join(", "))}function E(e,t){if(!we){var n=new w({testName:e,callback:t});n.queue()}}function T(e,t){if(!we){var n=new w({testName:e,callback:t,todo:!0});n.queue()}}function S(e){if(!we){var t=new w({testName:e,skip:!0});t.queue()}}function N(e,t){if(!we){le.queue.length=0,we=!0;var n=new w({testName:e,callback:t});n.queue()}}function D(e){if(e.semaphore+=1,le.blocking=!0,ae.setTimeout){var t=void 0;"number"==typeof e.timeout?t=e.timeout:"number"==typeof le.testTimeout&&(t=le.testTimeout),"number"==typeof t&&t>0&&(Z(le.timeout),le.timeout=Y(function(){k("Test took longer than "+t+"ms; test timed out.",p(2)),C(e)},t))}var n=!1;return function(){n||(n=!0,e.semaphore-=1,M(e))}}function C(e){e.semaphore=0,M(e)}function M(e){if(isNaN(e.semaphore))return e.semaphore=0,void k("Invalid value on test.semaphore",p(2));if(!(e.semaphore>0))return e.semaphore<0?(e.semaphore=0,void k("Tried to restart test while already started (test's semaphore was 0 already)",p(2))):void(ae.setTimeout?(le.timeout&&Z(le.timeout),le.timeout=Y(function(){e.semaphore>0||(le.timeout&&Z(le.timeout),B())},13)):B())}function L(e){for(var t=[].concat(e.tests),n=[].concat(ie(e.childModules));n.length;){var i=n.shift();t.push.apply(t,i.tests),n.push.apply(n,ie(i.childModules))}return t}function $(e){return L(e).length}function A(e){return L(e).filter(function(e){return!e.skip}).length}function O(e,t){for(e.testsRun++,t||e.unskippedTestsRun++;e=e.parentModule;)e.testsRun++,t||e.unskippedTestsRun++}function R(e){return function(){U&&U[e].apply(U,arguments)}}function I(e){var t=e.toString();if("[object"===t.substring(0,7)){var n=e.name?e.name.toString():"Error",i=e.message?e.message.toString():"";return n&&i?n+": "+i:n?n:i?i:"Error"}return t}function j(e){if(ae.document){if(W.QUnit&&W.QUnit.version)throw new Error("QUnit has already been defined.");W.QUnit=e}"undefined"!=typeof module&&module&&module.exports&&(module.exports=e,module.exports.QUnit=e),"undefined"!=typeof exports&&exports&&(exports.QUnit=e),"function"==typeof define&&define.amd&&(define("qunit",[],function(){return e}),e.config.autostart=!1),K&&K.WorkerGlobalScope&&K instanceof K.WorkerGlobalScope&&(K.QUnit=e)}function z(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(le.current){if(le.current.ignoreGlobalErrors)return!0;k.apply(void 0,[e.message,e.fileName+":"+e.lineNumber].concat(n))}else E("global failure",r(function(){k.apply(void 0,[e.message,e.fileName+":"+e.lineNumber].concat(n))},{validTest:!0}));return!1}function _(e,t,n){var i=Se.length?Se.slice(-1)[0]:null,o=null!==i?[i.name,e].join(" > "):e,s=i?i.suiteReport:Te,u=null!==i&&i.skip||n.skip,l=null!==i&&i.todo||n.todo,c={name:o,parentModule:i,tests:[],moduleId:a(o),testsRun:0,unskippedTestsRun:0,childModules:[],suiteReport:new xe(e,s),skip:u,todo:!u&&l},d={};return i&&(i.childModules.push(c),r(d,i.testEnvironment)),r(d,t),c.testEnvironment=d,le.modules.push(c),c}function P(e,t,n){function i(e,t,n){var i=t[n];e[n]="function"==typeof i?[i]:[],delete t[n]}var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=_(e,t,r),a=s.testEnvironment,u=s.hooks={};i(u,a,"before"),i(u,a,"beforeEach"),i(u,a,"afterEach"),i(u,a,"after");var l={before:H(s,"before"),beforeEach:H(s,"beforeEach"),afterEach:H(s,"afterEach"),after:H(s,"after")},c=le.currentModule;"function"===o(n)&&(Se.push(s),le.currentModule=s,n.call(s.testEnvironment,l),Se.pop(),s=s.parentModule||c),le.currentModule=s}function V(e,t,n){qe||(2===arguments.length&&"function"===o(t)&&(n=t,t=void 0),P(e,t,n))}function F(){De=!0,ae.setTimeout?Y(function(){B()},13):B()}function B(){var e,t,n=[];if(!le.started){for(le.started=se(),""===le.modules[0].name&&0===le.modules[0].tests.length&&le.modules.shift(),e=0,t=le.modules.length;e<t;e++)n.push({name:le.modules[e].name,tests:le.modules[e].tests});u("runStart",Te.start(!0)),d("begin",{totalTests:w.count,modules:n})}le.blocking=!1,ve.advance()}function H(e,t){return function(n){e.hooks[t].push(n)}}function G(e){return e?(e+="",e.replace(/['"<>&]/g,function(e){switch(e){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}})):""}e=e&&"default"in e?e.default:e;var W=e.window,K=e.self,U=e.console,Y=e.setTimeout,Z=e.clearTimeout,J=W&&W.document,Q=W&&W.navigator,X=function(){var t="qunit-test-string";try{return e.sessionStorage.setItem(t,t),e.sessionStorage.removeItem(t),e.sessionStorage}catch(e){return}}(),ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ie=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},re=Object.prototype.toString,oe=Object.prototype.hasOwnProperty,se=Date.now||function(){return(new Date).getTime()},ae={document:W&&void 0!==W.document,setTimeout:void 0!==Y},ue=function(){function e(e,t){return"object"===("undefined"==typeof e?"undefined":ee(e))&&(e=e.valueOf()),"object"===("undefined"==typeof t?"undefined":ee(t))&&(t=t.valueOf()),e===t}function t(e,t){var n=l(e),i=l(t);return e.constructor===t.constructor||(n&&null===n.constructor&&(n=null),i&&null===i.constructor&&(i=null),null===n&&i===Object.prototype||null===i&&n===Object.prototype)}function n(e){return"flags"in e?e.flags:e.toString().match(/[gimuy]*$/)[0]}function i(e){return["object","array","map","set"].indexOf(o(e))!==-1}function r(e,t){return e===t||(i(e)?(u.every(function(n){return n.a!==e||n.b!==t})&&u.push({a:e,b:t}),!0):s(e,t))}function s(e,t){var n=o(e);return o(t)===n&&c[n](e,t)}function a(e,t){var n,i;if(arguments.length<2)return!0;for(u=[{a:e,b:t}],n=0;n<u.length;n++)if(i=u[n],i.a!==i.b&&!s(i.a,i.b))return!1;return 2===arguments.length||a.apply(this,[].slice.call(arguments,1))}var u=[],l=Object.getPrototypeOf||function(e){return e.__proto__},c={string:e,boolean:e,number:e,null:e,undefined:e,symbol:e,date:e,nan:function(){return!0},regexp:function(e,t){return e.source===t.source&&n(e)===n(t)},function:function(){return!1},array:function(e,t){var n,i;if(i=e.length,i!==t.length)return!1;for(n=0;n<i;n++)if(!r(e[n],t[n]))return!1;return!0},set:function(e,t){var n,i=!0;return e.size===t.size&&(e.forEach(function(e){i&&(n=!1,t.forEach(function(t){var i;n||(i=u,a(t,e)&&(n=!0),u=i)}),n||(i=!1))}),i)},map:function(e,t){
var n,i=!0;return e.size===t.size&&(e.forEach(function(e,r){i&&(n=!1,t.forEach(function(t,i){var o;n||(o=u,a([t,i],[e,r])&&(n=!0),u=o)}),n||(i=!1))}),i)},object:function(e,n){var i,o=[],a=[];if(t(e,n)===!1)return!1;for(i in e)if(o.push(i),(e.constructor===Object||"undefined"==typeof e.constructor||"function"!=typeof e[i]||"function"!=typeof n[i]||e[i].toString()!==n[i].toString())&&!r(e[i],n[i]))return!1;for(i in n)a.push(i);return s(o.sort(),a.sort())}};return function(){var e=a.apply(void 0,arguments);return u.length=0,e}}(),le={queue:[],blocking:!0,reorder:!0,altertitle:!0,collapse:!0,scrolltop:!0,maxDepth:5,requireExpects:!1,urlConfig:[],modules:[],currentModule:{name:"",tests:[],childModules:[],testsRun:0,unskippedTestsRun:0,hooks:{before:[],beforeEach:[],afterEach:[],after:[]}},callbacks:{},storage:X},ce=W&&W.QUnit&&W.QUnit.config;W&&W.QUnit&&!W.QUnit.version&&r(le,ce),le.modules.push(le.currentModule);var de=function(){function e(e){return'"'+e.toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function t(e){return e+""}function i(e,t,n){var i=u.separator(),r=u.indent(),o=u.indent(1);return t.join&&(t=t.join(","+i+o)),t?[e,o+t,r+n].join(i):e+n}function r(e,t){var n=e.length,r=new Array(n);if(u.maxDepth&&u.depth>u.maxDepth)return"[object Array]";for(this.up();n--;)r[n]=this.parse(e[n],void 0,t);return this.down(),i("[",r,"]")}function o(e){return"[object Array]"===re.call(e)||"number"==typeof e.length&&void 0!==e.item&&(e.length?e.item(0)===e[0]:null===e.item(0)&&void 0===e[0])}var a=/^function (\w+)/,u={parse:function(e,t,n){n=n||[];var i,r,o,s=n.indexOf(e);return s!==-1?"recursion("+(s-n.length)+")":(t=t||this.typeOf(e),r=this.parsers[t],o="undefined"==typeof r?"undefined":ee(r),"function"===o?(n.push(e),i=r.call(this,e,n),n.pop(),i):"string"===o?r:this.parsers.error)},typeOf:function(e){var t;return t=null===e?"null":"undefined"==typeof e?"undefined":s("regexp",e)?"regexp":s("date",e)?"date":s("function",e)?"function":void 0!==e.setInterval&&void 0!==e.document&&void 0===e.nodeType?"window":9===e.nodeType?"document":e.nodeType?"node":o(e)?"array":e.constructor===Error.prototype.constructor?"error":"undefined"==typeof e?"undefined":ee(e)},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&#160;":" "},indent:function(e){if(!this.multiline)return"";var t=this.indentChar;return this.HTML&&(t=t.replace(/\t/g,"   ").replace(/ /g,"&#160;")),new Array(this.depth+(e||0)).join(t)},up:function(e){this.depth+=e||1},down:function(e){this.depth-=e||1},setParser:function(e,t){this.parsers[e]=t},quote:e,literal:t,join:i,depth:1,maxDepth:le.maxDepth,parsers:{window:"[Window]",document:"[Document]",error:function(e){return'Error("'+e.message+'")'},unknown:"[Unknown]",null:"null",undefined:"undefined",function:function(e){var t="function",n="name"in e?e.name:(a.exec(e)||[])[1];return n&&(t+=" "+n),t+="(",t=[t,u.parse(e,"functionArgs"),"){"].join(""),i(t,u.parse(e,"functionCode"),"}")},array:r,nodelist:r,arguments:r,object:function(e,t){var r,o,s,a,l,c=[];if(u.maxDepth&&u.depth>u.maxDepth)return"[object Object]";u.up(),r=[];for(o in e)r.push(o);l=["message","name"];for(a in l)o=l[a],o in e&&!n(o,r)&&r.push(o);for(r.sort(),a=0;a<r.length;a++)o=r[a],s=e[o],c.push(u.parse(o,"key")+": "+u.parse(s,void 0,t));return u.down(),i("{",c,"}")},node:function(e){var t,n,i,r=u.HTML?"&lt;":"<",o=u.HTML?"&gt;":">",s=e.nodeName.toLowerCase(),a=r+s,l=e.attributes;if(l)for(n=0,t=l.length;n<t;n++)i=l[n].nodeValue,i&&"inherit"!==i&&(a+=" "+l[n].nodeName+"="+u.parse(i,"attribute"));return a+=o,3!==e.nodeType&&4!==e.nodeType||(a+=e.nodeValue),a+r+"/"+s+o},functionArgs:function(e){var t,n=e.length;if(!n)return"";for(t=new Array(n);n--;)t[n]=String.fromCharCode(97+n);return" "+t.join(", ")+" "},key:e,functionCode:"[code]",attribute:e,string:e,date:e,regexp:t,number:t,boolean:t,symbol:function(e){return e.toString()}},HTML:!1,indentChar:"  ",multiline:!0};return u}(),he=Object.create(null),pe=["runStart","suiteStart","testStart","assertion","testEnd","suiteEnd","runEnd"],fe=(p(0)||"").replace(/(:\d+)+\)?/,"").replace(/.+\//,""),me=0,ge=void 0,ve={finished:!1,add:g,addImmediate:m,advance:f},ye=function(){function e(t,n,i){te(this,e),this.name=t,this.suiteName=n.name,this.fullName=n.fullName.concat(t),this.runtime=0,this.assertions=[],this.skipped=!!i.skip,this.todo=!!i.todo,this.valid=i.valid,this._startTime=0,this._endTime=0,n.pushTest(this)}return ne(e,[{key:"start",value:function(e){return e&&(this._startTime=Date.now()),{name:this.name,suiteName:this.suiteName,fullName:this.fullName.slice()}}},{key:"end",value:function(e){return e&&(this._endTime=Date.now()),r(this.start(),{runtime:this.getRuntime(),status:this.getStatus(),errors:this.getFailedAssertions(),assertions:this.getAssertions()})}},{key:"pushAssertion",value:function(e){this.assertions.push(e)}},{key:"getRuntime",value:function(){return this._endTime-this._startTime}},{key:"getStatus",value:function(){if(this.skipped)return"skipped";var e=this.getFailedAssertions().length>0?this.todo:!this.todo;return e?this.todo?"todo":"passed":"failed"}},{key:"getFailedAssertions",value:function(){return this.assertions.filter(function(e){return!e.passed})}},{key:"getAssertions",value:function(){return this.assertions.slice()}},{key:"slimAssertions",value:function(){this.assertions=this.assertions.map(function(e){return delete e.actual,delete e.expected,e})}}]),e}(),we=!1;w.count=0,w.prototype={before:function(){var e,t,n=this.module,i=b(n);for(e=i.length-1;e>=0;e--)t=i[e],t.stats={all:0,bad:0,started:se()},u("suiteStart",t.suiteReport.start(!0)),d("moduleStart",{name:t.name,tests:t.tests});le.current=this,this.testEnvironment=r({},n.testEnvironment),this.started=se(),u("testStart",this.testReport.start(!0)),d("testStart",{name:this.testName,module:n.name,testId:this.testId,previousFailure:this.previousFailure}),le.pollution||x()},run:function(){function e(e){t=e.callback.call(e.testEnvironment,e.assert),e.resolvePromise(t),0===e.timeout&&0!==e.semaphore&&k("Test did not finish synchronously even though assert.timeout( 0 ) was used.",p(2))}var t;if(le.current=this,this.callbackStarted=se(),le.notrycatch)return void e(this);try{e(this)}catch(e){this.pushFailure("Died on test #"+(this.assertions.length+1)+" "+this.stack+": "+(e.message||e),h(e,0)),x(),le.blocking&&C(this)}},after:function(){q()},queueHook:function(e,t,n){var i=this,r=function(){var n=e.call(i.testEnvironment,i.assert);i.resolvePromise(n,t)},o=function(){if("before"===t){if(0!==n.unskippedTestsRun)return;i.preserveEnvironment=!0}if(!("after"===t&&n.unskippedTestsRun!==A(n)-1&&le.queue.length>2)){if(le.current=i,le.notrycatch)return void r();try{r()}catch(e){i.pushFailure(t+" failed on "+i.testName+": "+(e.message||e),h(e,0))}}};return o},hooks:function e(t){function n(i,r){if(r.parentModule&&n(i,r.parentModule),r.hooks[t].length)for(var o=0;o<r.hooks[t].length;o++)e.push(i.queueHook(r.hooks[t][o],t,r))}var e=[];return this.skip||n(this,this.module),e},finish:function(){function e(e){u("suiteEnd",e.suiteReport.end(!0)),d("moduleDone",{name:e.name,tests:e.tests,failed:e.stats.bad,passed:e.stats.all-e.stats.bad,total:e.stats.all,runtime:se()-e.stats.started})}le.current=this,le.requireExpects&&null===this.expected?this.pushFailure("Expected number of assertions to be defined, but expect() was not called.",this.stack):null!==this.expected&&this.expected!==this.assertions.length?this.pushFailure("Expected "+this.expected+" assertions, but "+this.assertions.length+" were run",this.stack):null!==this.expected||this.assertions.length||this.pushFailure("Expected at least one assertion, but none were run - call expect(0) to accept zero assertions.",this.stack);var t,n=this.module,i=n.name,r=this.testName,o=!!this.skip,s=!!this.todo,a=0,l=le.storage;for(this.runtime=se()-this.started,le.stats.all+=this.assertions.length,n.stats.all+=this.assertions.length,t=0;t<this.assertions.length;t++)this.assertions[t].result||(a++,le.stats.bad++,n.stats.bad++);if(O(n,o),l&&(a?l.setItem("qunit-test-"+i+"-"+r,a):l.removeItem("qunit-test-"+i+"-"+r)),u("testEnd",this.testReport.end(!0)),this.testReport.slimAssertions(),d("testDone",{name:r,module:i,skipped:o,todo:s,failed:a,passed:this.assertions.length-a,total:this.assertions.length,runtime:o?0:this.runtime,assertions:this.assertions,testId:this.testId,source:this.stack}),n.testsRun===$(n)){e(n);for(var c=n.parentModule;c&&c.testsRun===$(c);)e(c),c=c.parentModule}le.current=void 0},preserveTestEnvironment:function(){this.preserveEnvironment&&(this.module.testEnvironment=this.testEnvironment,this.testEnvironment=r({},this.module.testEnvironment))},queue:function(){function e(){ve.addImmediate([function(){t.before()},t.hooks("before"),function(){t.preserveTestEnvironment()},t.hooks("beforeEach"),function(){t.run()},t.hooks("afterEach").reverse(),t.hooks("after").reverse(),function(){t.after()},function(){t.finish()}])}var t=this;if(this.valid()){var n=le.storage&&+le.storage.getItem("qunit-test-"+this.module.name+"-"+this.testName),i=le.reorder&&!!n;this.previousFailure=!!n,ve.add(e,i,le.seed),ve.finished&&ve.advance()}},pushResult:function(e){if(this!==le.current)throw new Error("Assertion occured after test had finished.");var t,n={module:this.module.name,name:this.testName,result:e.result,message:e.message,actual:e.actual,expected:e.expected,testId:this.testId,negative:e.negative||!1,runtime:se()-this.started,todo:!!this.todo};e.result||(t=e.source||p(),t&&(n.source=t)),this.logAssertion(n),this.assertions.push({result:!!e.result,message:e.message})},pushFailure:function(e,t,n){if(!(this instanceof w))throw new Error("pushFailure() assertion outside test context, was "+p(2));this.pushResult({result:!1,message:e||"error",actual:n||null,expected:null,source:t})},logAssertion:function(e){d("log",e);var t={passed:e.result,actual:e.actual,expected:e.expected,message:e.message,stack:e.source,todo:e.todo};this.testReport.pushAssertion(t),u("assertion",t)},resolvePromise:function(e,t){var n,i,r,s=this;null!=e&&(n=e.then,"function"===o(n)&&(i=D(s),n.call(e,function(){i()},function(e){r="Promise rejected "+(t?t.replace(/Each$/,""):"during")+' "'+s.testName+'": '+(e&&e.message||e),s.pushFailure(r,h(e,0)),x(),i()})))},valid:function(){function e(t){var n=t.name?t.name.toLowerCase():null;return n===o||!!t.parentModule&&e(t.parentModule)}function t(e){return n(e.moduleId,le.moduleId)||e.parentModule&&t(e.parentModule)}var i=le.filter,r=/^(!?)\/([\w\W]*)\/(i?$)/.exec(i),o=le.module&&le.module.toLowerCase(),s=this.module.name+": "+this.testName;return!(!this.callback||!this.callback.validTest)||!(le.moduleId&&le.moduleId.length>0&&!t(this.module))&&(!(le.testId&&le.testId.length>0&&!n(this.testId,le.testId))&&(!(o&&!e(this.module))&&(!i||(r?this.regexFilter(!!r[1],r[2],r[3],s):this.stringFilter(i,s)))))},regexFilter:function(e,t,n,i){var r=new RegExp(t,n),o=r.test(i);return o!==e},stringFilter:function(e,t){e=e.toLowerCase(),t=t.toLowerCase();var n="!"!==e.charAt(0);return n||(e=e.slice(1)),t.indexOf(e)!==-1?n:!n}};var be={warn:R("warn")},ke=function(){function e(t){te(this,e),this.test=t}return ne(e,[{key:"timeout",value:function(e){if("number"!=typeof e)throw new Error("You must pass a number as the duration to assert.timeout");this.test.timeout=e}},{key:"step",value:function(e){var t=!!e;return this.test.steps.push(e),this.pushResult({result:t,message:e||"You must provide a message to assert.step"})}},{key:"verifySteps",value:function(e,t){this.deepEqual(this.test.steps,e,t)}},{key:"expect",value:function(e){return 1!==arguments.length?this.test.expected:void(this.test.expected=e)}},{key:"async",value:function(e){var t=this.test,n=!1,i=e;"undefined"==typeof i&&(i=1);var r=D(t);return function(){if(le.current!==t)throw Error("assert.async callback called after test finished.");return n?void t.pushFailure("Too many calls to the `assert.async` callback",p(2)):(i-=1,void(i>0||(n=!0,r())))}}},{key:"push",value:function(t,n,i,r,o){be.warn("assert.push is deprecated and will be removed in QUnit 3.0. Please use assert.pushResult instead (https://api.qunitjs.com/assert/pushResult).");var s=this instanceof e?this:le.current.assert;return s.pushResult({result:t,actual:n,expected:i,message:r,negative:o})}},{key:"pushResult",value:function(t){var n=this,i=n instanceof e&&n.test||le.current;if(!i)throw new Error("assertion outside test context, in "+p(2));return n instanceof e||(n=i.assert),n.test.pushResult(t)}},{key:"ok",value:function(e,t){t||(t=e?"okay":"failed, expected argument to be truthy, was: "+de.parse(e)),this.pushResult({result:!!e,actual:e,expected:!0,message:t})}},{key:"notOk",value:function(e,t){t||(t=e?"failed, expected argument to be falsy, was: "+de.parse(e):"okay"),this.pushResult({result:!e,actual:e,expected:!1,message:t})}},{key:"equal",value:function(e,t,n){var i=t==e;this.pushResult({result:i,actual:e,expected:t,message:n})}},{key:"notEqual",value:function(e,t,n){var i=t!=e;this.pushResult({result:i,actual:e,expected:t,message:n,negative:!0})}},{key:"propEqual",value:function(e,t,n){e=i(e),t=i(t),this.pushResult({result:ue(e,t),actual:e,expected:t,message:n})}},{key:"notPropEqual",value:function(e,t,n){e=i(e),t=i(t),this.pushResult({result:!ue(e,t),actual:e,expected:t,message:n,negative:!0})}},{key:"deepEqual",value:function(e,t,n){this.pushResult({result:ue(e,t),actual:e,expected:t,message:n})}},{key:"notDeepEqual",value:function(e,t,n){this.pushResult({result:!ue(e,t),actual:e,expected:t,message:n,negative:!0})}},{key:"strictEqual",value:function(e,t,n){this.pushResult({result:t===e,actual:e,expected:t,message:n})}},{key:"notStrictEqual",value:function(e,t,n){this.pushResult({result:t!==e,actual:e,expected:t,message:n,negative:!0})}},{key:"throws",value:function(t,n,i){var r=void 0,s=!1,a=this instanceof e&&this.test||le.current;if("string"===o(n)){if(null!=i)throw new Error("throws/raises does not accept a string value for the expected argument.\nUse a non-string object value (e.g. regExp) instead if it's necessary.");i=n,n=null}a.ignoreGlobalErrors=!0;try{t.call(a.testEnvironment)}catch(e){r=e}if(a.ignoreGlobalErrors=!1,r){var u=o(n);n?"regexp"===u?s=n.test(I(r)):"function"===u&&r instanceof n?s=!0:"object"===u?s=r instanceof n.constructor&&r.name===n.name&&r.message===n.message:"function"===u&&n.call({},r)===!0&&(n=null,s=!0):(s=!0,n=null)}a.assert.pushResult({result:s,actual:r,expected:n,message:i})}}]),e}();ke.prototype.raises=ke.prototype.throws;var xe=function(){function e(t,n){te(this,e),this.name=t,this.fullName=n?n.fullName.concat(t):[],this.tests=[],this.childSuites=[],n&&n.pushChildSuite(this)}return ne(e,[{key:"start",value:function(e){return e&&(this._startTime=Date.now()),{name:this.name,fullName:this.fullName.slice(),tests:this.tests.map(function(e){return e.start()}),childSuites:this.childSuites.map(function(e){return e.start()}),testCounts:{total:this.getTestCounts().total}}}},{key:"end",value:function(e){return e&&(this._endTime=Date.now()),{name:this.name,fullName:this.fullName.slice(),tests:this.tests.map(function(e){return e.end()}),childSuites:this.childSuites.map(function(e){return e.end()}),testCounts:this.getTestCounts(),runtime:this.getRuntime(),status:this.getStatus()}}},{key:"pushChildSuite",value:function(e){this.childSuites.push(e)}},{key:"pushTest",value:function(e){this.tests.push(e)}},{key:"getRuntime",value:function(){return this._endTime-this._startTime}},{key:"getTestCounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{passed:0,failed:0,skipped:0,todo:0,total:0};return e=this.tests.reduce(function(e,t){return t.valid&&(e[t.getStatus()]++,e.total++),e},e),this.childSuites.reduce(function(e,t){return t.getTestCounts(e)},e)}},{key:"getStatus",value:function(){var e=this.getTestCounts(),t=e.total,n=e.failed,i=e.skipped,r=e.todo;return n?"failed":i===t?"skipped":r===t?"todo":"passed"}}]),e}(),qe=!1,Ee={},Te=new xe;le.currentModule.suiteReport=Te;var Se=[],Ne=!1,De=!1;Ee.isLocal=!(ae.document&&"file:"!==W.location.protocol),Ee.version="2.4.0",V.only=function(){qe||(le.modules.length=0,le.queue.length=0,V.apply(void 0,arguments),qe=!0)},V.skip=function(e,t,n){qe||(2===arguments.length&&"function"===o(t)&&(n=t,t=void 0),P(e,t,n,{skip:!0}))},V.todo=function(e,t,n){qe||(2===arguments.length&&"function"===o(t)&&(n=t,t=void 0),P(e,t,n,{todo:!0}))},r(Ee,{on:l,module:V,test:E,todo:T,skip:S,only:N,start:function(e){var t=Ne;if(le.current)throw new Error("QUnit.start cannot be called inside a test context.");if(Ne=!0,De)throw new Error("Called start() while test already started running");if(t||e>1)throw new Error("Called start() outside of a test context too many times");if(le.autostart)throw new Error("Called start() outside of a test context when QUnit.config.autostart was true");return le.pageLoaded?void F():(le.autostart=!0,void(ae.document||Ee.load()))},config:le,is:s,objectType:o,extend:r,load:function(){le.pageLoaded=!0,r(le,{stats:{all:0,bad:0},started:0,updateRate:1e3,autostart:!0,filter:""},!0),De||(le.blocking=!1,le.autostart&&F())},stack:function(e){return e=(e||0)+2,p(e)},onError:z}),Ee.pushFailure=k,Ee.assert=ke.prototype,Ee.equiv=ue,Ee.dump=de,c(Ee),j(Ee),function(){function e(){if(!i.call(n,"fixture")){var e=J.getElementById("qunit-fixture");e&&(n.fixture=e.innerHTML)}}function t(){if(null!=n.fixture){var e=J.getElementById("qunit-fixture");e&&(e.innerHTML=n.fixture)}}if("undefined"!=typeof W&&"undefined"!=typeof J){var n=Ee.config,i=Object.prototype.hasOwnProperty;Ee.begin(e),Ee.testStart(t)}}(),function(){function e(){var e,i,r,o,s=Object.create(null),a=n.search.slice(1).split("&"),u=a.length;for(e=0;e<u;e++)a[e]&&(i=a[e].split("="),r=t(i[0]),o=1===i.length||t(i.slice(1).join("=")),r in s?s[r]=[].concat(s[r],o):s[r]=o);return s}function t(e){return decodeURIComponent(e.replace(/\+/g,"%20"))}var n="undefined"!=typeof W&&W.location;if(n){var i=e();Ee.urlParams=i,Ee.config.moduleId=[].concat(i.moduleId||[]),Ee.config.testId=[].concat(i.testId||[]),Ee.config.module=i.module,Ee.config.filter=i.filter,i.seed===!0?Ee.config.seed=Math.random().toString(36).slice(2):i.seed&&(Ee.config.seed=i.seed),Ee.config.urlConfig.push({id:"hidepassed",label:"Hide passed tests",tooltip:"Only show tests and assertions that fail. Stored as query-strings."},{id:"noglobals",label:"Check for Globals",tooltip:"Enabling this will test if any test introduces new properties on the global object (`window` in Browsers). Stored as query-strings."},{id:"notrycatch",label:"No try-catch",tooltip:"Enabling this will run tests outside of a try-catch block. Makes debugging exceptions in IE reasonable. Stored as query-strings."}),Ee.begin(function(){var e,t,n=Ee.config.urlConfig;for(e=0;e<n.length;e++)t=Ee.config.urlConfig[e],"string"!=typeof t&&(t=t.id),void 0===Ee.config[t]&&(Ee.config[t]=i[t])})}}();var Ce={passedTests:0,failedTests:0,skippedTests:0,todoTests:0};!function(){function e(e,t,n){e.addEventListener(t,n,!1)}function t(e,t,n){e.removeEventListener(t,n,!1)}function n(t,n,i){for(var r=t.length;r--;)e(t[r],n,i)}function i(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}function r(e,t){i(e,t)||(e.className+=(e.className?" ":"")+t)}function o(e,t,n){n||"undefined"==typeof n&&!i(e,t)?r(e,t):s(e,t)}function s(e,t){for(var n=" "+e.className+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function a(e){return L.getElementById&&L.getElementById(e)}function u(){var e=a("qunit-abort-tests-button");return e&&(e.disabled=!0,e.innerHTML="Aborting..."),Ee.config.queue.length=0,!1}function l(e){return p(),e&&e.preventDefault&&e.preventDefault(),!1}function c(){var e,t,n,i,r,o=!1,s=M.urlConfig,a="";for(e=0;e<s.length;e++)if(n=M.urlConfig[e],"string"==typeof n&&(n={id:n,label:n}),i=G(n.id),r=G(n.tooltip),n.value&&"string"!=typeof n.value){if(a+="<label for='qunit-urlconfig-"+i+"' title='"+r+"'>"+n.label+": </label><select id='qunit-urlconfig-"+i+"' name='"+i+"' title='"+r+"'><option></option>",Ee.is("array",n.value))for(t=0;t<n.value.length;t++)i=G(n.value[t]),a+="<option value='"+i+"'"+(M[n.id]===n.value[t]?(o=!0)&&" selected='selected'":"")+">"+i+"</option>";else for(t in n.value)A.call(n.value,t)&&(a+="<option value='"+G(t)+"'"+(M[n.id]===t?(o=!0)&&" selected='selected'":"")+">"+G(n.value[t])+"</option>");M[n.id]&&!o&&(i=G(M[n.id]),a+="<option value='"+i+"' selected='selected' disabled='disabled'>"+i+"</option>"),a+="</select>"}else a+="<label for='qunit-urlconfig-"+i+"' title='"+r+"'><input id='qunit-urlconfig-"+i+"' name='"+i+"' type='checkbox'"+(n.value?" value='"+G(n.value)+"'":"")+(M[n.id]?" checked='checked'":"")+" title='"+r+"' />"+G(n.label)+"</label>";return a}function d(){var e,t,n,i=this,r={};t="selectedIndex"in i?i.options[i.selectedIndex].value||void 0:i.checked?i.defaultValue||!0:void 0,r[i.name]=t,e=h(r),"hidepassed"===i.name&&"replaceState"in W.history?(Ee.urlParams[i.name]=t,M[i.name]=t||!1,n=a("qunit-tests"),n&&o(n,"hidepass",t||!1),W.history.replaceState(null,"",e)):W.location=e}function h(e){var t,n,i,r="?",o=W.location;e=Ee.extend(Ee.extend({},Ee.urlParams),e);for(t in e)if(A.call(e,t)&&void 0!==e[t])for(n=[].concat(e[t]),i=0;i<n.length;i++)r+=encodeURIComponent(t),n[i]!==!0&&(r+="="+encodeURIComponent(n[i])),r+="&";return o.protocol+"//"+o.host+o.pathname+r.slice(0,-1)}function p(){var e,t=[],n=a("qunit-modulefilter-dropdown-list").getElementsByTagName("input"),i=a("qunit-filter-input").value;for(e=0;e<n.length;e++)n[e].checked&&t.push(n[e].value);W.location=h({filter:""===i?void 0:i,moduleId:0===t.length?void 0:t,module:void 0,testId:void 0})}function f(){var e=L.createElement("span");return e.innerHTML=c(),r(e,"qunit-url-config"),n(e.getElementsByTagName("input"),"change",d),n(e.getElementsByTagName("select"),"change",d),e}function m(){var t=L.createElement("button");return t.id="qunit-abort-tests-button",t.innerHTML="Abort",e(t,"click",u),t}function g(){var t=L.createElement("form"),n=L.createElement("label"),i=L.createElement("input"),o=L.createElement("button");return r(t,"qunit-filter"),n.innerHTML="Filter: ",i.type="text",i.value=M.filter||"",i.name="filter",i.id="qunit-filter-input",o.innerHTML="Go",n.appendChild(i),t.appendChild(n),t.appendChild(L.createTextNode(" ")),t.appendChild(o),e(t,"submit",l),t}function v(){var e,t,n="";for(e=0;e<M.modules.length;e++)""!==M.modules[e].name&&(t=M.moduleId.indexOf(M.modules[e].moduleId)>-1,n+="<li><label class='clickable"+(t?" checked":"")+"'><input type='checkbox' value='"+M.modules[e].moduleId+"'"+(t?" checked='checked'":"")+" />"+G(M.modules[e].name)+"</label></li>");return n}function y(){function n(){function n(e){var r=d.contains(e.target);27!==e.keyCode&&r||(27===e.keyCode&&r&&f.focus(),m.style.display="none",t(L,"click",n),t(L,"keydown",n),f.value="",i())}"none"===m.style.display&&(m.style.display="block",e(L,"click",n),e(L,"keydown",n))}function i(){var e,t,n=f.value.toLowerCase(),i=y.children;for(e=0;e<i.length;e++)t=i[e],!n||t.textContent.toLowerCase().indexOf(n)>-1?t.style.display="":t.style.display="none"}function r(e){var t,n,i=e&&e.target||a,r=y.getElementsByTagName("input"),l=[];for(o(i.parentNode,"checked",i.checked),w=!1,i.checked&&i!==a&&(a.checked=!1,s(a.parentNode,"checked")),t=0;t<r.length;t++)n=r[t],e?i===a&&i.checked&&(n.checked=!1,s(n.parentNode,"checked")):o(n.parentNode,"checked",n.checked),w=w||n.checked!==n.defaultChecked,n.checked&&l.push(n.parentNode.textContent);u.style.display=c.style.display=w?"":"none",f.placeholder=l.join(", ")||a.parentNode.textContent,f.title="Type to filter list. Current selection:\n"+(l.join("\n")||a.parentNode.textContent)}var a,u,c,d=L.createElement("form"),h=L.createElement("label"),f=L.createElement("input"),m=L.createElement("div"),g=L.createElement("span"),y=L.createElement("ul"),w=!1;return f.id="qunit-modulefilter-search",e(f,"input",i),e(f,"input",n),e(f,"focus",n),e(f,"click",n),h.id="qunit-modulefilter-search-container",h.innerHTML="Module: ",h.appendChild(f),g.id="qunit-modulefilter-actions",g.innerHTML="<button style='display:none'>Apply</button><button type='reset' style='display:none'>Reset</button><label class='clickable"+(M.moduleId.length?"":" checked")+"'><input type='checkbox'"+(M.moduleId.length?"":" checked='checked'")+">All modules</label>",a=g.lastChild.firstChild,u=g.firstChild,c=u.nextSibling,e(u,"click",p),y.id="qunit-modulefilter-dropdown-list",y.innerHTML=v(),m.id="qunit-modulefilter-dropdown",m.style.display="none",m.appendChild(g),m.appendChild(y),e(m,"change",r),r(),d.id="qunit-modulefilter",d.appendChild(h),d.appendChild(m),e(d,"submit",l),e(d,"reset",function(){W.setTimeout(r)}),d}function w(){var e=a("qunit-testrunner-toolbar");e&&(e.appendChild(f()),e.appendChild(y()),e.appendChild(g()),e.appendChild(L.createElement("div")).className="clearfix")}function b(){var e=a("qunit-header");e&&(e.innerHTML="<a href='"+G(O)+"'>"+e.innerHTML+"</a> ")}function k(){var e=a("qunit-banner");e&&(e.className="")}function x(){var e,t=a("qunit-tests"),n=a("qunit-testresult");n&&n.parentNode.removeChild(n),t&&(t.innerHTML="",n=L.createElement("p"),n.id="qunit-testresult",n.className="result",t.parentNode.insertBefore(n,t),n.innerHTML='<div id="qunit-testresult-display">Running...<br />&#160;</div><div id="qunit-testresult-controls"></div><div class="clearfix"></div>',e=a("qunit-testresult-controls")),e&&e.appendChild(m())}function q(){var e=Ee.config.testId;return!e||e.length<=0?"":"<div id='qunit-filteredTest'>Rerunning selected tests: "+G(e.join(", "))+" <a id='qunit-clearFilter' href='"+G(O)+"'>Run all tests</a></div>"}function E(){var e=a("qunit-userAgent");e&&(e.innerHTML="",e.appendChild(L.createTextNode("QUnit "+Ee.version+"; "+Q.userAgent)))}function T(){var e=a("qunit");e&&(e.innerHTML="<h1 id='qunit-header'>"+G(L.title)+"</h1><h2 id='qunit-banner'></h2><div id='qunit-testrunner-toolbar'></div>"+q()+"<h2 id='qunit-userAgent'></h2><ol id='qunit-tests'></ol>"),b(),k(),x(),E(),w()}function S(e){var t,n,i,r,o,s;for(t=0,n=e.length;t<n;t++)for(s=e[t],i=0,r=s.tests.length;i<r;i++)o=s.tests[i],N(o.name,o.testId,s.name)}function N(e,t,n){var i,r,o,s,u=a("qunit-tests");u&&(i=L.createElement("strong"),i.innerHTML=D(e,n),r=L.createElement("a"),r.innerHTML="Rerun",r.href=h({testId:t}),o=L.createElement("li"),o.appendChild(i),o.appendChild(r),o.id="qunit-test-output-"+t,s=L.createElement("ol"),s.className="qunit-assert-list",o.appendChild(s),u.appendChild(o))}function D(e,t){var n="";return t&&(n="<span class='module-name'>"+G(t)+"</span>: "),n+="<span class='test-name'>"+G(e)+"</span>"}function C(e){return e.replace(/<\/?[^>]+(>|$)/g,"").replace(/\&quot;/g,"").replace(/\s+/g,"")}if("undefined"!=typeof W&&W.document){var M=Ee.config,L=W.document,$=!1,A=Object.prototype.hasOwnProperty,O=h({filter:void 0,module:void 0,moduleId:void 0,testId:void 0}),R=[];Ee.begin(function(e){var t,n,i;for(t=0;t<e.modules.length;t++)n=e.modules[t],n.name&&R.push(n.name);R.sort(function(e,t){return e.localeCompare(t)}),T(),S(e.modules),i=a("qunit-tests"),i&&M.hidepassed&&r(i,"hidepass")}),Ee.done(function(e){var t,n,i,r=a("qunit-banner"),o=a("qunit-tests"),s=a("qunit-abort-tests-button"),u=Ce.passedTests+Ce.skippedTests+Ce.todoTests+Ce.failedTests,l=[u," tests completed in ",e.runtime," milliseconds, with ",Ce.failedTests," failed, ",Ce.skippedTests," skipped, and ",Ce.todoTests," todo.<br />","<span class='passed'>",e.passed,"</span> assertions of <span class='total'>",e.total,"</span> passed, <span class='failed'>",e.failed,"</span> failed."].join("");if(s&&s.disabled){l="Tests aborted after "+e.runtime+" milliseconds.";for(var c=0;c<o.children.length;c++)t=o.children[c],""!==t.className&&"running"!==t.className||(t.className="aborted",i=t.getElementsByTagName("ol")[0],n=L.createElement("li"),n.className="fail",n.innerHTML="Test aborted.",i.appendChild(n))}!r||s&&s.disabled!==!1||(r.className=Ce.failedTests?"qunit-fail":"qunit-pass"),s&&s.parentNode.removeChild(s),o&&(a("qunit-testresult-display").innerHTML=l),M.altertitle&&L.title&&(L.title=[Ce.failedTests?"✖":"✔",L.title.replace(/^[\u2714\u2716] /i,"")].join(" ")),M.scrolltop&&W.scrollTo&&W.scrollTo(0,0)}),Ee.testStart(function(e){var t,n,i;n=a("qunit-test-output-"+e.testId),n?n.className="running":N(e.name,e.testId,e.module),t=a("qunit-testresult-display"),t&&(i=Ee.config.reorder&&e.previousFailure,t.innerHTML=(i?"Rerunning previously failed test: <br />":"Running: <br />")+D(e.name,e.module))}),Ee.log(function(e){var t,n,i,r,o,s,u=!1,l=a("qunit-test-output-"+e.testId);l&&(i=G(e.message)||(e.result?"okay":"failed"),i="<span class='test-message'>"+i+"</span>",i+="<span class='runtime'>@ "+e.runtime+" ms</span>",!e.result&&A.call(e,"expected")?(r=e.negative?"NOT "+Ee.dump.parse(e.expected):Ee.dump.parse(e.expected),o=Ee.dump.parse(e.actual),i+="<table><tr class='test-expected'><th>Expected: </th><td><pre>"+G(r)+"</pre></td></tr>",o!==r?(i+="<tr class='test-actual'><th>Result: </th><td><pre>"+G(o)+"</pre></td></tr>","number"==typeof e.actual&&"number"==typeof e.expected?isNaN(e.actual)||isNaN(e.expected)||(u=!0,s=e.actual-e.expected,s=(s>0?"+":"")+s):"boolean"!=typeof e.actual&&"boolean"!=typeof e.expected&&(s=Ee.diff(r,o),u=C(s).length!==C(r).length+C(o).length),u&&(i+="<tr class='test-diff'><th>Diff: </th><td><pre>"+s+"</pre></td></tr>")):i+=r.indexOf("[object Array]")!==-1||r.indexOf("[object Object]")!==-1?"<tr class='test-message'><th>Message: </th><td>Diff suppressed as the depth of object is more than current max depth ("+Ee.config.maxDepth+").<p>Hint: Use <code>QUnit.dump.maxDepth</code> to  run with a higher max depth or <a href='"+G(h({maxDepth:-1}))+"'>Rerun</a> without max depth.</p></td></tr>":"<tr class='test-message'><th>Message: </th><td>Diff suppressed as the expected and actual results have an equivalent serialization</td></tr>",e.source&&(i+="<tr class='test-source'><th>Source: </th><td><pre>"+G(e.source)+"</pre></td></tr>"),i+="</table>"):!e.result&&e.source&&(i+="<table><tr class='test-source'><th>Source: </th><td><pre>"+G(e.source)+"</pre></td></tr></table>"),t=l.getElementsByTagName("ol")[0],n=L.createElement("li"),n.className=e.result?"pass":"fail",n.innerHTML=i,t.appendChild(n))}),Ee.testDone(function(t){var n,i,s,u,l,c,d,h,p,f=a("qunit-tests");if(f){s=a("qunit-test-output-"+t.testId),u=s.getElementsByTagName("ol")[0],l=t.passed,c=t.failed;var m=t.failed>0?t.todo:!t.todo;if(m?r(u,"qunit-collapsed"):M.collapse&&($?r(u,"qunit-collapsed"):$=!0),n=s.firstChild,d=c?"<b class='failed'>"+c+"</b>, <b class='passed'>"+l+"</b>, ":"",n.innerHTML+=" <b class='counts'>("+d+t.assertions.length+")</b>",t.skipped)Ce.skippedTests++,s.className="skipped",h=L.createElement("em"),h.className="qunit-skipped-label",h.innerHTML="skipped",s.insertBefore(h,n);else{if(e(n,"click",function(){o(u,"qunit-collapsed")}),s.className=m?"pass":"fail",t.todo){var g=L.createElement("em");g.className="qunit-todo-label",g.innerHTML="todo",s.className+=" todo",s.insertBefore(g,n)}i=L.createElement("span"),i.className="runtime",i.innerHTML=t.runtime+" ms",s.insertBefore(i,u),m?t.todo?Ce.todoTests++:Ce.passedTests++:Ce.failedTests++}t.source&&(p=L.createElement("p"),p.innerHTML="<strong>Source: </strong>"+t.source,r(p,"qunit-source"),m&&r(p,"qunit-collapsed"),e(n,"click",function(){o(p,"qunit-collapsed")}),s.appendChild(p))}});var I=function(e){return!(e&&e.version&&e.version.major>0)}(W.phantom);I&&"complete"===L.readyState?Ee.load():e(W,"load",Ee.load);var j=W.onerror;W.onerror=function(e,t,n){var i=!1;if(j){for(var r=arguments.length,o=Array(r>3?r-3:0),s=3;s<r;s++)o[s-3]=arguments[s];i=j.call.apply(j,[this,e,t,n].concat(o))}if(i!==!0){var a={message:e,fileName:t,lineNumber:n};i=Ee.onError(a)}return i}}}(),Ee.diff=function(){function e(){}var t=-1,n=1,i=0;return e.prototype.DiffMain=function(e,t,n){var r,o,s,a,u,l;if(r=(new Date).getTime()+1e3,null===e||null===t)throw new Error("Null input. (DiffMain)");return e===t?e?[[i,e]]:[]:("undefined"==typeof n&&(n=!0),o=n,s=this.diffCommonPrefix(e,t),
a=e.substring(0,s),e=e.substring(s),t=t.substring(s),s=this.diffCommonSuffix(e,t),u=e.substring(e.length-s),e=e.substring(0,e.length-s),t=t.substring(0,t.length-s),l=this.diffCompute(e,t,o,r),a&&l.unshift([i,a]),u&&l.push([i,u]),this.diffCleanupMerge(l),l)},e.prototype.diffCleanupEfficiency=function(e){var r,o,s,a,u,l,c,d,h;for(r=!1,o=[],s=0,a=null,u=0,l=!1,c=!1,d=!1,h=!1;u<e.length;)e[u][0]===i?(e[u][1].length<4&&(d||h)?(o[s++]=u,l=d,c=h,a=e[u][1]):(s=0,a=null),d=h=!1):(e[u][0]===t?h=!0:d=!0,a&&(l&&c&&d&&h||a.length<2&&l+c+d+h===3)&&(e.splice(o[s-1],0,[t,a]),e[o[s-1]+1][0]=n,s--,a=null,l&&c?(d=h=!0,s=0):(s--,u=s>0?o[s-1]:-1,d=h=!1),r=!0)),u++;r&&this.diffCleanupMerge(e)},e.prototype.diffPrettyHtml=function(e){var r,o,s,a=[];for(s=0;s<e.length;s++)switch(r=e[s][0],o=e[s][1],r){case n:a[s]="<ins>"+G(o)+"</ins>";break;case t:a[s]="<del>"+G(o)+"</del>";break;case i:a[s]="<span>"+G(o)+"</span>"}return a.join("")},e.prototype.diffCommonPrefix=function(e,t){var n,i,r,o;if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(r=0,i=Math.min(e.length,t.length),n=i,o=0;r<n;)e.substring(o,n)===t.substring(o,n)?(r=n,o=r):i=n,n=Math.floor((i-r)/2+r);return n},e.prototype.diffCommonSuffix=function(e,t){var n,i,r,o;if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;for(r=0,i=Math.min(e.length,t.length),n=i,o=0;r<n;)e.substring(e.length-n,e.length-o)===t.substring(t.length-n,t.length-o)?(r=n,o=r):i=n,n=Math.floor((i-r)/2+r);return n},e.prototype.diffCompute=function(e,r,o,s){var a,u,l,c,d,h,p,f,m,g,v,y;return e?r?(u=e.length>r.length?e:r,l=e.length>r.length?r:e,c=u.indexOf(l),c!==-1?(a=[[n,u.substring(0,c)],[i,l],[n,u.substring(c+l.length)]],e.length>r.length&&(a[0][0]=a[2][0]=t),a):1===l.length?[[t,e],[n,r]]:(d=this.diffHalfMatch(e,r),d?(h=d[0],f=d[1],p=d[2],m=d[3],g=d[4],v=this.DiffMain(h,p,o,s),y=this.DiffMain(f,m,o,s),v.concat([[i,g]],y)):o&&e.length>100&&r.length>100?this.diffLineMode(e,r,s):this.diffBisect(e,r,s))):[[t,e]]:[[n,r]]},e.prototype.diffHalfMatch=function(e,t){function n(e,t,n){var i,r,s,a,u,l,c,d,h;for(i=e.substring(n,n+Math.floor(e.length/4)),r=-1,s="";(r=t.indexOf(i,r+1))!==-1;)a=o.diffCommonPrefix(e.substring(n),t.substring(r)),u=o.diffCommonSuffix(e.substring(0,n),t.substring(0,r)),s.length<u+a&&(s=t.substring(r-u,r)+t.substring(r,r+a),l=e.substring(0,n-u),c=e.substring(n+a),d=t.substring(0,r-u),h=t.substring(r+a));return 2*s.length>=e.length?[l,c,d,h,s]:null}var i,r,o,s,a,u,l,c,d,h,p;return i=e.length>t.length?e:t,r=e.length>t.length?t:e,i.length<4||2*r.length<i.length?null:(o=this,d=n(i,r,Math.ceil(i.length/4)),h=n(i,r,Math.ceil(i.length/2)),d||h?(p=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(s=p[0],l=p[1],u=p[2],a=p[3]):(u=p[0],a=p[1],s=p[2],l=p[3]),c=p[4],[s,l,u,a,c]):null)},e.prototype.diffLineMode=function(e,r,o){var s,a,u,l,c,d,h,p,f;for(s=this.diffLinesToChars(e,r),e=s.chars1,r=s.chars2,u=s.lineArray,a=this.DiffMain(e,r,!1,o),this.diffCharsToLines(a,u),this.diffCleanupSemantic(a),a.push([i,""]),l=0,d=0,c=0,p="",h="";l<a.length;){switch(a[l][0]){case n:c++,h+=a[l][1];break;case t:d++,p+=a[l][1];break;case i:if(d>=1&&c>=1){for(a.splice(l-d-c,d+c),l=l-d-c,s=this.DiffMain(p,h,!1,o),f=s.length-1;f>=0;f--)a.splice(l,0,s[f]);l+=s.length}c=0,d=0,p="",h=""}l++}return a.pop(),a},e.prototype.diffBisect=function(e,i,r){var o,s,a,u,l,c,d,h,p,f,m,g,v,y,w,b,k,x,q,E,T,S,N;for(o=e.length,s=i.length,a=Math.ceil((o+s)/2),u=a,l=2*a,c=new Array(l),d=new Array(l),h=0;h<l;h++)c[h]=-1,d[h]=-1;for(c[u+1]=0,d[u+1]=0,p=o-s,f=p%2!==0,m=0,g=0,v=0,y=0,T=0;T<a&&!((new Date).getTime()>r);T++){for(S=-T+m;S<=T-g;S+=2){for(b=u+S,k=S===-T||S!==T&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1,q=k-S;k<o&&q<s&&e.charAt(k)===i.charAt(q);)k++,q++;if(c[b]=k,k>o)g+=2;else if(q>s)m+=2;else if(f&&(w=u+p-S,w>=0&&w<l&&d[w]!==-1&&(x=o-d[w],k>=x)))return this.diffBisectSplit(e,i,k,q,r)}for(N=-T+v;N<=T-y;N+=2){for(w=u+N,x=N===-T||N!==T&&d[w-1]<d[w+1]?d[w+1]:d[w-1]+1,E=x-N;x<o&&E<s&&e.charAt(o-x-1)===i.charAt(s-E-1);)x++,E++;if(d[w]=x,x>o)y+=2;else if(E>s)v+=2;else if(!f&&(b=u+p-N,b>=0&&b<l&&c[b]!==-1&&(k=c[b],q=u+k-b,x=o-x,k>=x)))return this.diffBisectSplit(e,i,k,q,r)}}return[[t,e],[n,i]]},e.prototype.diffBisectSplit=function(e,t,n,i,r){var o,s,a,u,l,c;return o=e.substring(0,n),a=t.substring(0,i),s=e.substring(n),u=t.substring(i),l=this.DiffMain(o,a,!1,r),c=this.DiffMain(s,u,!1,r),l.concat(c)},e.prototype.diffCleanupSemantic=function(e){var r,o,s,a,u,l,c,d,h,p,f,m,g;for(r=!1,o=[],s=0,a=null,u=0,d=0,h=0,l=0,c=0;u<e.length;)e[u][0]===i?(o[s++]=u,d=l,h=c,l=0,c=0,a=e[u][1]):(e[u][0]===n?l+=e[u][1].length:c+=e[u][1].length,a&&a.length<=Math.max(d,h)&&a.length<=Math.max(l,c)&&(e.splice(o[s-1],0,[t,a]),e[o[s-1]+1][0]=n,s--,s--,u=s>0?o[s-1]:-1,d=0,h=0,l=0,c=0,a=null,r=!0)),u++;for(r&&this.diffCleanupMerge(e),u=1;u<e.length;)e[u-1][0]===t&&e[u][0]===n&&(p=e[u-1][1],f=e[u][1],m=this.diffCommonOverlap(p,f),g=this.diffCommonOverlap(f,p),m>=g?(m>=p.length/2||m>=f.length/2)&&(e.splice(u,0,[i,f.substring(0,m)]),e[u-1][1]=p.substring(0,p.length-m),e[u+1][1]=f.substring(m),u++):(g>=p.length/2||g>=f.length/2)&&(e.splice(u,0,[i,p.substring(0,g)]),e[u-1][0]=n,e[u-1][1]=f.substring(0,f.length-g),e[u+1][0]=t,e[u+1][1]=p.substring(g),u++),u++),u++},e.prototype.diffCommonOverlap=function(e,t){var n,i,r,o,s,a,u;if(n=e.length,i=t.length,0===n||0===i)return 0;if(n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n)),r=Math.min(n,i),e===t)return r;for(o=0,s=1;;){if(a=e.substring(r-s),u=t.indexOf(a),u===-1)return o;s+=u,0!==u&&e.substring(r-s)!==t.substring(0,s)||(o=s,s++)}},e.prototype.diffLinesToChars=function(e,t){function n(e){var t,n,o,s,a;for(t="",n=0,o=-1,s=i.length;o<e.length-1;)o=e.indexOf("\n",n),o===-1&&(o=e.length-1),a=e.substring(n,o+1),n=o+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?t+=String.fromCharCode(r[a]):(t+=String.fromCharCode(s),r[a]=s,i[s++]=a);return t}var i,r,o,s;return i=[],r={},i[0]="",o=n(e),s=n(t),{chars1:o,chars2:s,lineArray:i}},e.prototype.diffCharsToLines=function(e,t){var n,i,r,o;for(n=0;n<e.length;n++){for(i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},e.prototype.diffCleanupMerge=function(e){var r,o,s,a,u,l,c,d,h;for(e.push([i,""]),r=0,o=0,s=0,u="",a="";r<e.length;)switch(e[r][0]){case n:s++,a+=e[r][1],r++;break;case t:o++,u+=e[r][1],r++;break;case i:o+s>1?(0!==o&&0!==s&&(l=this.diffCommonPrefix(a,u),0!==l&&(r-o-s>0&&e[r-o-s-1][0]===i?e[r-o-s-1][1]+=a.substring(0,l):(e.splice(0,0,[i,a.substring(0,l)]),r++),a=a.substring(l),u=u.substring(l)),l=this.diffCommonSuffix(a,u),0!==l&&(e[r][1]=a.substring(a.length-l)+e[r][1],a=a.substring(0,a.length-l),u=u.substring(0,u.length-l))),0===o?e.splice(r-s,o+s,[n,a]):0===s?e.splice(r-o,o+s,[t,u]):e.splice(r-o-s,o+s,[t,u],[n,a]),r=r-o-s+(o?1:0)+(s?1:0)+1):0!==r&&e[r-1][0]===i?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,s=0,o=0,u="",a=""}for(""===e[e.length-1][1]&&e.pop(),c=!1,r=1;r<e.length-1;)e[r-1][0]===i&&e[r+1][0]===i&&(d=e[r][1],h=d.substring(d.length-e[r-1][1].length),h===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),c=!0):d.substring(0,e[r+1][1].length)===e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),c=!0)),r++;c&&this.diffCleanupMerge(e)},function(t,n){var i,r,o;return i=new e,r=i.DiffMain(t,n),i.diffCleanupEfficiency(r),o=i.diffPrettyHtml(r)}}()}(function(){return this}()),define("core/test/byeresult",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("core/byeresult"),r=t("core/matchresult"),e.test("ByeResult",function(e){var t,o;e.ok(n.isSubclass(i,r),"ByeResult is subclass of MatchResult"),t=new i(5,[13,7],3,9),e.equal(t.getID(),3,"id matches the argument"),e.equal(t.getGroup(),9,"group matches the argument"),e.equal(t.length,2,"bye has two teams"),e.equal(t.getTeamID(0),5,"first team matches the argument"),e.equal(t.getTeamID(1),5,"second team matches the argument"),e.deepEqual(t.score,[13,7],"score matches the argument"),e.equal(t.isBye(),!0,"bye.isBye() is true"),o=t.save(),e.ok(o,"save() returns"),t=new r,e.ok(t.restore(o),"restore() returns"),e.equal(t.getID(),3,"id matches the argument"),e.equal(t.getGroup(),9,"group matches the argument"),e.equal(t.length,2,"bye has two teams"),e.equal(t.getTeamID(0),5,"first team matches the argument"),e.equal(t.getTeamID(1),5,"second team matches the argument"),e.deepEqual(t.score,[13,7],"score matches the argument"),e.equal(t.isBye(),!0,"bye.isBye() is true"),e.equal(t.isRunningMatch(),!1,"byes are not running matches")})}}),define("core/test/correctionmodel",[],function(){return function(e,t){var n,i,r,o,s;n=t("lib/extend"),i=t("core/matchmodel"),r=t("core/matchresult"),o=t("core/correctionmodel"),s=t("core/model"),e.test("CorrectionModel",function(e){var t,a,u,l,c,d;e.ok(n.isSubclass(o,s),"CorrectionModel is subclass of Model"),t=new i([1,4],0,1),a=new r(t,[13,7]),u=new r(a,[7,13]),l=new o(a,u),e.ok(l,"construction works"),e.equal(l.before,a,"'before' stored as reference"),e.equal(l.after,u,"'after' stored as reference");try{l=new o("asd",{pi:3}),d=!1}catch(e){d=!0}e.ok(d,"the constructor throws on invalid values"),l=new o,e.ok(l,"default construction works"),e.deepEqual(l.before,new r,"default construction of pre-correction result"),e.deepEqual(l.after,new r,"default construction of post-correction result"),l=new o(a,u),c=l.save(),e.ok(c,"save() returns"),l=new o,e.ok(l.restore(c),"restore() returns"),e.deepEqual(l.before,a,"restore() restores the pre-correction result"),e.deepEqual(l.after,u,"restore() restores the post-correction result")})}}),define("core/test/correctionreferencemodel",[],function(){return function(e,t){var n,i,r,o,s,a;n=t("lib/extend"),i=t("core/correctionreferencemodel"),r=t("core/correctionmodel"),s=t("core/matchmodel"),o=t("core/matchresult"),a=t("list/listmodel"),e.test("CorrectionReferenceModel",function(e){var t,u,l,c,d;e.ok(n.isSubclass(i,r),"CorrectionReferenceModel is subclass of CorrectionModel"),d=new a,d.push(5),d.push(3),d.push(6),d.push(1),d.push(13),d.push(0),t=new o(new s([5,3],1,2),[13,7]),u=new o(new s([2,4],2,1),[8,9]),l=new r(t,u),c=new i(l,d),e.equal(c.before.result,t,"before result reference is set"),e.equal(c.after.result,u,"after result reference is set"),e.deepEqual(c.before.teams,[0,1],"before teams correctly referenced"),e.deepEqual(c.after.teams,[6,13],"after teams correctly referenced"),e.deepEqual(c.before.score,t.score,"before score is correct"),e.deepEqual(c.after.score,u.score,"after score is correct"),e.equal(c.before.getID(),1,"before id matches"),e.equal(c.after.getID(),2,"after id matches"),e.equal(c.before.getGroup(),2,"before group matches"),e.equal(c.after.getGroup(),1,"after group matches")})}}),define("core/test/emitter",[],function(){return function(e,t){var n;n=t("core/emitter"),e.test("Emitter",function(e){var t,i,r,o,s,a;o=s=0,t=void 0,i=void 0,i={onundefined:function(){this.onreset()},onreset:function(){o=0,s+=1},onevent:function(n,r){o+=1,e.equal(this,i,"onevent(): this equals listener"),e.equal(n,t,"onevent(): first argument equals emitter "),e.equal(r,"event","onevent(): second argument equals event string")},emitters:[]},r={onevent:function(){o+=1},emitters:[]},t=new n,t.EVENTS={asd:!0,event:!0,reset:!0},a=t.emit("asd"),e.equal(a,!1,"Emitter: unreceived event returns false on emit()"),t.registerListener(i).registerListener(r),e.equal(o+s,0,"counters are at a zero state after listener registration"),a=t.emit("event"),e.equal(o,2,"both listeners received 'event'"),e.equal(a,!0,"Emitter: received event returns true on emit()"),t.registerListener(i),a=t.emit("event"),e.equal(o,4,"Cannot register an event listener twice"),a=t.emit("reset"),e.equal(o,0,"counter was reset during 'reset' event"),e.equal(s,1,"reset was processed"),a=t.emit("event"),a=t.emit(),e.equal(s,1,"default event (undefined) was not processed"),e.equal(o,2,"onundefined callback function was not processed"),t.emit("thisEventIsInvalid"),e.equal(o,2,"unspecified events are not processed"),t.unregisterListener(i),a=t.emit("event"),e.equal(o,3,"unregistered listeners do not receive events"),a=t.listeners.indexOf(i),e.equal(a,-1,"listeners are removed from emitter.listeners"),a=i.emitters.indexOf(t),e.equal(a,-1,"emitters are removed from listener.emitters"),t=new n,t.EVENTS={evt:!0},r={success:!1,onevt:function(){this.success=!0},emitters:[]},i={onevt:function(){t.unregisterListener(this)},emitters:[]},t.registerListener(i),t.registerListener(r),t.emit("evt"),e.equal(r.success,!0,"unregister during emit should not cause listeners to be skipped"),t=new n,t.EVENTS={evt:!0},r.success=!1,t.registerListener(r),n.call(t),t.emit("evt"),e.equal(r.success,!0,"Mixin-initialization of an emitter preserves the listeners"),t=new n,i={emitters:[]},r={emitters:[]},t.registerListener(i),t.registerListener(r),t.destroy(),e.equal(i.emitters.length,0,"memleak: first listener was unregistered"),e.equal(r.emitters.length,0,"memleak: second listener was unregistered")})}}),define("core/test/listener",[],function(){return function(e,t){var n,i;n=t("core/emitter"),i=t("core/listener"),e.test("Listener",function(e){var t,r,o,s;t=new n,r=new n,r.numListeners=function(){return this.listeners.length},o=new i(t),o.updatecount=0,o.onupdate=function(){this.updatecount+=1},o.numEmitters=function(){return this.emitters.length},e.equal(o.numEmitters(),1,"listener initializes with an emitter"),t.emit("update"),e.equal(o.updatecount,1,"update event received from emitter1"),r.registerListener(o),e.equal(o.numEmitters(),2,"registerListener adds emitter2"),r.emit("update"),e.equal(o.updatecount,2,"receiving events from emitter2"),t.unregisterListener(o),e.equal(o.numEmitters(),1,"emitter.destroy() unregisters the listener"),t.registerListener(o),e.equal(o.numEmitters(),2,"re-registering the emitter"),t.destroy(),e.equal(o.numEmitters(),1,"emitter.destroy() unregisters the listener"),o.destroy(),e.equal(o.numEmitters(),0,"listener.destroy() unregisters all emitters"),e.equal(r.numListeners(),0,"listener.destroy() unregisters the listener from all emitters"),t=new n,s=0,i.bind(t,"update",function(){s+=1}),t.emit("update"),t.emit("reset"),e.ok(t,"bind-created listener works"),t.destroy(),t=new n,s=0,i.bind(t,"update,reset",function(e,t,n){s+=n||1}),t.emit("reset"),t.emit("update",123),e.equal(s,124,"bind-listening for multiple event types with data object"),t.destroy(),t=new n,s=void 0,i.bind(t,"reset",function(){s=this},t),t.emit("reset"),e.equal(s,t,"bind(): thisArg works"),t=new n,r=new n,o=new i(t),r.registerListener(o),o.destroy(),e.equal(t.listeners.length,0,"memleak: first emitter was unregistered"),e.equal(r.listeners.length,0,"memleak: second emitter was unregistered"),t=new n,o=new i(t),t.registerListener(o),e.equal(o.emitters.length,1,"double registration of a listener is prevented"),o.resetcount=0,o.onreset=function(){this.resetcount+=1},t.emit("reset"),e.equal(o.resetcount,1,"double invocation of a listener is prevented")})}}),define("core/test/matchmodel",[],function(){return function(e,t){var n,i,r;n=t("core/matchmodel"),i=t("core/matchresult"),r=t("core/listener"),e.test("MatchModel",function(e){var t,o,s,a,u;t=new n,e.ok(t,"empty initialization works"),t=new n([15]),e.ok(t,"empty game id still instantiates the MatchModel."),e.equal(t.getID(),-1,"game id default to -1"),t=new n([15],0),e.ok(t,"empty group still instantiates the MatchModel"),e.equal(t.getGroup(),-1,"group defaults to -1"),t=new n([],0,0),e.ok(t,"empty teams array still works"),t=new n([15],51,5),e.equal(t.getID(),51,"id is correct"),e.equal(t.getGroup(),5,"group is correct"),e.equal(t.length,1,"game.length is correct"),e.equal(t.getTeamID(-123),void 0,"getTeamID below 0"),e.equal(t.getTeamID(1),void 0,"getTeamID at game.length"),e.equal(t.getTeamID(12),void 0,"getTeamID outside of range"),e.equal(t.getTeamID(0),15,"getTeamID inside range"),o=[1,2,3,4,5],t=new n(o,2,3),o[3]=321,e.equal(t.getTeamID(3),4,"MatchModel() copies the team array"),t=new n([1,2],0,0),s=new i(t,[13,7]),a=new r,a.finished=!1,a.onfinish=function(){this.finished=!0},t.registerListener(a),e.equal(t.finish(),void 0,"game.finish() fails"),e.equal(t.finish([]),void 0,"game.finish([]) fails"),e.equal(t.finish([3,2,1]),void 0,"game.finish([3,2,1]) fails"),e.equal(a.finished,!1,'no "finish" event sent yet'),e.deepEqual(t.finish([13,7]),s,"game.finish([13,7]) works"),e.equal(a.finished,!0,'"finish" event sent yet'),t=new n([4,1,2],2,3),u=t.save(),e.ok(u,"save() returns something"),t=new n,e.equal(t.restore(u),!0,"restore() works"),e.equal(t.length,3,"restore(): correct length"),e.equal(t.getID(),2,"restore(): correct id"),e.equal(t.getGroup(),3,"restore(): correct group"),e.equal(t.getTeamID(0),4,"restore(): correct team id 0"),e.equal(t.getTeamID(1),1,"restore(): correct team id 1"),e.equal(t.getTeamID(2),2,"restore(): correct team id 2"),t=new n([0,1],0,0),e.ok(t.isRunningMatch(),"isRunningMatch() of a typical match"),t=new n([0,0],0,0),e.equal(t.isRunningMatch(),!1,"isRunningMatch() of a match with duplicate teams"),t=new n([0,void 0],0,0),e.equal(t.isRunningMatch(),!1,"isRunningMatch() of a match with an undefined team"),u=t.save(),e.ok(u,"save() with undefined team succeeds"),t=new n,e.equal(t.restore(u),!0,"restore() with undefined team works"),e.equal(t.getTeamID(1),void 0,"second team still is undefined")})}}),define("core/test/matchreferencemodel",[],function(){return function(e,t){var n,i,r;n=t("core/matchmodel"),i=t("core/matchreferencemodel"),r=t("list/listmodel"),e.test("MatchReferenceModel",function(e){var t,o,s,a;s=new r,s.push(5),s.push(7),s.push(3),s.push(9),t=new n([3,2,1,0],2,5),e.equal(t.getTeamID(0),3,"MatchModel: internal value"),e.equal(t.getTeamID(1),2,"MatchModel: internal value"),e.equal(t.getTeamID(2),1,"MatchModel: internal value"),e.equal(t.getTeamID(3),0,"MatchModel: internal value"),o=new i(t,s),e.equal(o.getID(),t.getID(),"identical game ids"),e.equal(o.getGroup(),t.getGroup(),"identical game group"),e.equal(o.getTeamID(0),9,"global value"),e.equal(o.getTeamID(1),3,"global value"),e.equal(o.getTeamID(2),7,"global value"),e.equal(o.getTeamID(3),5,"global value"),s.set(1,12),s.remove(0),s.push(53),s.remove(2),e.equal(o.getTeamID(0),9,"teamlist changes have no impact"),e.equal(o.getTeamID(1),3,"teamlist changes have no impact"),e.equal(o.getTeamID(2),7,"teamlist changes have no impact"),e.equal(o.getTeamID(3),5,"teamlist changes have no impact"),a={finished:!1,onfinish:function(){this.finished=!0},emitters:[]},t=new n([1,2],0,2),o=new i(t,s),o.registerListener(a),t.finish([3,4]),e.equal(a.finished,!0,'"finish" event cascades through'),a.finished=!1,t=new n([1,2],0,2),o=new i(t,s),t.registerListener(a),o.finish([3,4]),e.equal(a.finished,!0,"finish() is forwarded properly"),a.finished=!1,t=new n([1,2],0,2),o=new i(t,s),o.registerListener(a),o.finish([3,4]),e.equal(a.finished,!0,"finish() -> onfinish roundtrip")})}}),define("core/test/matchresult",[],function(){return function(e,t){var n,i;n=t("core/matchmodel"),i=t("core/matchresult"),e.test("MatchResult",function(e){var t,r,o,s,a,u;t=new n([1,2],2,5),r=void 0;try{r=new i,s=!0}catch(e){s=!1}e.ok(s,"empty construction works"),e.equal(r.match,void 0,"empty construction -> no match"),e.deepEqual(r.teams,[],"empty construction -> empty teams"),e.deepEqual(r.score,[],"empty construction -> empty score"),e.deepEqual(r.getID(),-1,"empty construction -> id == -1"),e.deepEqual(r.getGroup(),-1,"empty construction -> group == -1"),o=[13,7];try{r=new i(t,o),s=!0}catch(e){s=!1}e.ok(s,"passing match as first argument"),e.equal(r.match,void 0,"result.match got kicked out of the API"),e.deepEqual(r.teams,t.teams,"match teams match"),e.ok(r.teams!==t.teams,"match teams are only copies"),e.deepEqual(r.score,o,"scores match"),e.ok(r.score!==o,"scores are only copies of another"),e.deepEqual(r.getID(),2,"keeping the id"),e.deepEqual(r.getGroup(),5,"keeping the group id"),e.equal(r.isBye(),!1,"result is not a bye"),o=[8,12],r=new i(r,o),e.ok(s,"passing match as first argument"),e.equal(r.match,void 0,"result.match got kicked out of the API"),e.deepEqual(r.teams,t.teams,"match teams match"),e.ok(r.teams!==t.teams,"match teams are only copies"),e.deepEqual(r.score,o,"scores match"),e.ok(r.score!==o,"scores are only copies of another"),e.deepEqual(r.getID(),2,"keeping the id"),e.deepEqual(r.getGroup(),5,"keeping the group id"),e.equal(r.isBye(),!1,"result is not a bye"),a=[5,1],o=[5,11];try{r=new i(a,o),s=!1}catch(e){s=!0}e.ok(s,"construction with a team array does not work anymore (API change)"),r=new i(new n([5,3],8,1),[13,7]),u=r.save(),e.ok(u,"save() finishes"),a=[5,3],o=[13,7],r=new i,e.ok(r.restore(u),"restore() finishes"),e.equal(r.match,void 0,"restore(): match not restored"),e.deepEqual(r.teams,a,"restore(): teams restored"),e.deepEqual(r.score,o,"restore(): scores restored"),e.deepEqual(r.getID(),8,"restore(): id restored"),e.deepEqual(r.getGroup(),1,"restore(): group id restored"),e.equal(r.isBye(),!1,"result is not a bye"),e.equal(r.isRunningMatch(),!1,"results are not running matches")})}}),define("core/test/model",[],function(){return function(e,t){var n,i,r;n=t("core/model"),i=t("core/emitter"),r=t("lib/extend"),e.test("Model",function(e){var t,o;e.ok(r.isSubclass(n,i),"Model is an Emitter subclass"),t=new n,e.deepEqual(t.save(),{},"Model.save() returns empty object");try{e.equal(t.restore({}),!0,"Model.restore() returns true on success"),o=!0}catch(e){o=!1}e.ok(o,"model.restore() exists and is a function")})}}),define("core/test/propertymodel",[],function(){return function(e,t){var n;n=t("core/propertymodel"),e.test("PropertyModel",function(e){var t,i,r,o;t=new n,e.ok(void 0!==t,"empty initialization is allowed"),e.equal(t.getProperty("someprop"),void 0,"access to undefined keys returns undefined"),i={success:!1,onupdate:function(){this.success=!0},emitters:[]},t.registerListener(i),e.equal(t.setProperty("name","Some Name"),!0,"setProperty() returns true"),e.equal(i.success,!0,"setProperty() emits update event"),e.equal(t.getProperty("name"),"Some Name","setProperty() actually stores values"),i.success=!1,e.equal(t.setProperty("name","Another Name"),!0,"setProperty() returns true"),e.equal(i.success,!0,"setProperty() emits update event"),e.equal(t.getProperty("name"),"Another Name","setProperty() actually changes values"),i.success=!1,e.equal(t.setProperty("name","Another Name"),!1,"setProperty() returns false on no-change"),e.equal(i.success,!1,"setProperty() emits no update on no-change"),e.equal(t.getProperty("name"),"Another Name","setProperty() did not change any values"),r={asd:"dsa",i:5},e.equal(t.setProperty("object",r),!1,"cannot store objects"),e.equal(t.getProperty("object"),void 0,"object references are not stored"),e.equal(t.setProperty("array",[1,2,3]),!1,"cannot store arrays"),e.equal(t.getProperty("array"),void 0,"array object references are not stored"),r=function(){},e.equal(t.setProperty("function",r),!1,"cannot store functions"),e.equal(t.getProperty("function"),void 0,"function references are not stored"),e.equal(t.setProperty("date",new Date),!1,"cannot store dates"),e.equal(t.getProperty("date"),void 0,"dates are not stored"),e.equal(t.setProperty("regex",/dsa/),!1,"cannot store regular expressions"),e.equal(t.getProperty("regex"),void 0,"regular expressions are not stored"),t=new n,t.setProperty("string","somevalue"),t.setProperty("int",53241),t.setProperty("float",53.241),t.setProperty("boolean",!0),o=t.save(),e.ok(o,"save() works"),t=new n,e.equal(t.restore(o),!0,"restore() works!"),e.equal(t.getProperty("string"),"somevalue","string restored"),e.equal(t.getProperty("int"),53241,"int restored"),e.equal(t.getProperty("float"),53.241,"float restored"),e.equal(t.getProperty("boolean"),!0,"boolean restored"),t=new n({bool:!0,str:"string",num:123}),e.ok(t,"property model with default initialization"),e.equal(t.getProperty("bool"),!0,"default bool property"),e.equal(t.getProperty("str"),"string","default str property"),e.equal(t.getProperty("num"),123,"default num property")})}}),define("core/test/propertyvaluemodel",[],function(){return function(e,t){var n,i,r,o,s;n=t("lib/extend"),i=t("core/propertyvaluemodel"),o=t("core/propertymodel"),r=t("core/valuemodel"),s=t("core/listener"),e.test("PropertyValueModel",function(e){var t,a,u;e.ok(n.isSubclass(i,r),"PropertyValueModel is subclass of ValueModel"),t=new o({bool:!0,num:5,str:"dapfen"}),a=new i(t,"bool"),e.ok(a,"bool value initialization"),e.equal(a.get(),!0,"value is initialized to current value"),u=new s(a),u.updates=0,u.onupdate=function(){this.updates+=1},t.setProperty("bool",!1),e.equal(u.updates,1,"value: 1 propagate update"),e.equal(a.get(),!1,"value is propagated to value"),u.updates=0,a.set(!0),e.equal(u.updates,1,"value.set(): no event loop"),e.equal(a.get(),!0,"value is properly set"),e.equal(t.getProperty("bool"),!0,"value is propagated to PropertyModel"),u.updates=0,a.set(a.get()),e.equal(u.updates,0,"value.set(value.get()): no-op"),u.updates=0,t.setProperty("bool",t.getProperty("bool")),e.equal(u.updates,0,"setProp(getProp()): no-op")})}}),define("core/test/random",[],function(){return function(e,t){var n;n=t("core/random"),e.test("Random",function(e){var t,i,r,o,s,a;for(r=new n,t=i=r.nextDouble(),a=0,s=0;s<1e4;s+=1)o=r.nextDouble(),o<t&&(t=o),o>i&&(i=o),a+=o;for(e.equal(Math.abs(a-5e3)<100,!0,"double mean"),e.equal(t<.01,!0,"double min top"),e.equal(t>=0,!0,"double min bottom"),e.equal(i>.99,!0,"double max top"),e.equal(i<1,!0,"double max bottom"),i=t=r.nextInt(64),s=0;s<1e4;s+=1)o=r.nextInt(64),o<t&&(t=o),o>i&&(i=o);e.equal(t,0,"int min"),e.equal(i,63,"int max")})}}),define("core/test/resultreferencemodel",[],function(){return function(e,t){var n,i,r,o;n=t("core/resultreferencemodel"),o=t("core/matchresult"),i=t("core/matchmodel"),r=t("list/listmodel"),e.test("ResultReferenceModel",function(e){var t,s,a,u;u=new r,u.push(5),u.push(7),u.push(3),u.push(9),t=new i([3,2,1,0],2,5),s=new o(t,[13,7,5,2]),a=new n(s,u),e.equal(a.getID(),t.getID(),"identical game ids"),e.equal(a.getGroup(),t.getGroup(),"identical game group"),e.deepEqual(a.score,[13,7,5,2],"score is retained"),e.equal(a.getTeamID(0),9,"global value"),e.equal(a.getTeamID(1),3,"global value"),e.equal(a.getTeamID(2),7,"global value"),e.equal(a.getTeamID(3),5,"global value"),u.set(1,12),u.remove(0),u.push(53),u.remove(2),e.equal(a.getTeamID(0),9,"teamlist changes have no impact"),e.equal(a.getTeamID(1),3,"teamlist changes have no impact"),e.equal(a.getTeamID(2),7,"teamlist changes have no impact"),e.equal(a.getTeamID(3),5,"teamlist changes have no impact")})}}),define("core/test/rle",[],function(){return function(e,t){var n;n=t("core/rle"),e.test("RLE",function(e){var t,i,r,o,s;t=!0;try{n.encode(void 0),t=!1}catch(e){}e.ok(t,"RLE.encode() with undefined"),t=!0;try{n.encode(null),t=!1}catch(e){}e.ok(t,"RLE.encode() with null"),t=!0;try{n.encode(""),t=!1}catch(e){}e.ok(t,'RLE.encode() with ""'),t=!0;try{n.encode({}),t=!1}catch(e){}e.ok(t,"RLE.encode() with {}"),t=!0;try{n.encode(/5/),t=!1}catch(e){}e.ok(t,"RLE.encode() with /5/"),t=!0;try{n.encode({a:4}),t=!1}catch(e){}e.ok(t,"RLE.encode() with {a:4}"),t=!0;try{n.encode("loremipsum"),t=!1}catch(e){}e.ok(t,'RLE.encode() with "loremipsum"'),t=!0;try{n.encode("5"),t=!1}catch(e){}e.ok(t,'RLE.encode() with "5"'),e.equal(n.encode([]),"","RLE.encode() with []"),e.equal(n.encode(0),"0","RLE.encode() with 0"),e.equal(n.encode(3),"3","RLE.encode() with 3"),e.equal(n.encode([0]),"[n1]","RLE.encode() with [0]"),e.equal(n.encode([1.3]),"[1.3]","RLE.encode() with [1.3]"),e.equal(n.encode([-130]),"[-130]","RLE.encode() with [1.3]"),i=[],i[3]=5,e.equal(n.encode(i),"[n3,5]","RLE.encode() with [null,null,null,5]"),e.equal(n.encode([[]]),"[n1]","RLE.encode() with [[]]"),e.equal(n.encode([[[]]]),"[n1]","RLE.encode() with [[[]]]"),e.equal(n.encode([{}]),"[undefined]","RLE.encode() with [{}]"),e.equal(n.encode([/5/]),"[undefined]","RLE.encode() with [/5/]"),e.equal(n.encode([void 0,null,0]),"[n3]","RLE.encode() with [undefined,null,0]"),e.equal(n.encode([void 0,null,30]),"[n2,30]","RLE.encode() with [undefined,null,30]"),e.equal(n.encode([1,void 0,null,30]),"[1,n2,30]","RLE.encode() with [undefined,null,30]"),i=[],i[3]=[1,2,void 0,4],e.equal(n.encode(i),"[n3,[1,2,n,4]]","RLE.encode() with singly nested data"),i[3]=void 0,e.equal(n.encode(i),"[n4]","RLE.encode() with singly nested data, all nulled"),e.deepEqual(n.decode(""),[],"RLE decode test with empty string"),e.deepEqual(n.decode("[]"),[],"RLE decode test with an empty string"),e.deepEqual(n.decode("[1]"),[1],"RLE decode test with single entry"),e.deepEqual(n.decode("[n,1]"),[void 0,1],"RLE decode test with single null entry"),e.deepEqual(n.decode("[n1,1]"),[void 0,1],"RLE decode test with single null entry"),r=[],r[3]=1,e.deepEqual(n.decode("[n3,1]"),r,"RLE decode test with single null entry"),e.deepEqual(n.decode("[n3,1,n]"),r,"RLE decode test with single null entry"),e.deepEqual(n.decode("[n12]"),[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],"RLE decode test with only null entries"),e.deepEqual(n.decode("[n5,n6]"),[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],"RLE decode test with only consecutive null entries"),e.deepEqual(n.decode("[+3]"),[3],"RLE decode test with [+3]"),e.deepEqual(n.decode("[-0]"),[0],"RLE decode test with [-0]"),e.deepEqual(n.decode("[1.23]"),[1.23],"RLE decode test with [1.23]"),e.deepEqual(n.decode("[-1.23e+4]"),[-12300],"RLE decode test with [-1.23e+4]"),e.deepEqual(n.decode("[5,n2]"),[5,void 0,void 0],"RLE decode with trailing null values"),e.deepEqual(n.decode("[5,n2]").length,3,"RLE decode with trailing null values"),e.deepEqual(n.decode("[n12]").length,12,"RLE decode with only null values"),e.deepEqual(n.decode("[.]"),void 0,"RLE decode test with [.] as input"),e.deepEqual(n.decode("[-]"),void 0,"RLE decode test with [-] as input"),e.deepEqual(n.decode("[+]"),void 0,"RLE decode test with [+] as input"),e.deepEqual(n.decode("[--6]"),void 0,"RLE decode test with [--6] as input"),r=[1,[2],[5,[6,void 0,void 0,void 0]],[]],r[1][4]=4,r[3][8]=9,r[3][9]=[10],e.deepEqual(n.decode("[1,[2,n3,4],[5,[6,n3]],[n8,9,[10]]]"),r,"RLE decode test with nested arrays"),r=[],r[3]=[1,2,void 0,4],e.deepEqual(n.decode("[n3,[1,2,n,4]]"),r,"RLE decode test with nested arrays"),e.equal(n.decode(void 0),void 0,"RLE.decode() with undefined"),e.equal(n.decode(null),void 0,"RLE.decode() with null"),e.equal(n.decode({}),void 0,"RLE.decode() with {}"),e.equal(n.decode(/5/),void 0,"RLE.decode() with /5/"),e.equal(n.decode({a:4}),void 0,"RLE.decode() with {a:4}"),e.equal(n.decode("5"),void 0,'RLE.decode() with "5"'),e.equal(n.decode("asd"),void 0,'RLE.decode() with "asd"'),e.equal(n.decode("{}"),void 0,'RLE.decode() with "{}"'),e.equal(n.decode("{asd:5}"),void 0,'RLE.decode() with "{asd:5}"'),e.equal(n.decode("[{asd:5}]"),void 0,'RLE.decode() with "[{asd:5}]"'),o=n.encode,s=n.decode,r[123]=-1.23433e-41,e.deepEqual(s(o(s(o(s(o(s(o(s(o(s(o(r)))))))))))),r,"RLE re-encoding chain"),r=[[[[[]]]]],e.deepEqual(s(o(s(o(s(o(s(o(s(o(s(o(r)))))))))))),[void 0],"RLE re-encoding chain of nested arrays"),e.equal(n.encode([0,1,1,1]),"[n,1,1,1]","encoding leading null value"),e.deepEqual(n.decode("[n,1,1,1]"),[void 0,1,1,1],"decoding leading null value")})}}),define("core/test/selectionvaluemodel",[],function(){return function(e,t){var n,i;n=t("core/selectionvaluemodel"),i=t("list/listmodel"),e.test("SelectionValueModel",function(e){var t,r,o;o=123,r=new i,t=new n(o,r),e.equal(t.get(),o,"defaultvalue respected"),e.equal(t.set(321),!1,"unallowed value"),e.equal(t.set(5),!1,"unallowed value"),e.equal(t.set("asd"),!1,"unallowed value"),e.equal(t.get(),o,"empty allowed-list"),r.push(5),e.equal(t.set(5),!0,"allowed value"),e.equal(t.set(5),!0,"allowed value, again"),e.equal(t.get(),5,"setting allowed value"),r.push(4),r.push(3),r.push(2),r.push(1),r.push(10),r.push(551),e.equal(t.get(),5,"retaining value on allowedlist-extension"),e.equal(t.set(10),!0,"allowed value"),
e.equal(t.get(),10,"changing allowed value"),r.remove(r.indexOf(10)),e.equal(t.get(),o,"value reverts to defaultValue"),t.setDefault(321),e.equal(t.get(),321,"default value changed, was not allowed")})}}),define("core/test/statevaluemodel",[],function(){return function(e,t){var n;n=t("core/statevaluemodel"),e.test("StateValueModel",function(e){var t,i;i={a:["b","c"],b:["a"],c:[]},t=new n("a",i),e.equal(t.get(),"a","initial state is accepted"),t.set(void 0),e.equal(t.get(),"a","ignoring invalid state transition (undefined)"),e.equal(t.set("d"),!1,'unallowed transition ("d")'),e.equal(t.set("b"),!0,'valid state transition ("b")'),e.equal(t.get(),"b","state actually transitioned"),e.equal(t.set("b"),!0,"transition to current state"),e.equal(t.set("c"),!1,'unallowed transition ("d")'),e.equal(t.set("a"),!0,'valid state transition ("a")'),e.equal(t.set("c"),!0,'valid state transition ("a")'),e.equal(t.forceState("invalidstate"),!1,"forceState() cannot force a nonexistant state"),e.equal(t.get(),"c",'state is at "c"'),e.equal(t.set("a"),!1,'transition to state "a" is invalid'),e.equal(t.forceState("a"),!0,'transition to state "a" can be enforced'),e.equal(t.get(),"a",'state was forced to be "a"')})}}),define("core/test/type",[],function(){return function(e,t){var n;n=t("core/type"),e.test("Type",function(e){var t,i,r,o;t=[],t.push(5),t.push({asd:123}),t.push(""),t.push(void 0),t.push(null),t.push(new Date(1234567890123)),t.push([1,5,"asd"]),t.push(/arbitrary regex/),t.push(!1),t.push(function(){return"3.1415"}),i=["number","object","string","undefined","null","date","array","regexp","boolean","function"],o=[Number,Object,String,void 0,null,Date,Array,RegExp,Boolean,Function],i.forEach(function(i,r){e.equal(n(t[r]),i,"Type "+i+" detected")}),r=i.map(function(e){return"is"+[e[0].toUpperCase()+e.slice(1)]}),e.ok(n.is,"Type.is exists"),e.equal(n(n.is),"function","Type.is() is a function"),r.forEach(function(t){e.ok(n[t],"Type."+t+" exists"),e.equal(n(n[t]),"function","Type."+t+"() is a function")}),t.forEach(function(t,i){r.forEach(function(r,o){var s=o===i;e.equal(n[r](t),s,"Type."+r+" on a "+n(t)+" is "+s)})}),t.forEach(function(t,r){i.forEach(function(i,o){var s=o===r;e.equal(n.is(t,i),s,'Type.is(obj, "'+i+'") on a '+n(t)+" is "+s)})}),t.forEach(function(t,i){o.forEach(function(r,o){var s=o===i;e.equal(n.is(t,r),s,"Type.is(obj, "+r+") on a "+n(t)+" is "+s)})})})}}),define("core/test/valuemodel",[],function(){return function(e,t){var n;n=t("core/valuemodel"),e.test("ValueModel",function(e){var t,i,r,o;i={lastdata:void 0,updatecount:0,onupdate:function(e,t,n){i.updatecount+=1,i.lastdata=n},emitters:[]},t=new n,e.equal(t.get(),void 0,"default value: undefined"),t=new n(5),e.equal(t.get(),5,"accepting numeric default values"),t=new n(0),e.equal(t.get(),0,"accepting 0 as a default value"),t.registerListener(i),t.set(12345),e.equal(t.get(),12345,"set() sets a new value"),e.equal(i.updatecount,1,"set() fires an update event"),t.set(12345),e.equal(t.get(),12345,"set() retains the old value"),e.equal(i.updatecount,1,"set() does not update if values match"),t.set("12345"),e.equal(t.get(),"12345","set() updates on type mismatch"),e.equal(i.updatecount,2,"set() type mismatch: fire update"),r={},t.set(r),e.equal(t.get(),r,"set(): objects are referenced directly"),o=new n,t=new n,t.bind(o),o.set(5),e.equal(t.get(),5,"bind(): works with numbers"),r={},o.set(r),e.equal(t.get(),r,"bind(): works with object references"),o.bind(t),t.set(11),e.equal(t.get(),11,"cyclic bind(): model A"),e.equal(o.get(),11,"cyclic bind(): model B")})}}),define("list/test/binningreferencelistmodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("list/binningreferencelistmodel"),r=t("list/listmodel"),e.test("BinningReferenceListModel",function(e){var t,o,s,a,u;e.ok(n.isSubclass(i,r),"BinningReferenceListModel is subclass of ListModel"),t=!1;try{o=new i}catch(e){t=!0}e.ok(t,"empty construction throws an error"),t=!1,a=new r;try{o=new i(a)}catch(e){t=!0}e.ok(t,"missing binning function throws an error"),t=!1,u=function(e){return e%10};try{o=new i(void 0)}catch(e){t=!0}e.ok(t,"missing bin list throws an error"),o=new i(a,u),e.ok(o,"proper construction"),e.equal(o.length,0,"initial length is 0"),a.push(4),e.equal(o.length,1,"there's one bin now"),e.equal(o.getBinName(0),4,"bin has correct name"),s=o.getBin(4),e.equal(s.length,1,"bin contains an element"),e.deepEqual(s.asArray(),[4],"bin 4 contains the number 4"),a.push(14),e.equal(o.length,1,"there's still only one bin"),e.deepEqual(s.asArray(),[4,14],"bin 4 contains the number 14"),a.insert(0,24),e.deepEqual(s.asArray(),[24,4,14],"order of original list is preserved"),a.push(1),a.push(12),a.push(53),e.equal(o.length,4,"More insertions: 4 bins"),a.pop(),e.equal(o.length,3,"only 3 bins after the removal of a unique number"),a=new r([4,1,2,53,16,5,8,9,0,7]),o=new i(a,u),e.equal(o.length,10,"auto-initialization from existing values"),e.equal(o.getBin(3).get(0),53,"binlist contains actual values, not indices")})}}),define("list/test/combinedreferencelistmodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("list/combinedreferencelistmodel"),r=t("list/listmodel"),e.test("CombinedReferenceListModel",function(e){var t,o,s,a;e.ok(n.isSubclass(i,r),"CombinedReferenceListModel is subclass of ListModel"),a=!1;try{s=new i}catch(e){a=!0}e.ok(a,"empty construction currently fails"),t=new r,s=new i(t),e.ok(s,"construction with a single list works"),e.equal(s.length,0,"initial length is 0"),t.push(5),e.equal(s.length,1,"an element gets added"),e.deepEqual(s.asArray(),[5],"correct element was added"),t.insert(0,1),e.deepEqual(s.asArray(),[1,5],"insertion is mirrored"),t.push(8),e.deepEqual(s.asArray(),[1,5,8],"push is mirrored"),t.remove(1),e.deepEqual(s.asArray(),[1,8],"remove is mirrored"),t.pop(),e.deepEqual(s.asArray(),[1],"pop is mirrored"),t.clear(),e.deepEqual(s.asArray(),[],"clear is mirrored"),t=new r([1,3,5]),o=new r([2,4,6]),s=new i(t,o),e.deepEqual(s.asArray(),[1,3,5,2,4,6],"multiple lists are appended"),o.insert(1,13),e.deepEqual(s.asArray(),[1,3,5,2,13,4,6],"list offsets are correct"),t.clear(),e.deepEqual(s.asArray(),[2,13,4,6],"clear() shifts all following elements towards the front"),t=new r([1,3,5]),s=new i(t,new i(t),new i(t)),e.deepEqual(s.asArray(),[1,3,5,1,3,5,1,3,5],"combining the same list three times"),t.push(7),e.deepEqual(s.asArray(),[1,3,5,7,1,3,5,7,1,3,5,7],"pushing to the triply-combined list")})}}),define("list/test/indexedlistmodel",[],function(){return function(e,t){var n,i,r,o;n=t("lib/extend"),i=t("list/indexedlistmodel"),o=t("list/listmodel"),r=t("list/indexedmodel"),e.test("IndexedListModel",function(e){var t;e.ok(n.isSubclass(i,o),"IndexedListModel is subclass of ListModel"),t=new i,t.push(new r),t.push(new r),t.push(new r),e.equal(t.get(0).getID(),0,"push into empty indexed list sets the proper id"),e.equal(t.get(1).getID(),1,"push into empty indexed list sets the proper id"),e.equal(t.get(2).getID(),2,"push into empty indexed list sets the proper id"),t.pop(),e.equal(t.get(0).getID(),0,"pop does not affect any indices"),e.equal(t.get(1).getID(),1,"pop does not affect any indices"),t.push(new r),t.push(new r),t.remove(0),e.equal(t.get(0).getID(),0,"remove(0) adjusts all following indices"),e.equal(t.get(1).getID(),1,"remove(0) adjusts all following indices"),e.equal(t.get(2).getID(),2,"remove(0) adjusts all following indices"),t.remove(1),e.equal(t.get(0).getID(),0,"remove(1) adjusts all following indices"),e.equal(t.get(1).getID(),1,"remove(2) adjusts all following indices"),t.clear(),e.equal(t.length,0,"clearing a non-empty list does not throw"),t=new i,t.clear(),e.equal(t.length,0,"clearing an empty list does not throw")})}}),define("list/test/indexedmodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),r=t("core/model"),i=t("list/indexedmodel"),e.test("IndexedModel",function(e){var t,o,s;e.ok(n.isSubclass(i,r),"IndexedModel is subclass of Model"),o={updatecount:0,onupdate:function(){o.updatecount+=1},reset:function(){o.updatecount=0},emitters:[]},t=new i,e.equal(t.getID(),-1,"empty initialization sets id to -1"),t.setID(0),e.equal(t.getID(),0,"setID(0) actually sets the id to 0, not -1"),t=new i(5),e.equal(t.getID(),5,"proper initialization sets id"),t.registerListener(o),t.setID(8),e.equal(t.getID(),8,"setID sets the id"),e.equal(o.updatecount,1,"setID emits update"),o.reset(),t.setID(8),e.equal(o.updatecount,0,"setID does not emit update if the ids are identical"),t.setID(),e.equal(t.getID(),-1,"empty setID sets the id to -1"),t.setID(5),s=t.save(),e.ok(s,"Model.save() returns something"),t=new i(3),e.equal(t.restore(s),!0,"restore() works"),e.equal(t.getID(),5,"save() and restore() work")})}}),define("list/test/lengthmodel",[],function(){return function(e,t){var n,i,r,o;n=t("lib/extend"),o=t("list/listmodel"),i=t("list/lengthmodel"),r=t("core/valuemodel"),e.test("LengthModel",function(e){var t,s,a;e.ok(n.isSubclass(i,r),"LengthModel is subclass of ValueModel"),a=!1;try{new i}catch(e){a=!0}e.ok(a,"empty construction fails"),s=new o([1,2,3]),t=new i(s),e.equal(t.get(),3,"constructor reads the initial length of the list"),s.pop(),e.equal(t.get(),2,"list.pop() is mirrored"),s.push("asd"),e.equal(t.get(),3,"list.push() is mirrored"),s.clear(),e.equal(t.get(),0,"list.clear() is mirrored")})}}),define("list/test/listmodel",[],function(){return function(e,t){var n,i,r,o;n=t("list/listmodel"),o=t("core/model"),r=t("lib/extend"),i=function(e){e&&(this.data="asd"+e),this.save=function(){return{d:this.data.replace(/^asd/,"")}},this.restore=function(e){return this.data="asd"+e.d,!0}},r(i,o),e.test("ListModel",function(e){var t,r,o,s,a,u,l;u={reset:function(){u.length=0,u.insertions=0,u.removals=0},onresize:function(e){u.length=e.length},oninsert:function(){u.insertions+=1},onremove:function(){u.removals+=1},emitters:[]},u.reset(),t=new n,t.registerListener(u),e.equal(t.length,0,"initial size is 0"),e.deepEqual(t.asArray(),[],"asArray returns empty array"),t.push(2),e.deepEqual(t.asArray(),[2],"first push"),e.equal(t.length,1,"size after first push is 1"),e.equal(u.length,1,"resize event fired on push"),e.equal(u.insertions,1,"insert event fired on push"),t.push(4),e.deepEqual(t.asArray(),[2,4],"second push"),e.equal(t.length,2,"size after second push is 2"),e.equal(u.length,2,"resize event fired on push"),t.insert(0,1),e.deepEqual(t.asArray(),[1,2,4],"insert at front"),e.equal(t.length,3,"size after insert is 3"),e.equal(u.length,3,"resize event fired on insert"),e.equal(u.insertions,3,"insert event fired on insert"),t.insert(3,5),e.deepEqual(t.asArray(),[1,2,4,5],"insert at end"),t.insert(2,3),e.deepEqual(t.asArray(),[1,2,3,4,5],"insert inbetween"),e.equal(t.length,5,"length after all inserts"),e.equal(u.insertions,5,"number of fired insert events matches number of insertions"),e.equal(t.get(0),1,"get 1"),e.equal(t.get(1),2,"get 2"),e.equal(t.get(2),3,"get 3"),e.equal(t.get(3),4,"get 4"),e.equal(t.get(4),5,"get 5"),e.equal(t.get(-1),void 0,"get out of bounds (index -1)"),e.equal(t.get(5),void 0,"get slightly out of bounds (index 5)"),e.equal(t.get(1234567890),void 0,"get wildly out of bounds (index 1234567890)"),e.equal(t.indexOf(1),0,"indexOf: first element"),e.equal(t.indexOf(5),4,"indexOf: last element"),e.equal(t.indexOf("unavailable"),-1,"indexOf: unavailable element"),e.equal(t.includes(1),!0,"includes: first element"),e.equal(t.includes(3),!0,"includes: middle element"),e.equal(t.includes(5),!0,"includes: last element"),e.equal(t.includes(0),!1,"includes: unavailable"),e.equal(t.includes(-1),!1,"includes: another unavailable"),e.equal(t.remove(0),1,"remove returns the removed object"),e.deepEqual(t.asArray(),[2,3,4,5],"remove at front"),e.equal(t.length,4,"length after remove"),e.equal(u.length,4,"resize event fired on remove"),e.equal(u.removals,1,"remove event fired on remove"),e.equal(t.pop(3),5,"pop returns the removed object"),e.deepEqual(t.asArray(),[2,3,4],"pop (remove at back)"),e.equal(t.length,3,"length after remove"),e.equal(u.removals,2,"remove event fired on pop"),e.equal(t.remove(1),3,"remove returns the removed object"),e.deepEqual(t.asArray(),[2,4],"remove inbetween"),e.equal(t.length,2,"length after remove"),e.equal(t.remove(123),void 0,"remove out of bounds does nothing"),e.deepEqual(t.asArray(),[2,4],"remove out of bounds"),e.equal(t.length,2,"length after remove out of bounds"),t.set(1,123),e.equal(t.length,2,"set does not change length"),e.deepEqual(t.asArray(),[2,123],"list.set actually sets the value"),e.equal(u.length,2,"resize event balanced on set() (may have been fired twice)"),u.reset(),e.equal(t.set(123,321),void 0,"set out of bounds doesn't to anything"),e.deepEqual(t.asArray(),[2,123],"set out of bounds really doesn't to anything"),e.equal(u.insertions,0,"set out of bounds doesn't fire insert event"),e.equal(u.removals,0,"set out of bounds doesn't fire remove event"),t.clear(),e.equal(t.length,0,"list length is 0 after clear"),e.equal(u.length,0,"resize event fired on clear)"),e.equal(u.removals,2,"clear fires remove events"),t.push(4),t.push(3),t.push(2),t.push(1),o=0,s=t.map(function(n,i,r){return e.equal(this,5,"map(): this === thisArg, "+i),e.equal(i,o,"map(): iterating in ascending order, "+i),e.equal(n,t.length-i,"first argument is the list content"+i),e.equal(r,t,"map(): third function argument is the list, "+i),o+=1,n*n},5),a=[16,9,4,1],e.deepEqual(s,a,"map(): return value is preserved"),t.clear(),e.equal(t.length,0,"cleared size is 0"),e.deepEqual(t.asArray(),[],"asArray returns empty array after clear"),r={tmp:!0,tmpLong:"very much so"},t.push(r),e.equal(t.get(0),r,"objects are directly referenced, not copied"),e.equal(t.pop(),r,"pop returns the popped object directly"),e.equal(t.length,0,"popped size is 0"),e.deepEqual(t.asArray(),[],"asArray returns empty array after pop"),t=new n,t.push(3),t.push(2),t.push(3),t.push(4),t.push(3),t.push("3"),e.equal(t.erase(3),3,"erase() returns number of removals"),e.equal(t.includes(3),!1,"erase removes all instances"),e.equal(t.indexOf(3),-1,"erased element has no index anymore"),e.equal(t.length,3,"erase resizes the list"),e.equal(t.erase("notfound"),0,"erase() returns 0 if not found"),t=new n,t.makeReadonly(),e.equal(t.insert,void 0,"makereadonly: insert() disabled"),e.equal(t.remove,void 0,"makereadonly: remove() disabled"),e.equal(t.push,void 0,"makereadonly: push() disabled"),e.equal(t.pop,void 0,"makereadonly: pop() disabled"),e.equal(t.clear,void 0,"makereadonly: clear() disabled"),e.equal(t.erase,void 0,"makereadonly: erase() disabled"),t=new n,t.push(5),t.push(3),t.push(4),t.push(2),t.push(3),t.push(1),l=t.save(),e.ok(l,"save() returns"),e.deepEqual(l,[5,3,4,2,3,1],"save() uses a list representation for raw types"),t=new n,e.ok(t.restore(l),"restore() returns"),e.deepEqual(t.asArray(),[5,3,4,2,3,1],"restore() restores the whole list"),t.clear(),t.push("Tuvero"),t.push("is"),t.push("awesome"),l=t.save(),e.deepEqual(l,["Tuvero","is","awesome"],"saved data object is just an array of strings"),t.clear(),t.push(new i(5)),t.push(new i(3)),t.push(new i(4)),t.push(new i(2)),t.push(new i(3)),t.push(new i(1)),l=t.save(),e.ok(l,"save() calls save() recursively"),e.ok(l[0].d,"save() really calls save() recursively"),e.ok(!l[0].save,"save() really really calls save() recursively"),t=new n,e.ok(t.restore(l,i),"restore() with Model Constructor returns"),e.equal(t.length,l.length,"restore() restores the length"),e.equal(t.get(0).data,"asd5","restore() constructs the object"),e.equal(t.get(1).data,"asd3","restore() constructs the object"),e.equal(t.get(2).data,"asd4","restore() constructs the object"),e.equal(t.get(3).data,"asd2","restore() constructs the object"),e.equal(t.get(4).data,"asd3","restore() constructs the object"),e.equal(t.get(5).data,"asd1","restore() constructs the object"),e.ok(t.restore(l,i),"restore() with Model Factory returns"),e.equal(t.length,l.length,"restore() restores the length"),e.equal(t.get(0).data,"asd5","restore() constructs the object"),e.equal(t.get(1).data,"asd3","restore() constructs the object"),e.equal(t.get(2).data,"asd4","restore() constructs the object"),e.equal(t.get(3).data,"asd2","restore() constructs the object"),e.equal(t.get(4).data,"asd3","restore() constructs the object"),e.equal(t.get(5).data,"asd1","restore() constructs the object")})}}),define("list/test/listupdatelistener",[],function(){return function(e,t){var n,i;n=t("list/listmodel"),i=t("list/listupdatelistener"),e.test("ListUpdateListener",function(e){var t,r,o;t=new n,t.push(1),o=0,r=new i(t,function(n){0===o&&e.equal(this,t,'callback "this" is the list'),o+=1}),e.ok(r,'construction via "new" works'),e.equal(o,0,"callback is not called on construction"),t.push(2),e.equal(o,1,"callback is called on push"),t.insert(0,3),e.equal(o,2,"callback is called on insert"),t.pop(),e.equal(o,3,"callback is called on pop"),t.remove(0),e.equal(o,4,"callback is called on remove"),t.erase(1),e.equal(o,5,"callback is called on erase"),t.clear(),e.equal(o,6,"callback is called on clear"),r.destroy(),t.push(5),e.equal(o,6,"listener is unregistered on destroy"),o=0,i.bind(t,function(){0===o&&e.equal(this,t,'callback "this" is the list'),o+=1}),e.ok(r,'construction via "bind()" works'),e.equal(o,0,"callback is not called on bind-construction"),t.push(2),e.equal(o,1,"callback is called on push"),t.insert(0,3),e.equal(o,2,"callback is called on insert"),t.pop(),e.equal(o,3,"callback is called on pop"),t.remove(0),e.equal(o,4,"callback is called on remove"),t.erase(5),e.equal(o,5,"callback is called on erase"),t.clear(),e.equal(o,6,"callback is called on clear")})}}),define("list/test/maplistmodel",[],function(){return function(e,t){var n,i,r;r=t("core/listener"),n=t("list/listmodel"),i=t("list/maplistmodel"),e.test("MapListModel",function(e){var t,o,s,a;t=new n,t.push(5),t.push(4),t.push(3),t.push(2),t.push(1),t.push(0),a=new n,a.push(1),a.push(3),a.push(5),o=new i(a,t),e.equal(o.length,a.length,"number of teams match after initialization"),e.deepEqual(o.asArray(),[4,2,0],"ids get translated"),s=new r(o),s=new r(o),s.success=!1,s.callcount=0,s.oninsert=function(){this.success=!0,this.callcount+=1},a.push(2),e.ok(s.success,'"insert" event is re-emitted'),e.equal(s.callcount,1,'"insert" is emitted exactly once'),e.equal(o.length,4,"new team gets added to the indices list"),s.destroy(),e.deepEqual(o.asArray(),[4,2,0,3],"ids get translated"),s=new r(o),s.success=!1,s.callcount=0,s.onremove=function(){this.success=!0,this.callcount+=1},a.remove(2),e.equal(a.length,3,"match has been removed from indices"),e.equal(o.length,3,"match has been removed from refs"),e.ok(s.success,'"remove" event propagates to the matchref'),e.equal(s.callcount,1,'"remove" is emitted exactly once'),e.deepEqual(o.asArray(),[4,2,3],"ids get translated")})}}),define("list/test/orderlistmodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("list/orderlistmodel"),r=t("list/listmodel"),e.test("OrderListModel",function(e){var t,o;e.ok(n.isSubclass(i,r),"OrderListModel is subclass of ListModel"),t=new i,e.equal(t.length,0,"initial length is 0"),e.deepEqual(t.asArray(),[],"initial list is empty"),o=[4,3,1,0,2],t.enforceOrder(o),e.equal(t.length,5,"length gets adjusted automatically"),e.deepEqual(t.asArray(),o,"elements get ordered properly"),o=[6,3,1,5,7,2,0,4],t.enforceOrder(o),e.equal(t.length,8,"length gets adjusted automatically"),e.deepEqual(t.asArray(),o,"elements get ordered properly"),o=[],t.enforceOrder(o),e.equal(t.length,0,"length gets reduced automatically"),e.deepEqual(t.asArray(),o,"elements get removed properly")})}}),define("list/test/readonlylistmodel",[],function(){return function(e,t){var n,i;n=t("list/listmodel"),i=t("list/readonlylistmodel"),e.test("ReadonlyListModel",function(e){var t,r,o,s,a,u,l;u={reset:function(){u.length=0,u.insertions=0,u.removals=0},onresize:function(e){u.length=e.length},oninsert:function(){u.insertions+=1},onremove:function(){u.removals+=1},emitters:[]},u.reset(),t=new n,l=new i(t),l.registerListener(u),e.equal(l.push,void 0,"ReadOnlyList.push: undefined"),e.equal(l.pop,void 0,"ReadOnlyList.pop: undefined"),e.equal(l.insert,void 0,"ReadOnlyList.insert: undefined"),e.equal(l.remove,void 0,"ReadOnlyList.remove: undefined"),e.equal(l.set,void 0,"ReadOnlyList.set: undefined"),e.equal(l.erase,void 0,"ReadOnlyList.erase: undefined"),e.equal(l.clear,void 0,"ReadOnlyList.clear: undefined"),e.equal(l.length,0,"initial size is 0"),e.deepEqual(l.asArray(),[],"asArray returns empty array"),t.push(2),e.deepEqual(l.asArray(),[2],"first push"),e.equal(l.length,1,"size after first push is 1"),e.equal(u.length,1,"resize event fired on push"),e.equal(u.insertions,1,"insert event fired on push"),t.push(4),e.deepEqual(l.asArray(),[2,4],"second push"),e.equal(l.length,2,"size after second push is 2"),e.equal(u.length,2,"resize event fired on push"),t.insert(0,1),e.deepEqual(l.asArray(),[1,2,4],"insert at front"),e.equal(l.length,3,"size after insert is 3"),e.equal(u.length,3,"resize event fired on insert"),e.equal(u.insertions,3,"insert event fired on insert"),t.insert(3,5),e.deepEqual(l.asArray(),[1,2,4,5],"insert at end"),t.insert(2,3),e.deepEqual(l.asArray(),[1,2,3,4,5],"insert inbetween"),e.equal(l.length,5,"length after all inserts"),e.equal(u.insertions,5,"number of fired insert events matches number of insertions"),e.equal(l.get(0),1,"get 1"),e.equal(l.get(1),2,"get 2"),e.equal(l.get(2),3,"get 3"),e.equal(l.get(3),4,"get 4"),e.equal(l.get(4),5,"get 5"),e.equal(l.get(-1),void 0,"get out of bounds (index -1)"),e.equal(l.get(5),void 0,"get slightly out of bounds (index 5)"),e.equal(l.get(1234567890),void 0,"get wildly out of bounds (index 1234567890)"),e.equal(l.indexOf(1),0,"indexOf: first element"),e.equal(l.indexOf(5),4,"indexOf: last element"),e.equal(l.indexOf("unavailable"),-1,"indexOf: unavailable element"),e.equal(t.remove(0),1,"remove returns the removed object"),e.deepEqual(l.asArray(),[2,3,4,5],"remove at front"),e.equal(l.length,4,"length after remove"),e.equal(u.length,4,"resize event fired on remove"),e.equal(u.removals,1,"remove event fired on remove"),e.equal(t.pop(3),5,"pop returns the removed object"),e.deepEqual(l.asArray(),[2,3,4],"pop (remove at back)"),e.equal(l.length,3,"length after remove"),e.equal(u.removals,2,"remove event fired on pop"),e.equal(t.remove(1),3,"remove returns the removed object"),e.deepEqual(l.asArray(),[2,4],"remove inbetween"),e.equal(l.length,2,"length after remove"),e.equal(t.remove(123),void 0,"remove out of bounds does nothing"),e.deepEqual(l.asArray(),[2,4],"remove out of bounds"),e.equal(l.length,2,"length after remove out of bounds"),t.set(1,123),e.equal(l.length,2,"set does not change length"),e.deepEqual(l.asArray(),[2,123],"list.set actually sets the value"),e.equal(u.length,2,"resize event balanced on set() (may have been fired twice)"),u.reset(),e.equal(t.set(123,321),void 0,"set out of bounds doesn't to anything"),e.deepEqual(l.asArray(),[2,123],"set out of bounds really doesn't to anything"),e.equal(u.insertions,0,"set out of bounds doesn't fire insert event"),e.equal(u.removals,0,"set out of bounds doesn't fire remove event"),t.clear(),e.equal(l.length,0,"list length is 0 after clear"),e.equal(u.length,0,"resize event fired on clear)"),e.equal(u.removals,2,"clear fires remove events"),t.push(4),t.push(3),t.push(2),t.push(1),o=0,s=l.map(function(t,n,i){return e.equal(this,5,"map(): this === thisArg, "+n),e.equal(n,o,"map(): iterating in ascending order, "+n),e.equal(t,l.length-n,"first argument is the list content"+n),e.equal(i,l,"map(): third function argument is the list, "+n),o+=1,t*t},5),a=[16,9,4,1],e.deepEqual(s,a,"map(): return value is preserved"),t.clear(),e.equal(l.length,0,"cleared size is 0"),e.deepEqual(l.asArray(),[],"asArray returns empty array after clear"),r={tmp:!0,tmpLong:"very much so"},t.push(r),e.equal(l.get(0),r,"objects are directly referenced, not copied"),e.equal(t.pop(),r,"pop returns the popped object directly"),e.equal(l.length,0,"popped size is 0"),e.deepEqual(l.asArray(),[],"asArray returns empty array after pop")})}}),define("list/test/referencelistmodel",[],function(){return function(e,t){var n,i,r,o,s;s=t("core/listener"),n=t("list/listmodel"),i=t("core/matchmodel"),o=t("core/matchreferencemodel"),r=t("list/referencelistmodel"),e.test("ReferenceListModel",function(e){var t,a,u,l,c;t=new n,t.push("5"),t.push("4"),t.push("3"),t.push("2"),t.push("1"),t.push("0"),a=new n,a.push(new i([1,2],0,0)),a.push(new i([0,5],1,0)),u=new r(a,t,o),e.equal(u.length,a.length,"number of teams match after initialization"),l=new s(u),l.success=!1,l.callcount=0,l.oninsert=function(){this.success=!0,this.callcount+=1},a.push(new i([4,3],2,0)),e.ok(l.success,'"insert" event is re-emitted'),e.equal(l.callcount,1,'"insert" is emitted exactly once'),e.equal(u.length,3,"new team gets added to the matches list"),l.destroy(),c=u.get(0),e.equal(c.getTeamID(0),4,"team id gets translated"),e.equal(c.getTeamID(1),3,"team id gets translated"),c=u.get(1),e.equal(c.getTeamID(0),5,"team id gets translated"),e.equal(c.getTeamID(1),0,"team id gets translated"),c=u.get(2),e.equal(c.getTeamID(0),1,"team id gets translated"),e.equal(c.getTeamID(1),2,"team id gets translated"),l=new s(c),l.numEvents=0,l.onfinish=function(){this.numEvents+=1},a.get(2).registerListener(l),a.get(2).finish([13,7]),e.equal(l.numEvents,2,'both "finish" events propagate to the matchref'),e.equal(a.length,3,"match has not been removed by finish()"),l.destroy(),l=new s(u),l.success=!1,l.callcount=0,l.onremove=function(){this.success=!0,this.callcount+=1},a.remove(2),e.equal(a.length,2,"match has been removed from matches"),e.equal(u.length,2,"match has been removed from refs"),e.ok(l.success,'"remove" event propagates to the matchref'),e.equal(l.callcount,1,'"remove" is emitted exactly once')})}}),define("list/test/sortedreferencelistmodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("list/sortedreferencelistmodel"),r=t("list/listmodel"),e.test("SortedReferenceListModel",function(e){var t,o,s,a;e.ok(n.isSubclass(i,r),"SortedReferenceListModel is subclass of ReferenceListModel"),t=new r,a=!1;try{o=new i}catch(e){a=!0}e.ok(a,"empty construction fails"),o=new i(t),e.ok(o,"proper construction"),e.equal(o.length,0,"initial sorted list is empty"),t.push(5),e.equal(o.length,1,"pushing to the original list is mirrored by sorted list"),e.deepEqual(o.asArray(),[5],"element has been appended"),t.push(2),t.push(1),t.push(4),e.deepEqual(o.asArray(),[1,2,4,5],"appended elements are inserted in sort order"),t.remove(1),e.deepEqual(o.asArray(),[1,4,5],"correct element is removed when removing from original list"),t.insert(2,3),e.deepEqual(o.asArray(),[1,3,4,5],"sorting arbitrary insertions into the original list "),t.clear(),e.equal(o.length,0,"clear() is mirrored"),t=new r([4,1,2,6,53]),o=new i(t),e.deepEqual(o.asArray(),[1,2,4,6,53],"pre-initialized list is sorted on construction"),t=new r(["Erik","Kai","Fabe"]),o=new i(t),e.deepEqual(o.asArray(),["Erik","Fabe","Kai"],"strings are sorted"),o=new i(t,i.descending),e.deepEqual(o.asArray(),["Kai","Fabe","Erik"],"descending order works, too"),s=function(e,t){return e%2-t%2||t-e},t=new r,o=new i(t,s),t.push(1),t.push(4),t.push(3),t.push(8),t.push(100),t.push(3),t.push(4),t.push(5),e.deepEqual(o.asArray(),[100,8,4,4,5,3,3,1],"arbitrary sort functions are accepyted"),s=function(){return 0},o=new i(t,s),e.deepEqual(o.asArray(),t.asArray(),"sortfunction with zeroing sortfunction: add element in list order on construction"),t.insert(2,13),e.deepEqual(o.asArray(),[1,4,3,8,100,3,4,5,13],"zeroing sortfunction: insertion order is not the initial list order!"),o=new i(t,void 0,!1),e.deepEqual(o.asArray(),[1,3,3,4,4,5,8,13,100],'non-"unique" mode'),o=new i(t,void 0,!0),e.deepEqual(o.asArray(),[1,3,4,5,8,13,100],'"unique" mode'),t.remove(3),e.deepEqual(o.asArray(),[1,4,5,8,13,100],"CAREFUL: remove() removes ALL references, not just the last one")})}}),define("list/test/uniquelistmodel",[],function(){return function(e,t){var n,i,r;n=t("list/listmodel"),i=t("core/uniquelistmodel"),r=t("lib/extend"),e.test("UniqueListModel",function(e){var t;e.ok(r.isSubclass(i,n),"UniqueListModel is subclass of ListModel"),t=new i,e.equal(t.push(1),1,"push works"),e.equal(t.push(2),2,"push works"),e.equal(t.push(1),void 0,"push aborts"),e.equal(t.push(3),3,"push works"),e.equal(t.push(1),void 0,"push aborts"),e.equal(t.push(5),4,"push works"),e.equal(t.push(1),void 0,"push aborts"),e.deepEqual(t.asArray(),[1,2,3,5],"push() inserts once"),e.equal(t.set(2,1),void 0,"set aborts"),e.deepEqual(t.asArray(),[1,2,3,5],"set() does not remove"),e.equal(t.set(2,4),4,"set works"),e.deepEqual(t.asArray(),[1,2,4,5],"set() still works"),e.equal(t.insert(2,1),void 0,"insert aborts"),e.deepEqual(t.asArray(),[1,2,4,5],"insert() doesnt insert"),e.equal(t.insert(2,3),3,"insert still works"),e.deepEqual(t.asArray(),[1,2,3,4,5],"insert() still works")})}}),define("math/test/absolutematrix",[],function(){return function(e,t){var n,i,r,o;n=t("math/absolutematrix"),i=t("math/delegatematrix"),r=t("math/matrixmodel"),o=t("lib/extend"),e.test("AbsoluteMatrix",function(e){var t,s;e.ok(o.isSubclass(n,i),"AbsoluteMatrix is a DelegateMatrix subclass"),s=new r(5),t=new n(s),[0,1,2,3,4].forEach(function(e){[0,1,2,3,4].forEach(function(n){s.set(e,n,12-(e*t.length+n))})}),e.equal(t.get(0,0),12,"get() get() returns the absolute value"),e.equal(t.get(3,2),5,"get() get() returns the absolute value"),e.equal(t.get(1,0),7,"get() get() returns the absolute value"),e.equal(t.get(2,2),0,"get() get() returns the absolute value"),e.equal(t.get(4,4),12,"get() get() returns the absolute value"),e.equal(t.get(-1,2),void 0,"get() out of bounds (row low)"),e.equal(t.get(2,-9),void 0,"get() out of bounds (col low)"),e.equal(t.get(5,3),void 0,"get() out of bounds (row high)"),e.equal(t.get(3,7531),void 0,"get() out of bounds (col high)")})}}),define("math/test/antisymmetricmatrixmodel",[],function(){return function(e,t){var n,i,r;n=t("math/matrixmodel"),i=t("math/antisymmetricmatrixmodel"),r=t("lib/extend"),e.test("AntisymmetricMatrixModel",function(e){var t;e.ok(r.isSubclass(i,n),"AntisymmetricMatrixModel is subclass of MatrixModel"),t=new i(5),e.equal(t.length,5,"length at initialization is accepted"),e.equal(t.set(0,4,5),t,"set() above the main diagonal works"),e.equal(t.get(0,4),5,"get() confirms the written value"),e.equal(t.get(4,0),-5,"get() confirms the antisymmetric mapping"),e.equal(t.set(2,2,5),t,"set() on the main diagonal works"),e.equal(t.get(2,2),5,"get() confirms the main diagonal value"),e.equal(t.set(4,3,3),t,"set() below main diagonal works"),e.equal(t.get(4,3),3,"get() confirms the value"),e.equal(t.get(3,4),-3,"get() confirms the antisymmetric value")})}}),define("math/test/delegatematrix",[],function(){return function(e,t){var n,i,r;n=t("math/delegatematrix"),i=t("math/matrixmodel"),r=t("lib/extend"),e.test("DelegateMatrix",function(e){var t,o,s;e.ok(r.isSubclass(n,i),"DelegateMatrix is a MatrixModel subclass"),s=!0;try{t=new n}catch(e){s=!1}e.equal(s,!1,"empty initialization fails"),s=!0;try{t=new n(5)}catch(e){s=!1}e.equal(s,!1,"initialization with size fails"),o=new i(5),t=new n(o),e.ok(t,"proper initialization"),s=!0;try{t.set(1,2,3)}catch(e){s=!1}e.equal(s,!1,"set() throws"),s=!0;try{t.remove(1)}catch(e){s=!1}e.equal(s,!1,"remove() throws"),s=!0;try{t.resize(1)}catch(e){s=!1}e.equal(s,!1,"resize() throws"),s=!0;try{t.fill(1)}catch(e){s=!1}e.equal(s,!1,"fill() throws"),[0,1,2,3,4].forEach(function(e){[0,1,2,3,4].forEach(function(n){o.set(e,n,12-(e*t.length+n))})}),e.equal(t.get(0,0),12,"get() delegates to the linked matrix"),e.equal(t.get(3,2),-5,"get() delegates to the linked matrix"),e.equal(t.get(1,0),7,"get() delegates to the linked matrix"),e.equal(t.get(4,4),-12,"get() delegates to the linked matrix"),e.equal(t.get(-1,2),void 0,"get() out of bounds (row low)"),e.equal(t.get(2,-9),void 0,"get() out of bounds (col low)"),
e.equal(t.get(5,3),void 0,"get() out of bounds (row high)"),e.equal(t.get(3,7531),void 0,"get() out of bounds (col high)")})}}),define("math/test/matrixmodel",[],function(){return function(e,t){var n,i;n=t("math/matrixmodel"),i=t("math/vectormodel"),e.test("MatrixModel",function(e){var t,r,o,s,a;t=new n,e.equal(t.length,0,"empty size initialization"),e.equal(t.get(0,0),void 0,"get(0,0): out of bounds"),t=new n(5),e.equal(t.length,5,"prefixed size initialization"),e.equal(t.get(0,0),0,"get(0,0) === 0 on size-initialized array"),e.equal(t.get(-1,1),void 0,"get(-1,1): out of bounds"),e.equal(t.get(1,-1),void 0,"get(1,-1): out of bounds"),e.equal(t.get(1,5),void 0,"get(1,5): out of bounds"),e.equal(t.get(5,1),void 0,"get(5,1): out of bounds"),t.resize(),e.equal(t.length,5,"resize() aborts on missing argument"),t.resize(3),e.equal(t.length,3,"resize() can shrink the array"),t.resize(10),e.equal(t.length,10,"resize() can extend the array"),e.equal(t.set(11,5,3),void 0,"set() out of bounds returns undefined"),e.equal(t.set(4,5,3),t,"set() inside bounds returns this"),e.equal(t.get(4,5),3,"get() returns the set value"),t.resize(6),e.equal(t.get(4,5),3,"get() returns the set value after resize (still in bounds)"),t.resize(5),e.equal(t.get(4,5),void 0,"get() returns the set value (now out of bounds)"),e.equal(t.set(0,0,5),t,"set at 0,0 is a valid operation"),e.equal(t.get(0,0),5,"set(0,0,...) actually sets the value"),e.equal(t.set(0,0,0),t,"set(0,0,0) does not abort"),e.equal(t.get(0,0),0,"get(0,0) after setting to 0 does not return undefined"),e.equal(t.set(1,2,3),t,"set(1,2) does not abort"),e.equal(t.get(1,2),3,"get(1,2) is valid before remove()"),e.equal(t.remove(2),t,"remove returns this"),e.equal(t.length,4,"remove reduces the size of the matrix"),e.equal(t.get(1,2),0,"get(1,2) after remove() now points to another element; returns 0"),t=new n(5),[0,1,2,3,4].map(function(e){[0,1,2,3,4].map(function(n){t.set(e,n,e*t.length+n)})}),r=new i,s=[0,6,12,18,24],e.equal(t.diagonal(r),r,"diagonal() returns the vector"),e.equal(r.length,5,"diagonal() resizes the vector"),e.deepEqual(r.asArray(),s,"diagonal has really been extracted"),o=new i,o.push(1),o.push(2),o.push(3),o.push(4),o.push(5),r.resize(0),s=[40,115,190,265,340],e.equal(t.multVector(r,o),r,"multVector() finished properly"),e.equal(r.length,5,"multVector resizes the output vector"),e.deepEqual(r.asArray(),s,"multVector performs flawlessly"),r.resize(0),s=[200,215,230,245,260],e.equal(t.vectorMult(r,o),r,"vectorMult() finished properly"),e.equal(r.length,5,"vectorMult resizes the output vector"),e.deepEqual(r.asArray(),s,"vectorMult performs flawlessly"),t=new n(2),t.set(0,0,1),t.set(0,1,2),t.set(1,0,3),t.set(1,1,4),t.fill(),e.equal(t.get(0,0),0,"fill() sets to 0"),e.equal(t.get(0,1),0,"fill() sets to 0"),e.equal(t.get(1,0),0,"fill() sets to 0"),e.equal(t.get(1,1),0,"fill() sets to 0"),t.fill(5),e.equal(t.get(0,0),5,"fill(5) sets to 5"),e.equal(t.get(0,1),5,"fill(5) sets to 5"),e.equal(t.get(1,0),5,"fill(5) sets to 5"),e.equal(t.get(1,1),5,"fill(5) sets to 5"),t=new n(5),t.set(1,2,3),t.set(0,0,5),t.set(0,4,-1),t.set(4,1,3),t.set(4,4,123),a=t.save(),e.ok(a,"save() works"),t=new n(12345),e.ok(t.restore(a),"restore() works"),e.equal(t.length,5,"restore() restored the length"),e.equal(t.get(1,2),3,"restore() restored individual numbers"),e.equal(t.get(0,0),5,"restore() restored individual numbers"),e.equal(t.get(0,4),-1,"restore() restored individual numbers"),e.equal(t.get(4,1),3,"restore() restored individual numbers"),e.equal(t.get(4,4),123,"restore() restored individual numbers"),t=new n(3),a=t.save(),e.ok(a,"save() with empty matrix"),t=new n(7),e.ok(t.restore(a),"restore() of an empty matrix"),e.equal(t.length,3,"restore(0 restored the length")})}}),define("math/test/positivematrix",[],function(){return function(e,t){var n,i,r,o;n=t("math/positivematrix"),i=t("math/delegatematrix"),r=t("math/matrixmodel"),o=t("lib/extend"),e.test("PositiveMatrix",function(e){var t,s;e.ok(o.isSubclass(n,i),"PositiveMatrix is a DelegateMatrix subclass"),s=new r(5),t=new n(s),[0,1,2,3,4].forEach(function(e){[0,1,2,3,4].forEach(function(n){s.set(e,n,12-(e*t.length+n))})}),e.equal(t.get(0,0),12,"get() returns the positive value"),e.equal(t.get(3,2),0,"get() returns the positive value"),e.equal(t.get(1,0),7,"get() returns the positive value"),e.equal(t.get(2,2),0,"get() returns the positive value"),e.equal(t.get(4,4),0,"get() returns the positive value"),e.equal(t.get(-1,2),void 0,"get() out of bounds (row low)"),e.equal(t.get(2,-9),void 0,"get() out of bounds (col low)"),e.equal(t.get(5,3),void 0,"get() out of bounds (row high)"),e.equal(t.get(3,7531),void 0,"get() out of bounds (col high)")})}}),define("math/test/symmetricmatrixmodel",[],function(){return function(e,t){var n,i,r;n=t("math/matrixmodel"),i=t("math/symmetricmatrixmodel"),r=t("lib/extend"),e.test("SymmetricMatrixModel",function(e){var t;e.ok(r.isSubclass(i,n),"SymmetricMatrixModel is subclass of MatrixModel"),t=new i(5),e.equal(t.length,5,"length at initialization is accepted"),e.equal(t.set(0,4,5),t,"set() above the main diagonal works"),e.equal(t.get(0,4),5,"get() confirms the written value"),e.equal(t.get(4,0),5,"get() confirms the symmetric mapping"),e.equal(t.set(2,2,5),t,"set() on the main diagonal works"),e.equal(t.get(2,2),5,"get() confirms the main diagonal value"),e.equal(t.set(4,3,3),t,"set() below main diagonal works"),e.equal(t.get(4,3),3,"get() confirms the value"),e.equal(t.get(3,4),3,"get() confirms the symmetric value")})}}),define("math/test/transposedifferencematrix",[],function(){return function(e,t){var n,i,r,o;n=t("math/transposedifferencematrix"),i=t("math/delegatematrix"),r=t("math/matrixmodel"),o=t("lib/extend"),e.test("TransposeDifferenceMatrix",function(e){var t,s;e.ok(o.isSubclass(n,i),"TransposeDifferenceMatrix is a DelegateMatrix subclass"),s=new r(5),t=new n(s),[0,1,2,3,4].forEach(function(e){[0,1,2,3,4].forEach(function(n){s.set(e,n,12-(e*t.length+n))})}),e.equal(t.get(0,0),0,"get() on diagonal returns 0"),e.equal(t.get(3,2),-4,"get() returns the transpose-difference"),e.equal(t.get(0,1),4,"get() returns the transpose-difference"),e.equal(t.get(2,2),0,"get() on diagonal returns 0"),e.equal(t.get(4,0),-16,"get() returns the transpose-difference"),e.equal(t.get(0,4),16,"get() is antisymmetric"),e.equal(t.get(-1,2),void 0,"get() out of bounds (row low)"),e.equal(t.get(2,-9),void 0,"get() out of bounds (col low)"),e.equal(t.get(5,3),void 0,"get() out of bounds (row high)"),e.equal(t.get(3,7531),void 0,"get() out of bounds (col high)")})}}),define("math/test/transposesummatrix",[],function(){return function(e,t){var n,i,r,o;n=t("math/transposesummatrix"),i=t("math/delegatematrix"),r=t("math/matrixmodel"),o=t("lib/extend"),e.test("TransposeSumMatrix",function(e){var t,s;e.ok(o.isSubclass(n,i),"TransposeSumMatrix is a DelegateMatrix subclass"),s=new r(5),t=new n(s),[0,1,2,3,4].forEach(function(e){[0,1,2,3,4].forEach(function(n){s.set(e,n,12-(e*t.length+n))})}),e.equal(t.get(0,0),24,"get() on diagonal returns a twice value"),e.equal(t.get(3,2),-6,"get() returns the transpose-sum"),e.equal(t.get(1,0),18,"get() returns the transpose-sum"),e.equal(t.get(2,2),0,"get() returns the transpose-sum"),e.equal(t.get(4,4),-24,"get() returns the transpose-sum"),e.equal(t.get(-1,2),void 0,"get() out of bounds (row low)"),e.equal(t.get(2,-9),void 0,"get() out of bounds (col low)"),e.equal(t.get(5,3),void 0,"get() out of bounds (row high)"),e.equal(t.get(3,7531),void 0,"get() out of bounds (col high)")})}}),define("math/test/trianglematrixmodel",[],function(){return function(e,t){var n,i,r;n=t("math/matrixmodel"),i=t("math/trianglematrixmodel"),r=t("lib/extend"),e.test("TriangleMatrixModel",function(e){var t;e.ok(r.isSubclass(i,n),"TriangleMatrixModel is subclass of MatrixModel"),t=new i(5),e.equal(t.length,5,"length at initialization is accepted"),e.equal(t.set(0,4,5),void 0,"set() above the main diagonal aborts, leaving the value at 0"),e.equal(t.get(0,4),0,"get() confirms the zero-value"),e.equal(t.set(2,2,5),t,"set() on the main diagonal works"),e.equal(t.get(2,2),5,"get() confirms the main diagonal value"),e.equal(t.set(4,3,3),t,"set() below main diagonal works"),e.equal(t.get(4,3),3,"get() confirms the value")})}}),define("math/test/vectormodel",[],function(){return function(e,t){var n,i,r;r=t("lib/extend"),n=t("list/listmodel"),i=t("math/vectormodel"),e.test("VectorModel",function(e){var t,o,s,a,u,l;e.ok(r.isSubclass(i,n),"VectorModel is subclass of ListModel"),t=new i,e.equal(t.length,0,"empty initialization: length is 0"),t.resize(123),e.equal(t.length,123,"resize() expands to the wanted length"),e.equal(t.get(0),0,"resize() fills with 0 (beg)"),e.equal(t.get(55),0,"resize() fills with 0 (mid)"),e.equal(t.get(122),0,"resize() fills with 0 (end)"),t.resize(5),e.equal(t.length,5,"resize() crops to the wanted length"),e.equal(t.get(122),void 0,"get() reads removed elements as undefined"),t.resize(-5),e.equal(t.length,0,"resize() to negative number crops to length 0"),t=new i(10),e.equal(t.sum(),0,"sum() of an empty/new vector is 0"),t.push(1),t.push(2),t.push(3),t.push(4),t.push(5),t.push(6),t.push(7),t.push(8),e.equal(t.sum(),36,"sum() returns the correct sum"),s=new i,o=new i(t.length),o.map(function(e,t){o.set(t,t)}),e.equal(s.mult(t,o),s,"mult does not fail"),e.equal(s.length,18,"mult resizes target"),a=[0,0,0,0,0,0,0,0,0,0,10,22,36,52,70,90,112,136],e.deepEqual(s.asArray(),a,"mult calculates the vector product"),e.equal(s.mult(t),s,"mult with one argument"),a=[0,0,0,0,0,0,0,0,0,0,10,44,108,208,350,540,784,1088],e.deepEqual(s.asArray(),a,"mult calculates the vector product"),e.equal(t.dot(o),528,"dot() calculates the dot product"),s.resize(0),e.equal(s.add(t,o),s,"add() returns the vector"),e.equal(s.length,18,"add() resizes the target vector"),a=[0,1,2,3,4,5,6,7,8,9,11,13,15,17,19,21,23,25],e.deepEqual(s.asArray(),a,"add calculates the element sum"),o.resize(15),s.resize(15),e.equal(s.add(o),s,"add() returns the vector"),a=[0,2,4,6,8,10,12,14,16,18,21,24,27,30,33],e.deepEqual(s.asArray(),a,"add calculates element sum"),s.fill(),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e.deepEqual(s.asArray(),a,"fill() resets the contents"),s.fill(5),a=[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],e.deepEqual(s.asArray(),a,"fill(5) sets the contents"),t=new i(5),t.set(0,5),t.set(1,4),t.set(2,3),t.set(3,2),t.set(4,1),u=!1;try{o.mult(t,5)}catch(e){u=!0}e.ok(u,"mult(VectorModel, Number) aborts as intended"),u=!0;try{o.mult(5,t)}catch(e){u=!1}e.ok(u,"mult(Number, VectorModel) aborts as intended"),a=[25,20,15,10,5],e.deepEqual(o.asArray(),a,"mult(Number) works properly"),u=!0;try{t.mult(5)}catch(e){u=!1}e.ok(u,"mult(Number, VectorModel) aborts as intended"),a=[25,20,15,10,5],e.deepEqual(t.asArray(),a,"mult(Number) works properly"),t=new i,o=new i(15),t.push(5),t.push(3),t.push(4),t.push(1),t.push(2),l=t.save(),e.ok(l,"save() does seem to work"),e.equal(o.restore(l),!0,"restore() works"),e.deepEqual(o.asArray(),[5,3,4,1,2],"restored values are correct"),t=new i,t.push(0),t.push(0),t.push(1),t.push(0),t.push(0),l=t.save(),t=new i,t.restore(l),e.deepEqual(t.asArray(),[0,0,1,0,0],"no undefined values in the array")})}}),define("ranking/test/rankingcomponentindex",[],function(){return function(e,t){var n,i;n=t("ranking/rankingcomponentindex"),i=t("core/type"),e.test("RankingComponentIndex",function(e){var t,r,o,s;for(r={},o=[],t=n.createComponentChain(r,o),e.equal(t,void 0,"chain creation fails without components"),o=["id"],t=n.createComponentChain(r,o),e.equal(i(t),"object","id: chain created"),e.deepEqual(t.dependencies,[],"id: no dependencies"),o=["points"],t=n.createComponentChain(r,o),e.equal(i(t),"object","points: chain created"),e.deepEqual(t.dependencies,["points"],"points dependency"),o=["wins"],t=n.createComponentChain(r,o),e.equal(i(t),"object","wins: chain created"),e.deepEqual(t.dependencies,["wins"],"wins dependency"),o="numgames,wins,points".split(","),t=n.createComponentChain(r,o),e.equal(i(t),"object","multiple: chain created"),e.deepEqual(t.dependencies,["points","wins","numgames"],"multiple dependencies, correct order."),s=0;t;)s+=1,t=t.nextcomponent;e.equal(s,o.length+1,"chain has correct length (components.length + DUMMYCOMPONENT)"),o="numgames,wtfisthis,points".split(","),t=n.createComponentChain(r,o),e.equal(t,void 0,"create aborts on unknown component")})}}),define("ranking/test/rankingdatalistenerindex",[],function(){return function(e,t){var n,i,r,o;n=t("ranking/rankingdatalistenerindex"),r=t("core/matchresult"),o=t("core/matchmodel"),i=t("core/emitter"),e.test("RankingDataListenerIndex",function(e){var t,s,a,u,l;a=new i,a.length=5,a.EVENTS={result:!0},t=[],s=n.registerDataListeners(a,t),e.deepEqual(t,[],"empty names: still valid input"),e.deepEqual(s,[],"empty names: no listeners"),t=["points"],s=n.registerDataListeners(a,t),e.deepEqual(t,["points"],"flat dependencies: valid names out"),e.deepEqual(s.length,1,"flat dependencies: one listener"),e.ok(a.points,"listener creates points field"),e.equal(a.points.length,a.length,"listener initializes points field size"),e.equal(a.points,s[0].points,"dummyRanking and listener share the reference"),u=new r(new o([1,4],0,0),[13,7]),a.emit("result",u),l=[0,13,0,0,7],e.deepEqual(a.points.asArray(),l,"single result accepted"),u=new r(new o([0,1],0,0),[5,11]),a.emit("result",u),u=new r(new o([3,2],0,0),[13,0]),a.emit("result",u),l=[5,24,0,13,7],e.deepEqual(a.points.asArray(),l,"multiple results work"),a=new i,a.length=5,t=["saldo"],s=n.registerDataListeners(a,t),e.deepEqual(t,["points","lostpoints","saldo"],"hidden dependencies: valid names and name order"),e.deepEqual(s.length,3,"hidden dependencies: additional listeners"),e.ok(a.points,"listener creates points field"),e.ok(a.lostpoints,"listener creates lostpoints field"),e.ok(a.saldo,"listener creates saldo field"),a=new i,a.length=5,t=["points","lostpoints","points"],s=n.registerDataListeners(a,t),e.deepEqual(t,["points","lostpoints"],"duplicate dependencies: removing duplicates"),e.deepEqual(s.length,2,"hidden dependencies: additional listeners"),a=new i,a.length=5,t=["points","wtfisthis","saldo"],s=n.registerDataListeners(a,t),e.equal(s,void 0,"undefined name -> abort"),e.deepEqual(t,["wtfisthis"],"undefined name -> names array contains undefined entries")})}}),define("ranking/test/rankingheadtohead",[],function(){return function(e,t){var n,i,r;n=t("ranking/rankingmodel"),i=t("core/matchresult"),r=t("core/matchmodel"),e.test("Head-to-Head Ranking",function(e){var t,o,s;t=new n(["wins","headtohead"],5),s={components:["wins","headtohead"],ids:[0,1,2,3,4],ranks:[0,0,0,0,0],displayOrder:[0,1,2,3,4],wins:[0,0,0,0,0],headtohead:["","","","",""]},o=t.get(),e.deepEqual(o,s,"empty ranking: correct H2H-score"),t.result(new i(new r([1,3],0,0),[7,13])),t.result(new i(new r([1,0],0,0),[13,9])),s={components:["wins","headtohead"],ids:[0,1,2,3,4],ranks:[2,1,2,0,2],displayOrder:[3,1,0,2,4],wins:[0,1,0,1,0],headtohead:["","","",1,""]},o=t.get(),e.deepEqual(o,s,"first ranking is correct"),t.result(new i(new r([0,3],0,0),[13,11])),s={components:["wins","headtohead"],ids:[0,1,2,3,4],ranks:[0,0,3,0,3],displayOrder:[0,1,3,2,4],wins:[1,1,0,1,0],headtohead:[1,1,"",1,""]},o=t.get(),e.deepEqual(o,s,"cyclic ranking finishes"),t=new n(["wins","headtohead","points"],6),s={components:["wins","headtohead","points"],ids:[0,1,2,3,4,5],ranks:[0,0,0,0,0,0],displayOrder:[0,1,2,3,4,5],wins:[0,0,0,0,0,0],headtohead:["","","","","",""],points:[0,0,0,0,0,0]},o=t.get(),e.deepEqual(o,s,"")})}}),define("ranking/test/rankingmapper",[],function(){return function(e,t){var n,i,r,o,s,a,u,l;n=t("lib/extend"),u=t("list/listmodel"),o=t("ranking/rankingmodel"),i=t("ranking/rankingmapper"),s=t("core/matchresult"),a=t("core/matchmodel"),r=t("core/model"),l=t("core/listener"),e.test("RankingMapper",function(e){var t,c,d,h,p;e.ok(n.isSubclass(i,r),"RankingMapper is subclass of Model"),h=new u,h.push(5),h.push(4),h.push(3),h.push(2),h.push(1),t=new o(["wins","saldo"],h.length),c=new i(t,h),p={components:["wins","saldo"],ids:[5,4,3,2,1],ranks:[0,0,0,0,0],displayOrder:[0,1,2,3,4],wins:[0,0,0,0,0],saldo:[0,0,0,0,0]},e.deepEqual(c.get(),p,"only the ids get re-mapped to external ids, not the displayOrder"),t.result(new s(new a([1,2],0,0),[13,7])),p={components:["wins","saldo"],ids:[5,4,3,2,1],ranks:[1,0,4,1,1],displayOrder:[1,0,3,4,2],wins:[0,1,0,0,0],saldo:[0,6,-6,0,0]},e.deepEqual(c.get(),p,"ids remapped after first result"),d=new l(c),d.onupdate=function(t){var n;this.success=!0,n={components:["wins","saldo"],ids:[5,4,3,2,1],ranks:[2,0,0,2,4],displayOrder:[1,2,0,3,4],wins:[0,1,1,0,0],saldo:[0,6,6,0,-12]},e.equal(t,c,"callback: emitter is ranking (safety check)"),e.deepEqual(t.get(),n,"ids remapped after second result, inside callback")},t.result(new s(new a([2,4],0,0),[13,1])),e.ok(d.success,"RankingMapper emits update events"),p={components:["wins","saldo"],ids:[5,4,3,2,1],ranks:[2,0,0,2,4],displayOrder:[1,2,0,3,4],wins:[0,1,1,0,0],saldo:[0,6,6,0,-12]},e.deepEqual(c.get(),p,"ids remapped after second result, outside of callback")})}}),define("ranking/test/rankingmodel",[],function(){return function(e,t){var n,i,r,o,s,a,u,l;n=t("ranking/rankingmodel"),o=t("core/matchresult"),s=t("core/matchmodel"),a=t("core/listener"),i=t("core/model"),u=t("options"),r=t("lib/extend"),l=t("core/correctionmodel"),e.test("RankingModel",function(e){var t,c,d,h,p,f;e.equal(u.byepointswon,13,"Options.byepointswon is set properly"),e.equal(u.byepointslost,7,"Options.byepointslost is set properly"),h=new a,h.reset=function(){this.updated=0,this.numreset=0,this.resized=0},h.onupdate=function(){this.updated+=1},h.onreset=function(){this.numreset+=1},h.onresize=function(){this.resized+=1},e.ok(r.isSubclass(n,i),"RankingModel is a subclass of Model and, hence, Emitter"),t=new n,e.ok(t,"empty initialization produces a valid ranking"),d={components:[],ids:[],displayOrder:[],ranks:[]},e.deepEqual(t.get(),d,"empty initialization produces a valid ranking"),t=new n([],5),e.ok(t,"empty components produce empty ranking"),e.equal(t.length,0,"empty ranking has no length"),t=new n([],5,["wins","points"]),e.deepEqual(t.extDeps,["wins","points"],"empty ranking does not ignore extra dependencies"),e.ok(t.points,"extradeps: wins are created and listening"),e.ok(t.wins,"extradeps: points are created and listening"),t=new n(["points"],5),e.ok(t,"valid initialization"),e.equal(t.length,5,"valid ranking size"),t=new n(["points"]),e.ok(t,"sizeless ranking can be created"),e.equal(t.length,0,"ranking size defaults to 0"),t=new n(["numgames","wins","saldo","points"],5),e.equal(t.dataListeners.numgames.isPrimary(),!0,"numgames is primary"),e.equal(t.dataListeners.wins.isPrimary(),!0,"wins is primary"),e.equal(t.dataListeners.saldo.isPrimary(),!1,"saldo is secondary"),e.equal(t.dataListeners.points.isPrimary(),!0,"points is primary"),e.equal(t.dataListeners.lostpoints.isPrimary(),!0,"lostpoints is primary"),t=new n(["numgames","wins"],5,["saldo"]),e.equal(t.dataListeners.saldo.isPrimary(),!1,"extraDependency: saldo is secondary"),e.equal(t.dataListeners.points.isPrimary(),!0,"extraDependency: points is primary"),e.equal(t.dataListeners.lostpoints.isPrimary(),!0,"extraDependency: lostpoints is primary"),t=new n(["numgames","wins","saldo","points"],5),h.reset(),t.registerListener(h),d={components:["numgames","wins","saldo","points"],ids:[0,1,2,3,4],ranks:[0,0,0,0,0],displayOrder:[0,1,2,3,4],numgames:[0,0,0,0,0],wins:[0,0,0,0,0],saldo:[0,0,0,0,0],points:[0,0,0,0,0]},c=t.get(),e.ok(c,"ranking.get works"),e.deepEqual(c,d,"empty ranking is not empty"),t.result(new o(new s([1,3],0,0),[13,7])),d={components:["numgames","wins","saldo","points"],ids:[0,1,2,3,4],ranks:[2,0,2,1,2],displayOrder:[1,3,0,2,4],numgames:[0,1,0,1,0],wins:[0,1,0,0,0],saldo:[0,6,0,-6,0],points:[0,13,0,7,0]},c=t.get(),e.ok(c,"ranking.get works"),e.deepEqual(c,d,"ranking is correct"),e.equal(h.updated,1,"result(): update event fired"),d=c,h.reset(),t.invalidate(),c=t.get(),e.ok(c!==d,"invalidate() triggers a recalculation"),e.equal(h.updated,1,"invalidate(): update event fired"),h.reset(),t.result(new o(new s([0,4],0,0),[0,11])),c=t.get(),d={components:["numgames","wins","saldo","points"],ids:[0,1,2,3,4],ranks:[3,1,4,2,0],displayOrder:[4,1,3,0,2],numgames:[1,1,0,1,1],wins:[0,1,0,0,1],saldo:[-11,6,0,-6,11],points:[0,13,0,7,11]},e.deepEqual(c,d,"second ranking is correct"),e.equal(h.updated,1,"result(): update event fired"),d={components:["wins","buchholz","finebuchholz","points"],ids:[0,1,2,3,4],displayOrder:[2,4,3,0,1],ranks:[3,4,0,2,1],wins:[0,0,2,1,1],buchholz:[2,2,1,0,2],finebuchholz:[2,1,4,2,3],points:[3,5,26,13,24]},t=new n(["wins","buchholz","finebuchholz","points"],5),e.equal(t.dataListeners.buchholz.isPrimary(),!1,"buchholz is secondary"),e.equal(t.dataListeners.finebuchholz.isPrimary(),!1,"finebuchholz is secondary"),e.equal(t.dataListeners.gamematrix.isPrimary(),!1,"gamematrix is secondary"),e.equal(t.dataListeners.points.isPrimary(),!0,"points is primary"),e.equal(t.dataListeners.wins.isPrimary(),!0,"wins is primary"),e.equal(t.dataListeners.winsmatrix.isPrimary(),!0,"winsmatrix is primary"),t.result(new o(new s([0,4],0,0),[3,13])),t.result(new o(new s([1,2],0,0),[5,13])),t.result(new o(new s([3,0],0,0),[13,0])),t.result(new o(new s([4,2],0,0),[11,13])),c=t.get(),e.deepEqual(c,d,"finebuchholz ranking is correct"),t=new n(["numgames","wins"],5),t.result(new o(new s([1,3],0,0),[13,0])),t.result(new o(new s([2,4],0,0),[0,13])),d={components:["numgames","wins"],ids:[0,1,2,3,4],ranks:[4,0,2,2,0],displayOrder:[1,4,2,3,0],numgames:[0,1,1,1,1],wins:[0,1,0,0,1]},c=t.get(),e.deepEqual(c,d,"ranks order is correct"),t=new n(["numgames","wins","points","lostpoints","saldo","buchholz","finebuchholz"],5),t.bye(2),d={components:["numgames","wins","points","lostpoints","saldo","buchholz","finebuchholz"],ids:[0,1,2,3,4],ranks:[1,1,0,1,1],displayOrder:[2,0,1,3,4],numgames:[0,0,1,0,0],wins:[0,0,1,0,0],points:[0,0,13,0,0],lostpoints:[0,0,-7,0,0],saldo:[0,0,6,0,0],buchholz:[0,0,0,0,0],finebuchholz:[0,0,0,0,0]},c=t.get(),e.deepEqual(c,d,"bye() is applied properly to all basic components"),t.bye([0,1,3]),d={components:["numgames","wins","points","lostpoints","saldo","buchholz","finebuchholz"],ids:[0,1,2,3,4],ranks:[0,0,0,0,4],displayOrder:[0,1,2,3,4],numgames:[1,1,1,1,0],wins:[1,1,1,1,0],points:[13,13,13,13,0],lostpoints:[-7,-7,-7,-7,0],saldo:[6,6,6,6,0],buchholz:[0,0,0,0,0],finebuchholz:[0,0,0,0,0]},c=t.get(),e.deepEqual(c,d,"bye() with multiple teams works (all teams receive bye)"),t.result(new o(new s([3,1],0,0),[13,7])),d={components:["numgames","wins","points","lostpoints","saldo","buchholz","finebuchholz"],ids:[0,1,2,3,4],ranks:[2,1,2,0,4],displayOrder:[3,1,0,2,4],numgames:[1,2,1,2,0],wins:[1,1,1,2,0],points:[13,20,13,26,0],lostpoints:[-7,-20,-7,-14,0],saldo:[6,0,6,12,0],buchholz:[0,2,0,1,0],finebuchholz:[0,1,0,2,0]},c=t.get(),e.deepEqual(c,d,"buchholz and finebuchholz include bye-induced wins"),t.resize(6),d={components:["numgames","wins","points","lostpoints","saldo","buchholz","finebuchholz"],ids:[0,1,2,3,4,5],ranks:[2,1,2,0,4,4],displayOrder:[3,1,0,2,4,5],numgames:[1,2,1,2,0,0],wins:[1,1,1,2,0,0],points:[13,20,13,26,0,0],lostpoints:[-7,-20,-7,-14,0,0],saldo:[6,0,6,12,0,0],buchholz:[0,2,0,1,0,0],finebuchholz:[0,1,0,2,0,0]},c=t.get(),e.deepEqual(c,d,"resize() is able to append a team to the ranking"),t.resize(3),d={components:["numgames","wins","points","lostpoints","saldo","buchholz","finebuchholz"],ids:[0,1,2],ranks:[1,0,1],displayOrder:[1,0,2],numgames:[1,2,1],wins:[1,1,1],points:[13,20,13],lostpoints:[-7,-20,-7],saldo:[6,0,6],buchholz:[0,0,0],finebuchholz:[0,0,0]},c=t.get(),e.deepEqual(c,d,"resize() shrinks without changing the actual values"),t.reset(),d={components:[],ids:[],displayOrder:[],ranks:[]},c=t.get(),e.deepEqual(c,d,"reset() restores to an empty ranking"),e.deepEqual(t.length,0,"reset() resizes to 0"),t=new n(["wins","saldo"],5),t.bye(3),t.result(new o(new s([2,0],0,0),[13,8])),t.result(new o(new s([1,4],0,0),[11,9])),p=t.save(),e.ok(p,"save() works"),t=new n,e.equal(t.restore(p),!0,"restore() succeeds"),f=t.get(),d={components:["wins","saldo"],ids:[0,1,2,3,4],ranks:[4,2,1,0,3],displayOrder:[3,2,1,4,0],wins:[0,1,1,1,0],saldo:[-5,2,5,6,-2]},e.deepEqual(f,d,"restore restores the proper stuff"),t.correct(new l(new o(new s([2,0],0,0),[13,8]),new o(new s([2,0],0,0),[8,13]))),d={components:["wins","saldo"],ids:[0,1,2,3,4],ranks:[1,2,4,0,3],displayOrder:[3,0,1,4,2],wins:[1,1,0,1,0],saldo:[5,2,-5,6,-2]},f=t.get(),e.deepEqual(f,d,"restore restores the proper stuff"),t=new n(["id"],5),p=t.save(),t=new n,t.restore(p),e.equal(t.length,5,"restore() of an id-only ranking also restores the length"),d={components:["id"],ids:[0,1,2,3,4],ranks:[0,1,2,3,4],displayOrder:[0,1,2,3,4],id:[0,1,2,3,4]},e.deepEqual(t.get(),d,"id ranking is in correct order")})}}),define("ranking/test/rankingsonneborn",[],function(){return function(e,t){var n,i,r,o;n=t("ranking/rankingmodel"),i=t("core/matchresult"),r=t("core/matchmodel"),o=t("core/correctionmodel"),e.test("Sonneborn-Berger Ranking",function(e){var t,s,a;t=new n(["wins","sonneborn"],5),s={components:["wins","sonneborn"],ids:[0,1,2,3,4],ranks:[0,0,0,0,0],displayOrder:[0,1,2,3,4],sonneborn:[0,0,0,0,0],wins:[0,0,0,0,0]},a=t.get(),e.deepEqual(a,s,"empty ranking: correct SB-score"),t.result(new i(new r([1,3],0,0),[13,7])),s={components:["wins","sonneborn"],ids:[0,1,2,3,4],ranks:[1,0,1,1,1],displayOrder:[1,0,2,3,4],sonneborn:[0,0,0,0,0],wins:[0,1,0,0,0]},a=t.get(),e.deepEqual(a,s,"first ranking is correct"),t.result(new i(new r([0,4],0,0),[0,11])),a=t.get(),s={components:["wins","sonneborn"],ids:[0,1,2,3,4],ranks:[2,0,2,2,0],displayOrder:[1,4,0,2,3],sonneborn:[0,0,0,0,0],wins:[0,1,0,0,1]},e.deepEqual(a,s,"second ranking is correct"),t.result(new i(new r([1,4],0,0),[13,12])),s={components:["wins","sonneborn"],ids:[0,1,2,3,4],ranks:[2,0,2,2,1],displayOrder:[1,4,0,2,3],sonneborn:[0,1,0,0,0],wins:[0,2,0,0,1]},a=t.get(),e.deepEqual(a,s,"third ranking is correct"),t.result(new i(new r([1,2],0,0),[5,13])),t.result(new i(new r([3,0],0,0),[13,0])),t.result(new i(new r([4,2],0,0),[11,13])),s={components:["wins","sonneborn"],ids:[0,1,2,3,4],ranks:[4,1,0,2,2],displayOrder:[2,1,3,4,0],sonneborn:[0,2,3,0,0],wins:[0,2,2,1,1]},a=t.get(),e.deepEqual(a,s,"final ranking is correct"),t.correct(new o(new i(new r([3,0],0,0),[13,0]),new i(new r([3,0],0,0),[0,13]))),s={components:["wins","sonneborn"],ids:[0,1,2,3,4],ranks:[3,1,0,4,2],displayOrder:[2,1,4,0,3],sonneborn:[0,1,3,0,1],wins:[1,2,2,0,1]},a=t.get(),e.deepEqual(a,s,"correction is correct")})}}),define("ranking/test/rankingtac",[],function(){return function(e,t){var n,i,r,o,s;n=t("ranking/rankingmodel"),i=t("core/matchresult"),r=t("core/matchmodel"),s=t("core/correctionmodel"),o=t("options"),e.test("TAC Ranking",function(e){var t,a,u,l;l={byepointswon:o.byepointswon,byepointslost:o.byepointslost,maxpoints:o.maxpoints},o.byepointswon=8,o.byepointslost=6,o.maxpoints=8,t=new n(["tac","wins","points"],5),e.equal(t.dataListeners.tac.isPrimary(),!0,"tac is a primary dataListener"),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[0,0,0,0,0],displayOrder:[0,1,2,3,4],wins:[0,0,0,0,0],points:[0,0,0,0,0],tac:[0,0,0,0,0]},a=t.get(),e.deepEqual(a,u,"empty ranking: correct TAC score"),t.result(new i(new r([1,3],0,0),[8,7])),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[2,0,2,1,2],displayOrder:[1,3,0,2,4],wins:[0,1,0,0,0],points:[0,8,0,7,0],tac:[0,13,0,7,0]},a=t.get(),e.deepEqual(a,u,"first ranking is correct"),t.result(new i(new r([0,4],0,0),[0,8])),a=t.get(),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[3,1,4,2,0],displayOrder:[4,1,3,0,2],wins:[0,1,0,0,1],points:[0,8,0,7,8],tac:[1,13,0,7,20]},e.deepEqual(a,u,"second ranking is correct (0 -> 1)"),t.result(new i(new r([1,4],0,0),[8,5])),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[3,0,4,2,1],displayOrder:[1,4,3,0,2],wins:[0,2,0,0,1],points:[0,16,0,7,13],tac:[1,28,0,7,25]},a=t.get(),e.deepEqual(a,u,"third ranking is correct"),t.result(new i(new r([1,2],0,0),[3,8])),t.result(new i(new r([3,0],0,0),[8,0])),t.result(new i(new r([4,2],0,0),[8,6])),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[4,1,3,2,0],displayOrder:[4,1,3,2,0],wins:[0,2,1,1,2],points:[0,19,14,15,21],tac:[2,31,23,27,39]},a=t.get(),e.deepEqual(a,u,"final ranking is correct"),t.result(new i(new r([0,2],0,0),[7,6])),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[4,1,2,3,0],displayOrder:[4,1,2,3,0],wins:[1,2,1,1,2],points:[7,19,20,15,21],tac:[9,31,29,27,39]},a=t.get(),e.deepEqual(a,u,"aborted game points are saldo only"),t.result(new i(new r([1,3],0,0),[5,5])),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[4,1,3,2,0],displayOrder:[4,1,3,2,0],wins:[1,2,1,1,2],points:[7,24,20,20,21],tac:[9,36,29,32,39]},a=t.get(),e.deepEqual(a,u,"aborted game points, equal"),t.correct(new s(new i(new r([0,2],0,0),[7,6]),new i(new r([0,2],0,0),[5,8]))),u={components:["tac","wins","points"],ids:[0,1,2,3,4],ranks:[4,2,1,3,0],displayOrder:[4,2,1,3,0],wins:[0,2,2,1,2],points:[5,24,22,20,21],tac:[7,36,38,32,39]},a=t.get(),e.deepEqual(a,u,"correct() works correctly with TAC"),t=new n(["tac"],2),t.result(new i(new r([0,1],0,0),[8,0])),u=t.get(),t.correct(new s(new i(new r([0,1],0,0),[8,0]),new i(new r([0,1],0,0),[8,7]))),t.correct(new s(new i(new r([0,1],0,0),[8,7]),new i(new r([0,1],0,0),[8,0]))),a=t.get(),e.deepEqual(a,u,'undo a correction yields original result ("one point for 0:8" is undone correctly)'),t=new n(["tac"],2),t.bye(1),u={components:["tac"],ids:[0,1],ranks:[1,0],displayOrder:[1,0],tac:[0,12+o.byepointswon-o.byepointslost]},a=t.get(),e.deepEqual(a,u,"tac accepts byes"),t.bye(1),u.tac[1]*=2,a=t.get(),e.deepEqual(a,u,"tac accepts multiple byes"),o.byepointswon=l.byepointswon,o.byepointslost=l.byepointslost,o.maxpoints=l.maxpoints})}}),define("timemachine/test/keymodel",[],function(){return function(e,t){var n,i,r,o;n=t("lib/extend"),i=t("timemachine/keymodel"),r=t("core/model"),o=t("presets"),e.test("KeyModel",function(e){function t(t,n){var r=!1;s=void 0;try{s=i.fromString(t)}catch(e){r=!0}(s||void 0===t)&&(r=!1),e.equal(r,!0,"forbidden key is intercepted: "+n)}var s,a,u,l;e.ok(n.isSubclass(i,r),"KeyModel is subclass of Model"),s=i.createRoot(),e.ok(s,"empty initialization works (init-key)"),e.ok(s.toString(),"init-key serialization works"),e.ok(s.startDate,"init-key startDate is set"),e.ok(s.saveDate,"init-key saveDate is set"),e.equal(s.startDate,s.saveDate,"init-key dates match"),e.equal(s.target,o.target,"init-key target matches"),e.equal(i.isValidKey(s.toString()),!0,"serialized init-key is a valid key"),e.equal(s.isRoot(),!0,"init-key is an init key"),e.equal(s.isRelated(s),!0,"init-key is actually related to itself"),e.equal(s.isRelated(s.toString()),!0,"key string is related to itself"),e.equal(s.isEqual(s),!0,"key is equal to itself"),e.equal(s.isEqual(s.toString()),!0,"key string is equal to itself"),l=new Date(s.startDate),e.ok(l,"startDate can be converted to an instance of Date"),e.equal(l.toISOString(),s.startDate,"Date conversion is fully reversible"),a=i.createChild(s),e.ok(a,"reference initialization works (save-key)"),e.ok(a.toString(),"save-key serialization works"),e.ok(a.startDate,"save-key startDate is set"),e.ok(a.saveDate,"save-key saveDate is set"),e.equal(a.target,o.target,"save-key target matches current target"),e.notEqual(a.startDate,a.saveDate,"save-key dates are not equal"),e.equal(a.startDate,s.startDate,"both keys have the same start date"),l=new Date(s.saveDate),e.ok(l,"saveDate can be converted to an instance of Date"),e.equal(l.toISOString(),s.saveDate,"Date conversion is fully reversible"),e.equal(i.isValidKey(a),!0,"key2 is a valid key"),e.equal(a.isRoot(),!1,"save-key is no init key"),e.equal(a.isEqual(a),!0,"key2 is equal to itself"),e.equal(a.isRelated(a),!0,"key2 is related to itself"),e.equal(s.isRelated(a),!0,"key is related to key2"),e.equal(s.isEqual(a),!1,"key is not equal to key2"),
e.equal(s.isRelated(a),!0,"key is related to key2"),e.equal(s.isEqual(a),!1,"key is not equal to key2"),u="test_2016-02-11T17:36:50.123Z_2016-02-11T18:23:02.543Z",e.equal(i.isValidKey(u),!0,"ref is a valid key: "+u),s=i.fromString(u),e.ok(s,"string-key construction works"),e.equal(s.toString(),u,"data is read and reconstructed as-is"),e.equal(s.isEqual(u),!0,"key is equal to its construction string"),e.equal(i.isValidKey(s),!0,"string-constructed key is a valid key"),e.equal(s.isRoot(),!1,"string-key is no init key"),e.equal(s.isEqual(a),!1,"unrelated keys are unequal"),e.equal(s.isRelated(a),!1,"unrelated keys are unrelated"),u="boule_2016-02-11T17:36:50.123Z_2016-02-11T18:23:02.543Z",e.equal(i.isTuveroKey(u),!0,"cross-target key is a tuvero key: "+u),e.equal(i.isValidKey(u),!1,"cross-target key is not valid: "+u),u="basic_2016-02-11T17:36:50.123Z_2016-02-11T18:23:02.543Z",e.equal(i.isTuveroKey(u),!0,"cross-target key is a tuvero key: "+u),e.equal(i.isValidKey(u),!1,"cross-target key is not valid: "+u),e.ok(o.target,"test",'Tuvero Test target is "test"'),s=void 0,t("","empty key"),t("test_2016-02-11T17:36:50Z_2016-02-11T18:23:02Z","missing milliseconds"),t("test_2016-02-11T17:36:50.012Z","only one date"),t("test_2016-02-11T17:36:50.123_2016-02-11T18:23:02.543","Z missing"),t("test_20160211T17:36:50.123Z_20160211T18:23:02.543Z","date delimiters missing"),t("test_2016-02-11T173650.123Z_2016-02-11T182302.543Z","time delimiters missing"),t("test-2016-02-11T17:36:50.123Z-2016-02-11T18:23:02.543Z","wrong key delimiters"),t("test__2016-02-11T17:36:50.123Z__2016-02-11T18:23:02.543Z","too many key delimiters"),t("rotz_2016-02-11T17:36:50.123Z_2016-02-11T18:23:02.543Z","unallowed target"),t("boule_2016-02-11T17:36:50.123Z_2016-02-11T18:23:02.543Z","wrong target"),t("2016-02-11T17:36:50.123Z_2016-02-11T18:23:02.543Z","target missing"),t("test_2016-02-11-17:36:50.123Z_2016-02-11-18:23:02.543Z","T missing"),t("test-saves","key for another model"),t("TEST_2016-02-11T17:36:50.123Z_2016-02-11T18:23:02.543Z","wrong target case"),t("test_2016-02-11T17:36:50.123z_2016-02-11T18:23:02.543z","Z: wrong case"),t("test_2016-02-11t17:36:50.123Z_2016-02-11t18:23:02.543Z","T: wrong case")})}}),define("timemachine/test/query",[],function(){return function(e,t){var n,i,r,o;try{o=window.localStorage}catch(e){o={setItem:function(e,t){this[e]=t},removeItem:function(e){delete this[e]}}}n=t("timemachine/query"),i=t("timemachine/keymodel"),r=t("core/type"),n.source=o,e.test("Query",function(e){var t,s,a,u,l,c;t=new n(n.ALLKEYS),e.ok(t,"ALLKEYS construction successful"),e.ok(r.isArray(t.filter()),"filter() result is an array"),t.filter().forEach(function(t){var n=/test_/.test(t);e.equal(n,!0,"saved key matches target: "+t),n&&o&&o.removeItem(t)}),e.deepEqual(t.filter(),[],"ALL-query on cleared localStorage returns no results"),c="test_2016-02-12T12:10:11.591Z_2016-02-12T12:10:11.591Z",s=i.fromString(c),a=i.createChild(s),c="test_2015-06-01T19:55:12.512Z_2015-06-01T19:55:12.512Z",u=i.fromString(c),c="test_2015-06-01T19:55:12.512Z_2345-10-01T20:55:12.512Z",l=i.fromString(c),o&&(o.setItem(s,"test"),o.setItem(a,"test"),o.setItem(u,"test"),o.setItem(l,"test")),c=[s.toString(),a.toString(),u.toString(),l.toString()].sort(),e.deepEqual(t.filter(),c,"ALLKEYS returns all 4 test keys"),c=[s.toString(),u.toString()].sort(),t=new n(n.ROOTKEYS),e.ok(t,"ROOTKEYS construction successful"),e.deepEqual(t.filter(),c,"ROOTKEYS finds both init keys"),t=new n(n.LASTKEYS),e.ok(t,"LASTKEYS construction successful"),c=[a.toString(),l.toString()].sort(),e.deepEqual(t.filter(),c,"LASTKEYS finds both last saves"),t=new n(n.LATESTSAVE),e.ok(t,"LATESTKEYS construction successful"),c=[l.toString()].sort(),e.deepEqual(t.filter(),c,"LATESTSAVE finds the latest save"),c=[s.toString(),a.toString()].sort(),t=new n(s),e.ok(t,"construction from key successful"),e.deepEqual(t.filter(),c,"successful related-keys query 1"),t=new n(a),e.ok(t,"construction from key2 successful"),e.deepEqual(t.filter(),c,"successful related-keys query 2"),c=[u.toString(),l.toString()].sort(),t=new n(u),e.ok(t,"construction from key3 successful"),e.deepEqual(t.filter(),c,"successful related-keys query 3"),t=new n(l),e.ok(t,"construction from key4 successful"),e.deepEqual(t.filter(),c,"successful related-keys query 4"),o&&(o.removeItem(s),o.removeItem(a),o.removeItem(u),o.removeItem(l)),e.deepEqual(new n(void 0).filter(),[],"ALL-query on post-test cleared localStorage returns no results")})}}),define("tournament/test/kotournamentmodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("tournament/kotournamentmodel"),r=t("tournament/tournamentmodel"),e.test("KOTournamentModel",function(e){var t,o,s,a;for(e.ok(n.isSubclass(i,r),"KOTournamentModel is subclass of TournamentModel"),t=[];t.length<=33;)t.push(t.length);o=t.map(function(e){return i.ceilPowerOfTwo(e)}),s=[1,1,2,4,4,8,8,8,8,16,16,16,16,16,16,16,16,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,64],e.deepEqual(o,s,"ceilPowerOfTwo()"),o=t.map(function(e){return i.nextRoundMatchID(e)}),s=[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16],e.deepEqual(o,s,"nextRoundMatchID()"),o=t.map(function(e){return i.isSecondInNextRound(e)}),s=[!1,!1,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0],e.deepEqual(o,s,"isSecondInNextRound()"),o=t.map(function(e){return i.complementaryMatchID(e)}),s=[1,0,3,2,5,4,7,6,9,8,11,10,13,12,15,14,17,16,19,18,21,20,23,22,25,24,27,26,29,28,31,30,33,32],e.deepEqual(o,s,"complementaryMatchID()"),o=t.slice(0,16).map(function(e){return i.firstMatchIDOfRound(e)}),s=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768],e.deepEqual(o,s,"firstMatchIDOfRound()"),o=t.slice(0,16).map(function(e){return i.numMatchesInRound(e)}),s=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768],e.deepEqual(o,s,"numMatchesInRound()"),o=t.map(function(e){return i.roundOfMatchID(e)}),s=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5],e.deepEqual(o,s,"roundOfMatchID()"),o=t.map(function(e){return i.loserGroupID(0,e)}),s=[0,0,1,1,2,2,2,2,4,4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16],e.deepEqual(o,s,"loserGroupID(0)"),o=t.map(function(e){return i.loserGroupID(8,e)}),s=s.map(function(e){return e+8}),e.deepEqual(o,s,"loserGroupID(8)"),o=t.map(function(e){return i.initialRoundForTeams(e)}),s=[-1,-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5],e.deepEqual(o,s,"loserGroupID()"),o=t.map(function(e){return i.roundsInGroup(e)}),s=[30,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1,5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1,6,1],e.deepEqual(o,s,"roundsInGroup()"),o=t.map(function(e){return i.parentGroup(e)}),s=[0,0,0,2,0,4,4,6,0,8,8,10,8,12,12,14,0,16,16,18,16,20,20,22,16,24,24,26,24,28,28,30,0,32],e.deepEqual(o,s,"parentGroup()"),a=new i,a.addTeam(0),a.addTeam(1),a.addTeam(2),e.ok(a.run(),"run() with 3 teams succeeds"),e.equal(a.getProperty("komode"),"matched",'initial ko mode is "matched"')})}}),define("tournament/test/roundtournamentmodel",[],function(){return function(e,t){var n,i,r,o,s,a;n=t("lib/extend"),i=t("tournament/roundtournamentmodel"),r=t("tournament/tournamentmodel"),e.test("RoundTournamentModel",function(e){var t,u,l,c;e.ok(n.isSubclass(i,r),"RoundTournamentModel is subclass of TournamentModel"),t=new i(["wins","sonneborn","saldo"]),e.ok(t,"proper construction works"),o=t.getMatches(),s=t.getVotes("bye"),a=t.getState(),t.addTeam(1),e.ok(!t.run(),"too few teams prohibit running the tournament"),t.addTeam(2),t.addTeam(3),t.addTeam(4),t.addTeam(5),e.ok(t.run(),"five teams work"),e.equal(o.length,2,"two games for 5 teams"),e.ok(o.get(0).getID()<o.get(1).getID(),"match ids are sorted"),u=o.map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{t:[1,4],i:0,g:0},{t:[2,3],i:1,g:0}],e.deepEqual(u,l,"first round: correct teams in the matches"),e.deepEqual(s.get(0),5,"first round: correct bye"),o.get(0).finish([13,7]),o.get(0).finish([11,13]),e.equal(a.get(),"idle","idle after games finished"),e.equal(o.length,0,"second round does not start automatically"),e.ok(t.run(),"second round starts manually"),e.equal(o.length,2,"second round started"),u=t.getMatches().asArray().map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{t:[1,3],i:0,g:1},{t:[5,2],i:1,g:1}],e.deepEqual(u,l,"second round: correct teams in the matches"),e.deepEqual(t.getVotes("bye").get(0),4,"second round: correct bye"),o.get(0).finish([13,4]),o.get(0).finish([13,8]),e.equal(a.get(),"idle","idle after games finished"),e.equal(o.length,0,"third round does not run automatically"),e.ok(t.run(),"third round started manually"),e.equal(o.length,2,"third round started"),u=t.getMatches().asArray().map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{t:[1,2],i:0,g:2},{t:[4,5],i:1,g:2}],e.deepEqual(u,l,"third round: correct teams in the matches"),e.deepEqual(t.getVotes("bye").get(0),3,"third round: correct bye"),o.get(0).finish([11,13]),o.get(0).finish([10,13]),e.equal(a.get(),"idle","idle after games finished"),e.equal(o.length,0,"fourth round does not start automatically"),e.ok(t.run(),"fourth round started manually"),e.equal(o.length,2,"fourth round started"),u=t.getMatches().asArray().map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{t:[1,5],i:0,g:3},{t:[3,4],i:1,g:3}],e.deepEqual(u,l,"fourth round: correct teams in the matches"),e.deepEqual(t.getVotes("bye").get(0),2,"fourth round: correct bye"),o.get(0).finish([13,2]),o.get(0).finish([13,0]),e.equal(a.get(),"idle","idle after games finished"),e.equal(o.length,0,"fifth round does not run automatically"),e.ok(t.run(),"fifth round started manually"),e.equal(o.length,2,"fifth round started"),u=t.getMatches().asArray().map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{t:[2,5],i:0,g:4},{t:[3,4],i:1,g:4}],e.deepEqual(u,l,"fifth round: correct teams in the matches"),e.deepEqual(t.getVotes("bye").get(0),1,"fifth round: correct bye"),o.get(0).finish([13,5]),o.get(0).finish([7,13]),e.equal(a.get(),"finished","5-team tournament finished after 5 rounds"),u=t.getRanking().get(),l={components:["wins","sonneborn","saldo"],ids:[1,2,3,4,5],displayOrder:[0,1,2,4,3],ranks:[0,1,2,4,3],saldo:[30,9,6,-10,-5],sonneborn:[8,7,5,3,5],wins:[4,3,3,2,3]},e.deepEqual(u,l,"final ranking is correct"),c=t.save(),e.ok(c,"save() works"),t=new i,e.ok(t,"emptyconstruction works"),o=t.getMatches(),s=t.getVotes("bye"),a=t.getState(),e.ok(t.restore(c),"restore() works"),u=t.getRanking().get(),e.deepEqual(u,l,"restored ranking is correct"),t=new i(["sonneborn"]),t.addTeam(7),t.addTeam(5),t.addTeam(3),t.addTeam(2),e.ok(t,"round tournament with 4 teams"),o=t.getMatches(),s=t.getVotes("bye"),a=t.getState(),t.run(),e.equal(a.get(),"running","tournament with 4 teams runs"),e.equal(s.length,0,"no byes for 4 teams"),e.equal(o.length,2,"two matches for 4 teams"),u=t.getMatches().asArray().map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{g:0,i:0,t:[7,2]},{g:0,i:1,t:[5,3]}],e.deepEqual(u,l,"round 1 for 4 teams has correct matches"),o.get(0).finish([13,8]),o.get(0).finish([10,13]),t.run(),u=t.getMatches().asArray().map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{g:1,i:0,t:[7,3]},{g:1,i:1,t:[2,5]}],e.deepEqual(u,l,"round 2 for 4 teams has correct matches"),o.get(0).finish([3,13]),o.get(0).finish([13,9]),t.run(),u=t.getMatches().asArray().map(function(e){return{t:e.teams,i:e.getID(),g:e.getGroup()}}),l=[{g:2,i:0,t:[7,5]},{g:2,i:1,t:[3,2]}],e.deepEqual(u,l,"round 3 for 4 teams has correct matches"),o.get(0).finish([13,4]),o.get(0).finish([13,9]),e.equal(a.get(),"finished","4-team tournament is finished after 3 rounds")})}}),define("tournament/test/swisstournamentmodel",[],function(){return function(e,t){var n,i,r,o;n=t("lib/extend"),i=t("tournament/swisstournamentmodel"),r=t("tournament/tournamentmodel"),o=t("math/vectormodel"),e.test("SwissTournamentModel",function(e){var t,o,s,a,u;e.ok(n.isSubclass(i,r),"SwissTournamentModel is subclass of TournamentModel"),t=[],s={},o=[],u=new i,a=u.findSwissByesAndMatches(o,s,t),e.ok(a,"findSwissByesAndMatches: empty groups array"),u.addTeam(0),t=[[0]],a=u.findSwissByesAndMatches(o,s,t),e.ok(a,"findSwissByesAndMatches: single team"),e.deepEqual(s.byes,[0],"single team: correct bye"),u.addTeam(1),u.addTeam(2),u.addTeam(3),u.addTeam(4),t=[[1,2,3,4]],s={},a=u.findSwissByesAndMatches(o,s,t),e.ok(a,"findSwissByesAndMatches: four teams"),e.deepEqual(o,[[1,2],[3,4]],"four teams: matches"),t=[[0,1,2,3]],s={},o=[],u.ranking.resize(u.length),u.ranking.winsmatrix.set(2,3,1),a=u.findSwissByesAndMatches(o,s,t),e.ok(a,"findSwissByesAndMatches: already played"),e.deepEqual(o,[[0,2],[1,3]],"already played: matches"),u=new i(["wins"]),u.addTeam(5),u.addTeam(4),u.addTeam(3),u.addTeam(2),u.addTeam(1),u.setProperty("swissmode",i.MODES.individual),e.ok(u.run(),"default test tournament"),e.deepEqual(u.getVotes("bye").asArray(),[1],"bye votes")})}}),define("tournament/test/tournamentindex",[],function(){return function(e,t){var n;n=t("tournament/tournamentindex"),e.test("TournamentIndex",function(e){e.equal(n.createTournament(),void 0,"empty construction fails"),e.equal(n.createTournament("undefined"),void 0,"undefined fails"),e.ok(n.createTournament("round"),"round"),e.ok(n.createTournament("swiss"),"swiss"),e.ok(n.createTournament("ko"),"ko"),e.equal(n.createTournament("poule"),void 0,"poule fails"),e.equal(n.createTournament({}),void 0,'savedata-passing without "sys" property fails'),e.ok(n.createTournament({sys:"round"}),"round-tournament with savedata"),e.equal(n.createTournament({sys:"poule"}),void 0,"poule-tournament with savedata fails")})}}),define("tournament/test/tournamentlistmodel",[],function(){return function(e,t){var n,i,r,o;n=t("lib/extend"),i=t("tournament/tournamentlistmodel"),o=t("tournament/tournamentindex"),r=t("list/indexedlistmodel"),e.test("TournamentListModel",function(e){var t,s,a,u;e.ok(n.isSubclass(i,r),"TournamentListModel is subclass of IndexedListModel"),s=new i,e.ok(s,"TournamentListModel construction works"),e.equal(s.length,0,"no initial entries"),e.deepEqual(s.tournamentIDsForEachTeam(),[],"no tournament ids yet"),t=o.createTournament("round",["sonneborn","id"]),t.addTeam(0),t.addTeam(1),t.addTeam(2),t.addTeam(4),s.push(t),a=[0,0,0,void 0,0],e.deepEqual(s.tournamentIDsForEachTeam(),a,"tournament ids for single tournament are correct"),t=o.createTournament("round",["sonneborn","id"]),t.addTeam(1),t.addTeam(3),t.addTeam(5),s.push(t),a=[0,1,0,1,0,1],e.deepEqual(s.tournamentIDsForEachTeam(),a,"tournament ids for two tournaments are correct"),s.get(0).state.forceState("finished"),a=[void 0,1,void 0,1,void 0,1],e.deepEqual(s.tournamentIDsForEachTeam(),a,"ids of finished tournaments are ignored (undefined)"),u=s.save(),e.ok(u,"save() returns properly"),s=new i,e.ok(s.restore(u),"restore() returns true"),e.deepEqual(s.tournamentIDsForEachTeam(),a,"restore() restores the ids for all players")})}}),define("tournament/test/tournamentmodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("tournament/tournamentmodel"),r=t("core/propertymodel"),e.test("TournamentModel",function(e){var t,o,s,a,u,l,c,d,h,p,f,m,g;e.ok(n.isSubclass(i,r),"TournamentModel is subclass of PropertyModel"),t=new i(["wins","saldo"]),e.ok(t,"construction works"),o=t.getState(),s=t.getTeams(),a=t.getMatches(),p=t.getHistory(),f=t.getCombinedHistory(),m=t.getCorrections(),u=t.getVotes("bye"),c=t.getRanking(),e.ok(o,"getState() returns"),e.ok(s,"getTeams() returns"),e.ok(a,"getMatches() returns"),e.ok(p,"getHistory() returns"),e.ok(f,"getHistory() returns"),e.ok(m,"getCorrections() returns"),e.ok(u,"getTeams() returns"),e.ok(c,"getRanking() returns"),e.equal(o.get(),"initial","tournament is constructed in initial state"),e.equal(s.length,0,"no teams registered initially"),e.equal(a.length,0,"no matches in initial state"),e.equal(u.length,0,"no byes in initial state"),e.equal(t.getVotes("unknownVoteType"),void 0,"undefined vote type returns undefined"),e.equal(t.run(),void 0,"run() aborts with insufficient teams"),e.equal(t.addTeam(5),!0,"addTeam works"),e.equal(t.addTeam(4),!0,"addTeam works"),e.equal(t.addTeam(3),!0,"addTeam works"),e.equal(t.addTeam(2),!0,"addTeam works"),e.equal(t.addTeam(1),!0,"addTeam works"),e.equal(s.length,5,"teams: length gets updated"),e.equal(t.teams.length,5,"teams: length gets updated"),e.equal(t.getID(),-1,"initial id is -1"),t.setID(5),e.equal(t.getID(),5,"id can be changed with setID()"),e.equal(t.run(),!0,"run() works with sufficient teams"),e.equal(o.get(),"running",'state is set to "running"'),e.equal(a.length,1,"matches have been generated"),e.equal(u.length,1,"byes have been generated"),l=a.get(0),e.equal(l.getTeamID(0),5,"global team id in match"),e.equal(l.getTeamID(1),4,"global team id in match"),e.equal(u.get(0),3,"global team id in bye"),e.ok(l.finish([12345,-53]),"match.finish() with invalid score points"),e.equal(a.length,1,"match has not been finished"),e.equal(p.length,0,"match has not been pushed to history"),e.equal(f.length,1,"combinedHistory contains an element"),e.equal(t.finish(),!1,"tournament cannot be finished when there are open matches"),e.ok(l.finish([13,7]),"match.finish() with proper scores"),e.equal(a.length,0,"match has been finished"),e.equal(p.length,1,"match has been pushed to history"),g=p.get(0),e.equal(g.length,2,"history: length of match matches"),e.equal(g.getTeamID(0),5,"history: global team id in match"),e.equal(g.getTeamID(1),4,"history: global team id in match"),e.equal(o.get(),"idle","auto-transition to idle state after last match"),e.equal(u.length,0,"votes are cleared before transition to idle state"),d={components:["wins","saldo"],ids:[5,4,3,2,1],ranks:[0,4,1,1,1],displayOrder:[0,2,3,4,1],wins:[1,0,0,0,0],saldo:[6,-6,0,0,0]},e.deepEqual(c.get(),d,"ranking validation"),e.equal(t.run(),!0,"run() works with sufficient teams"),e.equal(o.get(),"running",'state is set to "running"'),e.equal(a.length,1,"matches have been generated"),e.equal(u.length,1,"byes have been generated"),e.equal(p.length,1,"history contains a match and a bye"),e.equal(f.length,2,"combined history contains a current match, a finished match and the current bye"),l=a.get(0),e.equal(l.getTeamID(0),4,"global team id in match"),e.equal(l.getTeamID(1),3,"global team id in match"),e.equal(u.get(0),5,"global team id in bye"),e.equal(a.length,1,"match has not been finished"),e.ok(l.finish([13,7]),"match.finish() with proper scores"),e.equal(a.length,0,"match has been finished"),e.equal(o.get(),"idle","auto-transition to idle state after last match"),e.equal(u.length,0,"votes are cleared before transition to idle state"),d={components:["wins","saldo"],ids:[5,4,3,2,1],ranks:[0,1,4,2,2],displayOrder:[0,1,3,4,2],wins:[1,1,0,0,0],saldo:[6,0,-6,0,0]},e.deepEqual(c.get(),d,"ranking validation"),e.equal(t.finish(),!0,"tournament is finished"),e.equal(t.run(),void 0,"tournament cannot be un-finished"),e.deepEqual(c.get(),d,"ranking validation"),t=new i(["wins","saldo"]),t.addTeam(5),t.addTeam(3),t.addTeam(4),t.addTeam(2),t.addTeam(1),t.run(),t.getMatches().get(0).finish([8,13]),t.run(),t.setID(3),h=t.save(),e.ok(h,"save() finishes"),d=t,t=new i,e.ok(t.restore(h),"restore() finishes"),o=t.getState(),s=t.getTeams(),a=t.getMatches(),p=t.getHistory(),m=t.getCorrections(),u=t.getVotes("bye"),c=t.getRanking(),e.equal(t.getID(),3,"restore() restored the id"),e.deepEqual(s.asArray(),d.getTeams().asArray(),"restore() restored the teams"),e.equal(o.get(),"running",'restore() restored the "running" state'),e.equal(a.length,1,"restore() restored matches.length"),l=a.get(0),e.equal(l.getTeamID(0),3,"restore(): team id in match"),e.equal(l.getTeamID(1),4,"restore(): team id in match"),e.deepEqual(u.asArray(),[5],"restore() restored the byes"),e.deepEqual(c.get(),d.getRanking().get(),"restore() restored the whole ranking"),g=p.get(0),e.equal(p.length,1,"restore(): history size"),e.equal(g.length,2,"restore(): restored number of teams in history result"),e.equal(g.getTeamID(0),5,"restore() history team id 1"),e.equal(g.getTeamID(1),3,"restore() history team id 2")})}}),define("ui/test/binarytreemodel",[],function(){return function(e,t){var n,i,r;n=t("lib/extend"),i=t("ui/binarytreemodel"),r=t("list/indexedmodel"),e.test("BinaryTreeModel",function(e){var t;e.ok(n.isSubclass(i,r),"BinaryTreeModel is subclass of IndexedModel"),t=new i,e.equal(t.getID(),1,"default ID === 1"),e.equal(t.getParentID(),0,"parent ID === 0"),e.equal(t.getLeftChildID(),2,"left child ID === 1"),e.equal(t.getRightChildID(),3,"right child ID === 1"),e.equal(t.getSiblingID(),1,"default ID === 1"),e.equal(t.getDepth(),0,"default depth === 0"),t=new i(439),e.equal(t.getID(),439,"ID(439) === 1"),e.equal(t.getParentID(),219,"parent ID(439) === 0"),e.equal(t.getLeftChildID(),878,"left child ID(439) === 1"),e.equal(t.getRightChildID(),879,"right child ID(439) === 1"),e.equal(t.getSiblingID(),438,"sibling ID(439) === 1"),e.equal(t.getDepth(),8,"Depth(439) === 0"),t=new i(0),e.equal(t.getID(),0,"default ID === 1"),e.equal(t.getParentID(),0,"parent ID === 0"),e.equal(t.getLeftChildID(),1,"left child ID === 1"),e.equal(t.getRightChildID(),1,"right child ID === 1"),e.equal(t.getSiblingID(),0,"default ID === 1"),e.equal(t.getDepth(),0,"default depth === 0")})}}),define("ui/test/listcollectormodel",[],function(){return function(e,t){var n,i,r;r=t("core/valuemodel"),n=t("list/listmodel"),i=t("ui/listcollectormodel"),e.test("ListCollectorModel",function(e){var t,o,s,a;s={updatecount:0,onupdate:function(){s.updatecount+=1},emitters:[]},o=new n,t=new i(o,r),t.registerListener(s),e.equal(t.emitters.length,0,"starting without any emitters"),o.push(new r),e.equal(t.emitters.length,1,"automatically adding emitters"),o.get(0).set(5),e.equal(s.updatecount,1,"recieving update events from inside the list"),a=o.pop(),e.equal(t.emitters.length,0,"unregistering from emitters when they are removed from the list"),s.updatecount=0,a.set(8),e.equal(s.updatecount,0,"removed emitters are unregistered from"),o.push(a),o.push(a),o.push(a),s.updatecount=0,a.set(13),e.equal(s.updatecount,1,"events of multiply inserted emitters are re-emitted exactly once"),o.pop(),s.updatecount=0,a.set(20),e.equal(s.updatecount,1,"not unregistering a multiply inserted element if removed once")})}});define("ui/test/playermodel",[],function(){return function(e,t){var n;n=t("ui/playermodel"),e.test("PlayerModel",function(e){var t,i,r,o;o={updatecount:0,onupdate:function(){o.updatecount+=1},reset:function(){o.updatecount=0},emitters:[]},t=new n,t.registerListener(o),r=n.NONAME,i=t.getName(),e.equal(i,r,"initialization without argument"),t.setName(""),r=n.NONAME,i=t.getName(),e.equal(i,r,"empty setName"),e.equal(o.updatecount,0,"empty setName, no update event emitted"),t.setName("asd"),r="asd",i=t.getName(),e.equal(i,r,"proper setName"),e.equal(o.updatecount,1,"proper setName, update event emitted"),o.reset(),t.setName("\r\n \tdsa \t\r\n"),r="dsa",i=t.getName(),e.equal(i,r,"setName, auto-removing trailing/leading whitespaces"),e.equal(o.updatecount,1,"setName whitespace, update event emitted"),o.reset(),t.setName(" dsa "),e.equal(o.updatecount,0,"setName whitespace, no update event emitted if contained text matches"),o.reset(),t.setName("asd    \t\n\r\n\t   dsa"),r="asd dsa",i=t.getName(),e.equal(i,r,"setName, auto-removing multiple whitespaces inside the name"),e.equal(o.updatecount,1,"setName multiple whitespace, update event emitted"),t=new n("\tlorem  ipsum\tdolor  sit \t\namet\r\n\t "),r="lorem ipsum dolor sit amet",i=t.getName(),e.equal(i,r,"initialization with a lot of white spaces"),t=new n("\t  \t   \t\n\t\r\n\t "),r=n.NONAME,i=t.getName(),e.equal(i,r,"initialization with only white spaces"),t.setName("asd dsa"),i=t.getName(),i[1]="W",i=t.getName(),r="asd dsa",e.equal(i,r,"getName: returned value is a copy, not a reference")})}});define("ui/test/teammodel",[],function(){return function(e,t){var n,i,r,o;n=t("lib/extend"),i=t("ui/teammodel"),o=t("list/indexedmodel"),r=t("ui/playermodel"),e.test("TeamModel",function(e){var t,s,a,u;e.ok(n.isSubclass(i,o),"TeamModel is subclass of IndexedModel"),u={updatecount:0,onupdate:function(){u.updatecount+=1},reset:function(){u.updatecount=0},emitters:[]},t=new i,e.equal(t.length,1,"empty initialization generates an empty team player"),e.equal(t.getPlayer(0).getName(),r.NONAME,"empty initialization generates an default team player name"),e.equal(t.getID(),-1,"empty initialization sets id to -1"),e.equal(t.getPlayer(-1),void 0,"getPlayer(-1) returns undefined"),e.equal(t.getPlayer(5),void 0,"out of bounds getPlayer returns undefined"),a=["Erik E. Lorenz","Fabian Böttcher","Detlef Schwede"],s=[new r(a[0]),new r(a[1]),new r(a[2])],t=new i(s,5),e.equal(t.length,s.length,"proper initialization: team length"),e.equal(t.getID(),5,"proper initialization sets id"),e.equal(t.getPlayer(0).getName(),a[0],"player name 1"),e.equal(t.getPlayer(1).getName(),a[1],"player name 2"),e.equal(t.getPlayer(2).getName(),a[2],"player name 3"),t.registerListener(u),u.reset(),s[0].setName("Generic Name"),s[1].setName("Another Generic Name"),s[2].setName("Third Generic Name"),e.equal(u.updatecount,3,"player name updates propagate through to TeamModel")})}}),define("ui/test/teamsfileloadcontroller",[],function(){return function(e,t){var n,i;n=t("ui/teamsfileloadcontroller"),i=t("core/valuemodel"),e.test("TeamsFileLoadController",function(e){var t,r,o,s;s=new i(0),t="",o=[],r=n.parseCSVString(t),e.deepEqual(r,o,"empty string"),t="\n",o=[],r=n.parseCSVString(t),e.deepEqual(r,o,"empty line"),t="Erik",o=[["Erik"]],r=n.parseCSVString(t),e.deepEqual(r,o,"single line"),t='"Erik"',o=[["Erik"]],r=n.parseCSVString(t),e.deepEqual(r,o,"quoted single line"),t='""',o=[],r=n.parseCSVString(t),e.deepEqual(r,o,"quoted empty line"),t='"Erik ""Doublequote"" Lorenz"',o=[['Erik "Doublequote" Lorenz']],r=n.parseCSVString(t),e.deepEqual(r,o,"quoted double-quote"),t='"Lorenz, Erik E."',o=[["Lorenz, Erik E."]],r=n.parseCSVString(t),e.deepEqual(r,o,"quoted single line with a comma"),t="    Erik   ",o=[["Erik"]],r=n.parseCSVString(t),e.deepEqual(r,o,"space-padded single line"),t="Erik, Fabe",o=[["Erik","Fabe"]],r=n.parseCSVString(t),e.deepEqual(r,o,"two players, one team"),t='"Erik, Fabe"',o=[["Erik, Fabe"]],r=n.parseCSVString(t),e.deepEqual(r,o,"quoted two-player line, one name"),t='"Erik", "Fabe"',o=[["Erik","Fabe"]],r=n.parseCSVString(t),e.deepEqual(r,o,"two quoted players"),t="Erik\nFabe",o=[["Erik"],["Fabe"]],r=n.parseCSVString(t),e.deepEqual(r,o,"two lines"),t=[],e.equal(n.readTeamsize(t),0,"no team -> error"),t=[[]],e.equal(n.readTeamsize(t),0,"empty team -> error"),t=[["asd"],[]],e.equal(n.readTeamsize(t),0,"empty team among others -> error"),t=[["asd"],["dsa","sdf"]],e.equal(n.readTeamsize(t),0,"different team sizes -> error"),t=[["asd"],["dsa"],["sdf"]],e.equal(n.readTeamsize(t),1,"teamsize == 1"),t=[["asd","dsa"],["sdf","fds"],["fda","fad"]],e.equal(n.readTeamsize(t),2,"teamsize == 2")})}}),require.config({baseUrl:"../scripts",shim:{qunit:{exports:"QUnit",init:function(){QUnit.config.autoload=!1,QUnit.config.autostart=!1}}},paths:{options:"../test/scripts/options",presets:"../test/scripts/presets",strings:"../test/scripts/strings",qunit:"../test/scripts/qunit"}}),require(["core/config","core/common","qunit","core/test/byeresult","core/test/correctionmodel","core/test/correctionreferencemodel","core/test/emitter","core/test/listener","core/test/matchmodel","core/test/matchreferencemodel","core/test/matchresult","core/test/model","core/test/propertymodel","core/test/propertyvaluemodel","core/test/random","core/test/resultreferencemodel","core/test/rle","core/test/selectionvaluemodel","core/test/statevaluemodel","core/test/type","core/test/valuemodel","list/test/binningreferencelistmodel","list/test/combinedreferencelistmodel","list/test/indexedlistmodel","list/test/indexedmodel","list/test/lengthmodel","list/test/listmodel","list/test/listupdatelistener","list/test/maplistmodel","list/test/orderlistmodel","list/test/readonlylistmodel","list/test/referencelistmodel","list/test/sortedreferencelistmodel","list/test/uniquelistmodel","math/test/absolutematrix","math/test/antisymmetricmatrixmodel","math/test/delegatematrix","math/test/matrixmodel","math/test/positivematrix","math/test/symmetricmatrixmodel","math/test/transposedifferencematrix","math/test/transposesummatrix","math/test/trianglematrixmodel","math/test/vectormodel","ranking/test/rankingcomponentindex","ranking/test/rankingdatalistenerindex","ranking/test/rankingheadtohead","ranking/test/rankingmapper","ranking/test/rankingmodel","ranking/test/rankingsonneborn","ranking/test/rankingtac","timemachine/test/keymodel","timemachine/test/query","tournament/test/kotournamentmodel","tournament/test/roundtournamentmodel","tournament/test/swisstournamentmodel","tournament/test/tournamentindex","tournament/test/tournamentlistmodel","tournament/test/tournamentmodel","ui/test/binarytreemodel","ui/test/listcollectormodel","ui/test/playermodel","ui/test/teammodel","ui/test/teamsfileloadcontroller"],function(e,t,n){var i,r,o,s;for(s=Object.keys(require.s.contexts._.defined).filter(function(e){return/^.+\/test\/[^\/]+$/.test(e)}),i=0;i<s.length;i+=1)try{o=s[i].match(/^[^\/]+/)[0],console.log(o),r!==o&&(r=o,n.module(r)),t(s[i])(n,t)}catch(e){n.test("Loading Error",function(){var t=e.stack.split("\n")[2].replace(/^ *at */,"").replace(/\?bust=[0-9]*/,"");console.error(e.message),console.error(t),n.ok(!1,"cannot load module "+e.message.match(/"[^"]+"/)+". Possible typo?\n"+t)})}n.load(),n.start()}),define("../test/scripts/test",function(){});