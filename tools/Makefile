############
# Makefile #
################################################
# Usable Targets:                              #
# * sprite: rebuild the sprite                 #
# * scripts: rebuild auto-generated scripts    #
# * build: build the project                   #
# * dist: prepare a new distribution release   #
# * merge-master: merges a release into master #
# * doc: rebuild documentation and reference   #
# * clean: remove autogenerated build files    #
################################################

####################################################################################
# builds (packs, optimizes and compresses) the whole project for test distribution #
####################################################################################
#build: images doc
#build: images
build: FORCE
	../tools/build.sh
	echo "Build finished."

#############################
# enforce the gjslint style #
#############################
codestyle: FORCE
	find scripts -name '*.js' | xargs fixjsstyle

# compresses the whole images directory (shouldn't change anything)
images: sprite
	optipng -o3 images/sprite.png images/favicon.png

# creates the sprite
sprite: FORCE
	../tools/write-sprite.sh

# dummy target for forcing a rebuild of existing files
FORCE:
