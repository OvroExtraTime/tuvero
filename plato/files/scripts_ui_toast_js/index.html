<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - scripts/ui/toast.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>scripts/ui/toast.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">66.51</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">179</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">42.83</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.10</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/**
 * A Toast is a small text which is visible for a short period of time before
 * disappearing.
 *
 * You can supply a jquery object handle as str if you want to
 * insert an html node instead of text.
 *
 * Toast duration can be set at Toast construction or controlled via a close()
 * function
 *
 * @return Toast
 * @author Erik E. Lorenz &lt;erik.e.lorenz@gmail.com&gt;
 * @license MIT License
 * @see LICENSE
 */
define(function() {
  var Toast, fadein, fadeout, pending, toastfn, nextid, fadeoutfn;

  // pending toasts which have been issued before jquery was available
  pending = [];
  nextid = 0;

  function getid() {
    var id;
    id = nextid;
    nextid += 1;
    return id;
  }

  // will become a function once jquery has been initialized
  fadeoutfn = undefined;

  toastfn = function(str, seconds) {
    var id;

    id = getid();

    pending.push({
      str: str,
      seconds: seconds,
      id: id
    });

    return id;
  };

  function createCloseFunction(id) {
    return function() {
      var i, $alltoasts, $div;
      if (pending[id]) {
        pending[id] = undefined;
      }

      // see if jquery has been initialized
      if (fadeoutfn) {
        $alltoasts = $(&#039;#toasts .toast&#039;);
        for (i = 0; i &lt; $alltoasts.length; i += 1) {
          $div = $alltoasts.eq(i);
          if ($div.data().id === id) {
            fadeoutfn($div);
          }
        }
      }
    };
  }

  // temporary toast constructor
  Toast = function(str, seconds) {
    var id;

    id = toastfn(str, seconds);

    this.close = createCloseFunction(id);
  };

  Toast.init = function() {
    var $hidden, transition, duration, id;
    // create toast container
    $(&#039;body&#039;).append(&#039;&lt;div id=&quot;toasts&quot;&gt;&lt;div class=&quot;hidden&quot; style=&quot;display:none;&quot;&gt;ERROR&lt;/div&gt;&lt;/div&gt;&#039;);

    function getTransitionDuration() {
      var prefix, prefixes, transition;

      // TODO remove prefixes from this file
      prefixes = [&#039;&#039;, &#039;-o-&#039;, &#039;-ms-&#039;, &#039;-moz-&#039;, &#039;-webkit-&#039;];
      transition = undefined;

      for (prefix in prefixes) {
        prefix = prefixes[prefix];
        transition = $hidden.css(prefix + &#039;transition&#039;);
        if (transition) {
          break;
        }
      }
      if (transition === undefined) {
        console.error(&quot;could not read any transition lengths. What&#039;s your browser?&quot;);
        return 0.2;
      }

      // return duration
      return Number(transition.replace(/^[^0-9]*([0-9.]+)s.*$/, &#039;$1&#039;));
    }

    // abort if the style is not set
    if ($(&#039;#toasts&#039;).css(&#039;position&#039;) !== &#039;fixed&#039;) {
      console.error(&#039;Toast: stylesheet not found&#039;);
      toastfn = function(str, seconds) {
        console.error(&#039;Toast: &#039; + str);
        return getid();
      };
    } else {
      // read fade durations from css
      $hidden = $(&#039;#toasts .hidden&#039;);

      fadeout = getTransitionDuration();

      $hidden.addClass(&#039;toast&#039;);

      fadein = getTransitionDuration();

      if (fadein != Number(fadein) || !isFinite(fadein) || isNaN(fadein)) {
        console.error(&#039;fadein: not a valid number: &#039; + fadein);
        $hidden.show();
      }

      if (fadeout != Number(fadeout) || !isFinite(fadeout) || isNaN(fadeout)) {
        console.error(&#039;fadeout: not a valid number: &#039; + fadeout);
        $hidden.show();
      }

      // actual Toast constructor
      toastfn = function(str, seconds) {
        var $toasts, $div, $br;

        // default to two seconds duration
        seconds = seconds || Toast.SHORT;

        $toasts = $(&#039;#toasts&#039;);
        $div = $(&#039;&lt;div&gt;&lt;/div&gt;&#039;);

        // decide between text and jquery object handle
        if (typeof str === &#039;string&#039;) {
          $div.text(str);
        } else {
          $div.append(str);
        }

        // insert the toast and a line break
        $toasts.append($div);
        $div.after($(&#039;&lt;br&gt;&#039;));

        // fadein timeout
        window.setTimeout(function() {
          $div.addClass(&#039;toast&#039;);
        }, 10);

        // remove the toast if it&#039;s not infinite
        if (seconds &gt; 0) {
          // fadeout timeout
          window.setTimeout(function() {
            fadeoutfn($div);
          }, 1000 * (seconds + fadein));
        }

        id = getid();
        $div.data().id = id;
        return id;
      };

      fadeoutfn = function($div) {
        // remove timeout
        $div.removeClass(&#039;toast&#039;);
        window.setTimeout(function() {
          $div.next().remove();
          $div.remove();
        }, 1000 * fadeout);
      };
    }

    // issue any pending toasts
    pending.forEach(function(toast) {
      if (toast) {
        new Toast(toast.str, toast.seconds);
      }
    }, this);
  };

  Toast.SHORT = 2;
  Toast.LONG = 5;
  Toast.INFINITE = -1;

  // remember: return by reference. The new function will replace the old one
  return Toast;
});</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
